var value_to_desc_map={BAGSS:"Bias-Corrected Gilbert Skill Score",AFSS:"Asymptotic Fractions Skill Score",UFSS:"Uniform Fractions Skill Score",F_RATE:"Forecast Rate",O_RATE:"Observation Rate",IQR:"Inter-quartile range",MAD:"Median Absolute Deviation",LODDS:"Log Odds Ratio",ORSS:"Odds Ratio Skill Score",EDS:"Extreme Dependency Score",SEDS:"Symmetric Extreme Dependency Score",EDI:"Extreme Dependency Index",SEDI:"Symmetric Extreme Dependency Index",solid:"1",dashed:"2",dotted:"3","dot-dash":"4","long dash":"5",
"long short":"6",normal:"1",bold:"2",italic:"3","bold italic":"4",greek:"5",ANOM_CORR:"Anomaly correlation",ANOM_CORR_UNCNTR:"Uncentered anomaly correlation ",ACPC_03:"3hr accumulation",ACPC_06:"6hr accumulation",ACPC_24:"24hr accumulation",REFC:"Reflectivity",DPT:"Dew point temperature",HGT:"Height",TMP:"Temperature",PMSL:"Mean sea level pressure",UGRD:"U-Wind",VGRD:"V-Wind",UGRD_VGRD:"U and V-Wind",WIND:"Wind",SPFH:"Specific humidity",PWAT:"Precipital water",ACC:"Accuracy",BASER:"Base rate, aka Observed relative frequency",
BCMSE:"Bias-corrected mean squared error",BCRMSE:"Bias-corrected root mean square error",CSI:"Critical success index, aka Threat score",E10:"10th percentile of the error",E25:"25th percentile of the error",E50:"50th percentile of the error",E75:"75th percentile of the error",E90:"90th percentile of the error",ESTDEV:"Standard deviation of the error",FAR:"False alarm ratio",FBAR:"Forecast mean",FBIAS:"Bias, aka Frequency bias",FMEAN:"Forecast mean",FSTDEV:"Forecast standard deviation",GSS:"Gilbert skill score, aka Equitable threat score",
HK:"Hanssen Kuipers Discriminant",HSS:"Heidke skill score",KT_CORR:"Kendall Tau Rank Correlation Coefficient",MAE:"Mean absolute error",MBIAS:"Multiplicative Bias",ME:"Mean error, aka Additive bias",MSE:"Mean squared error",OBAR:"Observation Mean",ODDS:"Odds Ratio",OSTDEV:"Observation Standard Deviation",PODN:"Probability of Detecting No",PODY:"Probability of Detecting Yes",POFD:"Probability of false detection",PR_CORR:"Pearson's Correlation Coefficient",RMSE:"Root-mean squared error",SP_CORR:"Spearman's Rank Correlation Coefficient",
MCTS_ACC:"Multi-category: Accuracy",MCTS_GER:"Multi-category: Gerrity score",MCTS_HK:"Multi-category: Hanssen Kuipers Discrim",MCTS_HSS:"Multi-category: Heidke skill score",NBR_ACC:"Nbrhd methods: Accuracy",NBR_BASER:"Nbrhd base rate",NBR_CSI:"Nbrhd critical success index",NBR_FAR:"Nbrhd false alarm rate",NBR_FBIAS:"Nbrhd frequesncy bias",NBR_FBS:"Nbrhd methods cont: Fract brier score",NBR_FMEAN:"Nbrhd forecast mean",NBR_FSS:"Nbrhd methods cont: Fract skill score",NBR_GSS:"Nbrhd Gilbert skill score",
NBR_HK:"Nbrhd Hanssen Kuipers discrim",NBR_HSS:"Nbrhd Heidke skill score",NBR_ODDS:"Nbrhd odds ratio",NBR_PODN:"Nbrhd prob of detecting no",NBR_PODY:"Nbrhd prob of detecting yes",NBR_POFD:"Nbrhd prob of false detecting",ACOV:"Sum of area divided by total",CNT:"Count of object_id",CNTSUM:"Count of object_id",CENTX:"Centroid X in grid-units",CENTY:"Centroid Y in grid-units",CENTLAT:"Centroid lat",CENTLON:"Centroid lon",AXAVG:"Axis average",LEN:"Length",WID:"Width",ASPECT:"Aspect",AREA:"Area",AREAFIL:"Area filter",
AREATHR:"Area threshold",CURV:"Curvature",CURVX:"Curvature X",CURVY:"Curvature Y",CPLX:"Complexity",INT10:"Intensity 10th percentile",INT25:"Intensity 25th percentile",INT50:"Intensity 50th percentile",INT75:"Intensity 75th percentile",INT90:"Intensity 90th percentile",INTN:"Intensity designed for use in PERCINTRATIO",INTSUM:"Intensity sum",RATIO_FSA_ASA:"% of simple objects that are forecast",RATIO_OSA_ASA:"% of simple objects that are observation",RATIO_ASM_ASA:"% of simple objects that are matched",
RATIO_ASU_ASA:"% of simple objects that are unmatched",RATIO_FSM_FSA:"% of simple forecast objects that are matched",RATIO_FSU_FSA:"% of simple forecast objects that are unmatched",RATIO_OSM_OSA:"% of simple simple observation objects that are matched",RATIO_OSU_OSA:"% of simple simple observation objects that are unmatched",RATIO_FSM_ASM:"% of simple matched objects that are forecasts",RATIO_OSM_ASM:"% of simple matched objects that are observations",RATIO_FSU_ASU:"% of simple unmatched objects that are forecast",
RATIO_OSU_ASU:"% of simple unmatched objects that are observation",RATIO_ASA_AAA:"% of all objects that are simple",RATIO_ACA_AAA:"% of all objects that are cluster",RATIO_FSA_AAA:"What is",RATIO_OSA_AAA:"What is",RATIO_FSA_FAA:"% of all forecast objects that are simple",RATIO_FCA_FAA:"% of all forecast objects that are cluster",RATIO_OSA_OAA:"% of all observation objects that are simple",RATIO_OCA_OAA:"% of all observation objects that are cluster",RATIO_FCA_ACA:"% of cluster objects that are forecast",
RATIO_OCA_ACA:"% of cluster objects that are observation",RATIO_FSA_OSA:"Ratio of simple forecasts to simple observations [frequency bias]",RATIO_OSA_FSA:"Ratio of simple observations to simple forecasts [1 / frequency bias]",RATIO_ACA_ASA:"Ratio of cluster objects to simple objects",RATIO_ASA_ACA:"Ratio of simple objects to cluster objects",RATIO_FCA_FSA:"Ratio of cluster forecast objects to simple forecast objects",RATIO_FSA_FCA:"Ratio of simple forecast objects to cluster forecast objects",RATIO_OCA_OSA:"Ratio of cluster observation objects to simple observation objects",
RATIO_OSA_OCA:"Ratio of simple observation objects to cluster observation objects",OBJHITS:"Hits =/2",OBJMISSES:"Misses = OSU",OBJFAS:"False Alarms = FSU",OBJCSI:"CSI = hits //2 + OSU + FSU]",OBJPODY:"PODY = hits //2 + OSU]",OBJFAR:"FAR = false alarms //2 + FSU]",OBJFBIAS:"FBIAS = RATIO_FSA_OSA = FSA / OSA",AREARAT_FSA_ASA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_ASA:"Area-weighted % of simple objects forecasted",AREARAT_ASM_ASA:"Area-weighted % of simple objects forecasted",AREARAT_ASU_ASA:"Area-weighted % of simple objects forecasted",
AREARAT_FSM_FSA:"Area-weighted % of simple objects forecasted",AREARAT_FSU_FSA:"Area-weighted % of simple objects forecasted",AREARAT_OSM_OSA:"Area-weighted % of simple objects forecasted",AREARAT_OSU_OSA:"Area-weighted % of simple objects forecasted",AREARAT_FSM_ASM:"Area-weighted % of simple objects forecasted",AREARAT_OSM_ASM:"Area-weighted % of simple objects forecasted",AREARAT_FSU_ASU:"Area-weighted % of simple objects forecasted",AREARAT_OSU_ASU:"Area-weighted % of simple objects forecasted",
AREARAT_FSA_AAA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_AAA:"Area-weighted % of simple objects forecasted",AREARAT_FSA_FAA:"Area-weighted % of simple objects forecasted",AREARAT_FCA_FAA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_OAA:"Area-weighted % of simple objects forecasted",AREARAT_OCA_OAA:"Area-weighted % of simple objects forecasted",AREARAT_FCA_ACA:"Area-weighted % of simple objects forecasted",AREARAT_OCA_ACA:"Area-weighted % of simple objects forecasted",
AREARAT_FSA_OSA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_FSA:"Area-weighted % of simple objects forecasted",AREARAT_ACA_ASA:"Area-weighted % of simple objects forecasted",AREARAT_ASA_ACA:"Area-weighted % of simple objects forecasted",AREARAT_FCA_FSA:"Area-weighted % of simple objects forecasted",AREARAT_FSA_FCA:"Area-weighted % of simple objects forecasted",AREARAT_OCA_OSA:"Area-weighted % of simple objects forecasted",AREARAT_OSA_OCA:"Area-weighted % of simple objects forecasted",
CENTDIST:"Centroid distance",BOUNDDIST:"Boundry distance",HULLDIST:"Convex hull distance",ANGLEDIFF:"Angle difference",AREARATIO:"Area ratio",INTAREA:"Intersection area",UNIONAREA:"Union area",SYMDIFF:"Symmetric difference or non-intersecting area",INTOVERAREA:"Ratio of intersection area to union area",CMPLXRATIO:"Complexity ratio",PERCINTRATIO:"Ratio of intensity at percentile defined by INTNN",INT:"Interest",MAXINT:"Maximun interest",MAXINTF:"Maximun interest for forecast objects",MAXINTO:"Maximun interest for observation objects",
PSTD_BSS_SMPL:"Sample Brier skill score",PSTD_BSS:"Brier skill score",FGBAR:"Mean of absolute value of forecast gradients",MGBAR:"Mean of maximum of absolute values of forecast and observed gradients",EGBAR:"Mean of absolute value of forecast minus observed gradients",S1:"S1 score",SI:"Scatter Index",S1_OG:"S1 score with respect to observed gradient",FGOG_RATIO:"Ratio of forecast and observed gradients",SSVAR_SPREAD:"RHIST_SPREAD is preferred",ECNT_CRPS:"The Continuous Ranked Probability Score",ECNT_CRPSS:"The ContinuousRanked Probability Skill Score",
ECNT_IGN:"The Ignorance Score",ECNT_ME:"The Mean Error of the ensemble mean",ECNT_RMSE:"The Root Mean Square Error of the ensemble mean",ECNT_SPREAD:"The mean of the spread of the unperturbed ensemble member values at each observation location",ECNT_ME_OERR:"The Mean Error of the PERTURBED ensemble mean",ECNT_RMSE_OERR:"The Root Mean Square Error of the PERTURBED ensemble mean",ECNT_SPREAD_OERR:"The mean of the spread of the PERTURBED ensemble member values at each observation location",ECNT_SPREAD_PLUS_OERR:"The square root of the sum of unperturbed ensemble variance and the observation error variance",
ASPECTDIFF:"Absolute value of the difference between teh aspect ratios of two objects",CURVATURERATIO:"Ratio of the curvature of two objects definded as the lesser of the two divided by teh greater of the two",ORANK_OBS:"Value of the observation",ORANK_PIT:"Probability Integral Transform",ORANK_OBS_RANK:"Rank of the observation",ORANK_ENS_MEAN:"The unperturbed ensemble mean value",ORANK_SPREAD:"The spread of the unperturbed ensemble member values",ORANK_CLIMO:"The value of the inluded climatology",
ORANK_ENS_MEAN_OERR:"The PERTURBED ensemble mean",ORANK_SPREAD_OERR:"The spread of the PERTURBED ensemble member values",ORANK_SPREAD_PLUS_OERR:"The square root of the sum of the unperturbed ensemble variance and the observation error variance",RPS_COMP:"Complement of the Ranked Probability Score",SS_INDEX:"Skill score index value"},listStatModeRatio="RATIO_FSA_ASA RATIO_OSA_ASA RATIO_ASM_ASA RATIO_ASU_ASA RATIO_FSM_FSA RATIO_FSU_FSA RATIO_OSM_OSA RATIO_OSU_OSA RATIO_FSM_ASM RATIO_OSM_ASM RATIO_FSU_ASU RATIO_OSU_ASU RATIO_FSA_AAA RATIO_OSA_AAA RATIO_FSA_FAA RATIO_FCA_FAA RATIO_OSA_OAA RATIO_OCA_OAA RATIO_FCA_ACA RATIO_OCA_ACA RATIO_FSA_OSA RATIO_OSA_FSA RATIO_ACA_ASA RATIO_ASA_ACA RATIO_FCA_FSA RATIO_FSA_FCA RATIO_OCA_OSA RATIO_OSA_OCA OBJHITS OBJMISSES OBJFAS OBJCSI OBJPODY OBJFAR AREARAT_FSA_ASA AREARAT_OSA_ASA AREARAT_ASM_ASA AREARAT_ASU_ASA AREARAT_FSM_FSA AREARAT_FSU_FSA AREARAT_OSM_OSA AREARAT_OSU_OSA AREARAT_FSM_ASM AREARAT_OSM_ASM AREARAT_FSU_ASU AREARAT_OSU_ASU AREARAT_FSA_AAA AREARAT_OSA_AAA AREARAT_FSA_FAA AREARAT_FCA_FAA AREARAT_OSA_OAA AREARAT_OCA_OAA AREARAT_FCA_ACA AREARAT_OCA_ACA AREARAT_FSA_OSA AREARAT_OSA_FSA AREARAT_ACA_ASA AREARAT_ASA_ACA AREARAT_FCA_FSA AREARAT_FSA_FCA AREARAT_OCA_OSA AREARAT_OSA_OCA OBJAHITS OBJAMISSES OBJAFAS OBJACSI OBJAPODY OBJAFAR".split(" "),
listStatMtdRatio="2d_AREARAT_ACA_ASA 2d_AREARAT_ASA_ACA 2d_AREARAT_ASM_ASA 2d_AREARAT_ASU_ASA 2d_AREARAT_FCA_ACA 2d_AREARAT_FCA_FAA 2d_AREARAT_FCA_FSA 2d_AREARAT_FSA_AAA 2d_AREARAT_FSA_ASA 2d_AREARAT_FSA_FAA 2d_AREARAT_FSA_FCA 2d_AREARAT_FSA_OSA 2d_AREARAT_FSM_ASM 2d_AREARAT_FSM_FSA 2d_AREARAT_FSU_ASU 2d_AREARAT_FSU_FSA 2d_AREARAT_OCA_ACA 2d_AREARAT_OCA_OAA 2d_AREARAT_OCA_OSA 2d_AREARAT_OSA_AAA 2d_AREARAT_OSA_ASA 2d_AREARAT_OSA_FSA 2d_AREARAT_OSA_OAA 2d_AREARAT_OSA_OCA 2d_AREARAT_OSM_ASM 2d_AREARAT_OSM_OSA 2d_AREARAT_OSU_ASU 2d_AREARAT_OSU_OSA 2d_OBJACSI 2d_OBJAFAR 2d_OBJAFAS 2d_OBJAMISSES 2d_OBJAPODY 2d_OBJCSI 2d_OBJFAR 2d_OBJFAS 2d_OBJHITS 2d_OBJMISSES 2d_OBJPODY 2d_RATIO_ACA_ASA 2d_RATIO_ASA_ACA 2d_RATIO_ASM_ASA 2d_RATIO_ASU_ASA 2d_RATIO_FCA_ACA 2d_RATIO_FCA_FAA 2d_RATIO_FCA_FSA 2d_RATIO_FSA_AAA 2d_RATIO_FSA_ASA 2d_RATIO_FSA_FAA 2d_RATIO_FSA_FCA 2d_RATIO_FSA_OSA 2d_RATIO_FSM_ASM 2d_RATIO_FSM_FSA 2d_RATIO_FSU_ASU 2d_RATIO_FSU_FSA 2d_RATIO_OCA_ACA 2d_RATIO_OCA_OAA 2d_RATIO_OCA_OSA 2d_RATIO_OSA_AAA 2d_RATIO_OSA_ASA 2d_RATIO_OSA_FSA 2d_RATIO_OSA_OAA 2d_RATIO_OSA_OCA 2d_RATIO_OSM_ASM 2d_RATIO_OSM_OSA 2d_RATIO_OSU_ASU 2d_RATIO_OSU_OSA 3d_OBJCSI 3d_OBJFAR 3d_OBJFAS 3d_OBJHITS 3d_OBJMISSES 3d_OBJPODY 3d_OBJVCSI 3d_OBJVFAR 3d_OBJVFAS 3d_OBJVHITS 3d_OBJVMISSES 3d_OBJVPODY 3d_RATIO_ACA_ASA 3d_RATIO_ASA_ACA 3d_RATIO_ASM_ASA 3d_RATIO_ASU_ASA 3d_RATIO_FCA_ACA 3d_RATIO_FCA_FAA 3d_RATIO_FCA_FSA 3d_RATIO_FSA_AAA 3d_RATIO_FSA_ASA 3d_RATIO_FSA_FAA 3d_RATIO_FSA_FCA 3d_RATIO_FSA_OSA 3d_RATIO_FSM_ASM 3d_RATIO_FSM_FSA 3d_RATIO_FSU_ASU 3d_RATIO_FSU_FSA 3d_RATIO_OCA_ACA 3d_RATIO_OCA_OAA 3d_RATIO_OCA_OSA 3d_RATIO_OSA_AAA 3d_RATIO_OSA_ASA 3d_RATIO_OSA_FSA 3d_RATIO_OSA_OAA 3d_RATIO_OSA_OCA 3d_RATIO_OSM_ASM 3d_RATIO_OSM_OSA 3d_RATIO_OSU_ASU 3d_RATIO_OSU_OSA 3d_VOLRAT_ACA_ASA 3d_VOLRAT_ASA_ACA 3d_VOLRAT_ASM_ASA 3d_VOLRAT_ASU_ASA 3d_VOLRAT_FCA_ACA 3d_VOLRAT_FCA_FAA 3d_VOLRAT_FCA_FSA 3d_VOLRAT_FSA_AAA 3d_VOLRAT_FSA_ASA 3d_VOLRAT_FSA_FAA 3d_VOLRAT_FSA_FCA 3d_VOLRAT_FSA_OSA 3d_VOLRAT_FSM_ASM 3d_VOLRAT_FSM_FSA 3d_VOLRAT_FSU_ASU 3d_VOLRAT_FSU_FSA 3d_VOLRAT_OCA_ACA 3d_VOLRAT_OCA_OAA 3d_VOLRAT_OCA_OSA 3d_VOLRAT_OSA_AAA 3d_VOLRAT_OSA_ASA 3d_VOLRAT_OSA_FSA 3d_VOLRAT_OSA_OAA 3d_VOLRAT_OSA_OCA 3d_VOLRAT_OSM_ASM 3d_VOLRAT_OSM_OSA 3d_VOLRAT_OSU_ASU 3d_VOLRAT_OSU_OSA".split(" "),
listStatModeSingle="ACOV CNT CNTSUM CENTX CENTY CENTLAT CENTLON AXAVG LEN WID ASPECT AREA AREATHR CURV CURVX CURVY CPLX INT10 INT25 INT50 INT75 INT90 INTN INTSUM".split(" "),listStatModePair="CENTDIST BOUNDDIST HULLDIST ANGLEDIFF AREARATIO INTAREA UNIONAREA SYMDIFF INTOVERAREA CMPLXRATIO PERCINTRATIO INT MAXINT MAXINTF MAXINTO ASPECTDIFF CURVATURERATIO".split(" "),listStatMtd2d="2D_AREA 2D_CENTROID_X 2D_CENTROID_Y 2D_CENTROID_LAT 2D_CENTROID_LON 2D_AXIS_ANG 2D_INTENSITY_10 2D_INTENSITY_25 2D_INTENSITY_50 2D_INTENSITY_75 2D_INTENSITY_90 2D_INTENSITY_N".split(" "),
listStatMtd3dSingle="3D_CENTROID_X 3D_CENTROID_Y 3D_CENTROID_T 3D_CENTROID_LAT 3D_CENTROID_LON 3D_X_DOT 3D_Y_DOT 3D_AXIS_ANG 3D_VOLUME 3D_START_TIME 3D_END_TIME 3D_DURATION 3D_CDIST_TRAVELLED 3D_INTENSITY_10 3D_INTENSITY_25 3D_INTENSITY_50 3D_INTENSITY_75 3D_INTENSITY_90 3D_INTENSITY_N".split(" "),listStatMtd3dPair="3D_SPACE_CENTROID_DIST 3D_TIME_CENTROID_DELTA 3D_AXIS_DIFF 3D_SPEED_DELTA 3D_DIRECTION_DIFF 3D_VOLUME_RATIO 3D_START_TIME_DELTA 3D_END_TIME_DELTA 3D_INTERSECTION_VOLUME 3D_DURATION_DIFF 3D_INTEREST".split(" "),
listStatMode=listStatModeSingle.concat(listStatModePair),listStatMtd=listStatMtd2d.concat(listStatMtd3dSingle).concat(listStatMtd3dPair),series_var_value_to_title_stat_map={model:"MODEL",descr:"DESC",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",obs_var:"OBS_VAR",
fcst_perc:"FCST_PERC",obs_perc:"OBS_PERC"},fix_var_value_to_title_stat_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",obs_var:"OBS_VAR",cov_thresh:"COV_THRESH"},fix_var_value_to_title_mode_map={fcst_lead:"FCST_LEAD",model:"MODEL",
descr:"DESC",fcst_valid:"FCST_VALID",valid_hour:"VALID_HOUR",fcst_init:"FCST_INIT",init_hour:"INIT_HOUR",fcst_accum:"FCST_ACCUM",fcst_rad:"FCST_RAD",fcst_thr:"FCST_THR",fcst_lev:"FCST_LEV"},fix_var_value_to_title_mtd_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_valid:"FCST_VALID",valid_hour:"VALID_HOUR",fcst_init:"FCST_INIT",init_hour:"INIT_HOUR",fcst_accum:"FCST_ACCUM",fcst_rad:"FCST_RAD",fcst_thr:"FCST_THR",fcst_lev:"FCST_LEV",fcst_t_beg:"FCST_T_BEG",fcst_t_end:"FCST_T_END",obs_t_beg:"OBS_T_BEG",
obs_t_end:"OBS_T_END"},indy_var_value_to_title_stat_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_lev:"FCST_LEV",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",interp_pnts:"INTERP_PNTS",vx_mask:"VX_MASK"},indy_var_value_to_title_mode_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_lev:"FCST_LEV",fcst_thr:"FCST_THR",fcst_valid:"FCST_VALID",valid_hour:"VALID_HOUR",fcst_init:"FCST_INIT",
init_hour:"INIT_HOUR",fcst_rad:"FCST_RAD",vx_mask:"VX_MASK"},indy_var_value_to_title_mtd_map={fcst_lead:"FCST_LEAD",model:"MODEL",descr:"DESC",fcst_lev:"FCST_LEV",fcst_thr:"FCST_THR",fcst_valid:"FCST_VALID",valid_hour:"VALID_HOUR",fcst_init:"FCST_INIT",init_hour:"INIT_HOUR",fcst_rad:"FCST_RAD",vx_mask:"VX_MASK",fcst_t_beg:"FCST_T_BEG",fcst_t_end:"FCST_T_END",obs_t_beg:"OBS_T_BEG",obs_t_end:"OBS_T_END"},phist_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",
valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",n_bin:"N_BIN",cov_thresh:"COV_THRESH"},rhist_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",
interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",n_rank:"N_RANK",cov_thresh:"COV_THRESH"},relp_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",n_ens:"N_ENS",cov_thresh:"COV_THRESH"},
perf_fixed_var_map={fcst_var:"FCST_VAR",model:"MODEL",fcst_lead:"FCST_LEAD",fcst_valid_beg:"FCST_VALID_BEG",valid_hour:"VALID_HOUR",fcst_init_beg:"FCST_INIT_BEG",init_hour:"INIT_HOUR",fcst_lev:"FCST_LEV",obtype:"OBTYPE",vx_mask:"VX_MASK",interp_mthd:"INTERP_MTHD",interp_pnts:"INTERP_PNTS",fcst_thresh:"FCST_THRESH",obs_thresh:"OBS_THRESH",cov_thresh:"COV_THRESH"},fcst_var_y1_indexes=[1],series_var_y1_indexes=[1],fcst_var_y2_indexes=[],series_var_y2_indexes=[],fixed_var_indexes=[],date_period_indexes=
[1],firstSeriesFormatting={order:"1",hide:"No",plot_ci:"none",color:"",pch:20,type:"b",lty:"1",lwd:"1",show_signif:"No",con_series:"1",legend:"",id:"1"},seriesDiffY1=[],seriesDiffY2=[],previousIndVarValResponse,fixVarValResponse={},seriesY1VarValResponse={},seriesY2VarValResponse={},xml='<?xml version="1.0"?><Request/>',group_name_to_value_map,indy_var_vals_to_attr,fcst_vars=[],fcst_vars_stats=[],lines=[];
function cleanUp(){fcst_var_y1_indexes=[1];series_var_y1_indexes=[1];fcst_var_y2_indexes=[];series_var_y2_indexes=[];fixed_var_indexes=[];date_period_indexes=[1];seriesDiffY1=[];seriesDiffY2=[];previousIndVarValResponse=null;fixVarValResponse={};seriesY1VarValResponse={};seriesY2VarValResponse={};group_name_to_value_map=null;fcst_vars=[];fcst_vars_stats=[];lines=[]}
function isModeStat(a){if(0<=$.inArray(a,listStatModeRatio))return!0;a=a.split("_");return 2==a.length?0<=$.inArray(a[0],listStatMode)||"ACOVACOV"==a[0]?!0:!1:!1}function isMtdStat(a){if(0<=$.inArray(a,listStatMtdRatio))return!0;a=a.split("_");for(var b="",d=0;d<a.length-1;d++)b+=a[d],d!==a.length-2&&(b+="_");return 0<=$.inArray(b,listStatMtd)}
function getForecastVariablesHist(){var a=getSelectedDatabases();if(a){$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+a+"</db_con><list_val><stat_field>FCST_VAR</stat_field></list_val></request>",error:function(a,b,c){},success:function(a){a=$(a).find("val");for(var b=0;b<a.length;b++)fcst_vars.push($(a[b]).text())}});var b="TMP";0<fcst_vars.length&&(b=fcst_vars[0]);$.ajax({async:!1,
url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+a+"</db_con><list_stat><stat_fcst_var>"+b+"</stat_fcst_var></list_stat></request>",error:function(a,b,c){},success:function(a){a=$(a).find("val");for(var b=0;b<a.length;b++)fcst_vars_stats.push($(a[b]).text())}})}}
function getSelectedDatabases(){var a="";$("input[name='multiselect_database']:checked").each(function(){a=a+$(this).val()+","});a.endsWith(",")&&(a=a.slice(0,-1));0===a.length&&(a=querySt("db"));if("undefined"===typeof a&&null!=initXML){a=initXML.find("database").text();var b=document.createTextNode(a),d=document.getElementById("categories1").childNodes[0];d.replaceChild(b,d.childNodes[0])}"undefined"===typeof a&&(a=document.getElementById("categories1").childNodes[0].innerText);"Select database"===
a&&(a=null);return a}
function updateStatVariable(){$("#listdt").jqGrid("clearGridData");var a=$("#fcst_var_y1_1");var b=$("#indy_var_val");a.empty();try{a.multiselect("refresh")}catch(e){}b.empty();try{b.multiselect("refresh")}catch(e){}var d=fixed_var_indexes.slice();for(b=0;b<d.length;b++)removeFixedVar("fixed_var_"+d[b]);(b=getSelectedDatabases())&&$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+b+
"</db_con><list_val><stat_field>FCST_VAR</stat_field></list_val></request>",error:function(){},success:function(b){var c=$(b).find("val");if(0<c.length){b=[];for(var d=0;d<c.length;d++){var e=$(c[d]);if(0==d||0!=d&&e.text()!==$(c[d-1]).text()){var k=e.text().formatAll();e=$("<option />",{value:k,text:k,title:value_to_desc_map[e.text()]});b.push(e)}else 0!=d&&e.text()===$(c[d-1]).text()&&b[b.length-1].text(b[b.length-1].text()+"*")}e=$("input[name='multiselect_database']:checked").length-1;for(d=0;d<
b.length;d++)b[d].text()!==b[d][0].value&&(c=b[d].text().substring(b[d][0].value.length,b[d].text().length).length,c===e?b[d].text(b[d][0].value+"*"):b[d].text(b[d][0].value)),b[d].appendTo(a);try{a.multiselect("refresh")}catch(l){}updateStatVal()}}})}
function updateForecastVariables(){$("#listdt").jqGrid("clearGridData");(selected_mode=$("#plot_data").multiselect("getChecked").val())||(selected_mode="stat");var a=$("#fcst_var_y1_1"),b=$("#fcst_var_y2_1");var d=$("#indy_var_val");a.empty();try{a.multiselect("refresh")}catch(c){}b.empty();try{b.multiselect("refresh")}catch(c){}d.empty();try{d.multiselect("refresh")}catch(c){}for(d=1;d<fcst_var_y1_indexes.length;d++)removeFcstVar("fcst_var_y1_"+fcst_var_y1_indexes[d]);for(d=0;d<fcst_var_y2_indexes.length;d++)removeFcstVar("fcst_var_y2_"+
fcst_var_y2_indexes[d]);for(d=1;d<series_var_y1_indexes.length;d++)removeSeriesVar("series_var_y1_"+series_var_y1_indexes[d]);for(d=0;d<series_var_y2_indexes.length;d++)removeSeriesVar("series_var_y2_"+series_var_y2_indexes[d]);var e=fixed_var_indexes.slice();for(d=0;d<e.length;d++)removeFixedVar("fixed_var_"+e[d]);$("#group_series_var_y1_1").prop("checked",!1);(d=getSelectedDatabases())&&0!==d.length?$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",
data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+d+"</db_con><list_val><"+selected_mode+"_field>FCST_VAR</"+selected_mode+"_field></list_val></request>",error:function(){},success:function(c){var d=$(c).find("val");if(0<d.length){c=[];for(var e=0;e<d.length;e++){var k=$(d[e]);if(0===e||0!==e&&k.text()!==$(d[e-1]).text()){var l=k.text().formatAll();k=$("<option />",{value:l,text:l,title:value_to_desc_map[k.text()]});c.push(k)}else 0!==e&&k.text()===$(d[e-1]).text()&&c[c.length-1].text(c[c.length-
1].text()+"*")}k=$("input[name='multiselect_database']:checked").length-1;for(e=0;e<c.length;e++)c[e].text()!==c[e][0].value&&(d=c[e].text().substring(c[e][0].value.length,c[e].text().length).length,d===k?c[e].text(c[e][0].value+"*"):c[e].text(c[e][0].value)),c[e].appendTo(a),c[e].clone().appendTo(b);try{a.multiselect("refresh")}catch(p){}try{b.multiselect("refresh")}catch(p){}}else"stat"===selected_mode?$("#plot_data").val("mode"):"mode"===selected_mode?$("#plot_data").val("mtd"):"mtd"===selected_mode&&
$("#plot_data").val("stat"),$("#plot_data").multiselect("refresh")}}):($("#plot_data").val("stat"),$("#plot_data").multiselect("refresh"))}
function updateMode(a,b,d){var e=$("#fcst_stat_"+a+"_"+b);e.empty();var c;try{var f=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(q){f=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}for(c=0;c<listStatModeRatio.length;c++){var g=listStatModeRatio[c];var k=$.isArray(d)?0<=$.inArray(g,d):g==d;g=$("<option />",{value:g,text:g,title:value_to_desc_map[g],selected:k});g.appendTo(e)}try{e.multiselect("option","noneSelectedText","Select ratio stat"),e.multiselect("refresh")}catch(q){}var l=
$("#fcst_stat_mode_"+a+"_"+b),p="",m="";0<d.length&&2==d.split("_").length&&(p=d.split("_")[0],m=d.split("_")[1]);"ACOVACOV"==p&&(p="ACOV");d=!1;l.empty();try{l.multiselect("destroy")}catch(q){}for(c=0;c<listStatMode.length;c++)g=listStatMode[c],(k=g==p)&&(d=!0),g=$("<option />",{value:g,text:g,title:value_to_desc_map[g],selected:k}),g.appendTo(l);l.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:225,height:300,noneSelectedText:"Select attribute stat",allUnselected:!d,click:function(a,
b){a=this.id.split("_");$("#fcst_stat_"+a[a.length-2]+"_"+a[a.length-1]+" option").removeAttr("selected");try{$("#fcst_stat_"+a[a.length-2]+"_"+a[a.length-1]).multiselect("refresh")}catch(u){}a=$("#fcst_stat_mode_config_"+a[a.length-2]+"_"+a[a.length-1]);a.css("display","block");"ACOV"==b.value?a.find(".non-acov").attr("disabled",!0):a.find(".non-acov").removeAttr("disabled");-1<listStatModePair.indexOf(b.value)?a.find(".non-pair").attr("disabled",!0):a.find(".non-pair").removeAttr("disabled");$("input[name=statistics][value=calculations_statistics]").prop("checked",
!0);$("#calc_stat").val("none");try{$("#calc_stat").multiselect("refresh")}catch(u){}$("#aggregation_statistics ").hide();$("#calculations_statistics ").show();updateSeries()}});d&&(c=$("#fcst_stat_mode_config_"+a+"_"+b),c.css("display","block"),"ACOV"==p?c.find(".non-acov").attr("disabled",!0):c.find(".non-acov").removeAttr("disabled"),2==m.length&&(m="A"+m),"ACOV"==p?"A"==m[0]?(c.find('[name="mode_stat_fcst"]').prop("checked",!0),c.find('[name="mode_stat_obs"]').prop("checked",!0)):"F"==m[0]?(c.find('[name="mode_stat_fcst"]').prop("checked",
!0),c.find('[name="mode_stat_obs"]').prop("checked",!1)):"O"==m[0]&&(c.find('[name="mode_stat_fcst"]').prop("checked",!1),c.find('[name="mode_stat_obs"]').prop("checked",!0)):("D"==m[0]?c.find('[name="mode_stat_diff"]').prop("checked",!0):"A"==m[0]?(c.find('[name="mode_stat_diff"]').prop("checked",!1),c.find('[name="mode_stat_fcst"]').prop("checked",!0),c.find('[name="mode_stat_obs"]').prop("checked",!0)):"F"==m[0]?(c.find('[name="mode_stat_diff"]').prop("checked",!1),c.find('[name="mode_stat_fcst"]').prop("checked",
!0),c.find('[name="mode_stat_obs"]').prop("checked",!1)):"O"==m[0]&&(c.find('[name="mode_stat_diff"]').prop("checked",!1),c.find('[name="mode_stat_fcst"]').prop("checked",!1),c.find('[name="mode_stat_obs"]').prop("checked",!0)),"A"==m[1]?(c.find('[name="mode_stat_simple"]').prop("checked",!0),c.find('[name="mode_stat_cluster"]').prop("checked",!0)):"S"==m[1]?(c.find('[name="mode_stat_simple"]').prop("checked",!0),c.find('[name="mode_stat_cluster"]').prop("checked",!1)):"C"==m[1]&&(c.find('[name="mode_stat_simple"]').prop("checked",
!1),c.find('[name="mode_stat_cluster"]').prop("checked",!0)),"A"==m[2]?(c.find('[name="mode_stat_matched"]').prop("checked",!0),c.find('[name="mode_stat_unmatched"]').prop("checked",!0)):"M"==m[2]?(c.find('[name="mode_stat_matched"]').prop("checked",!0),c.find('[name="mode_stat_unmatched"]').prop("checked",!1)):"U"==m[2]&&(c.find('[name="mode_stat_matched"]').prop("checked",!1),c.find('[name="mode_stat_unmatched"]').prop("checked",!0))),-1<listStatModePair.indexOf(p)?c.find(".non-pair").attr("disabled",
!0):c.find(".non-pair").removeAttr("disabled"));if("N/A"===f){try{e.multiselect("disable")}catch(q){}try{l.multiselect("disable")}catch(q){}}else{try{e.multiselect("enable")}catch(q){}try{l.multiselect("enable")}catch(q){}}e=$("#series_var_"+a+"_"+b);e.empty();$.each(fix_var_value_to_title_mode_map,function(a,b){e.append('<option value="'+a+'">'+b+"</option>")});try{e.multiselect("refresh")}catch(q){}}
function updateMtd(a,b,d){var e=$("#fcst_stat_"+a+"_"+b);e.empty();var c;try{var f=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(q){f=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}for(c=0;c<listStatMtdRatio.length;c++){var g=listStatMtdRatio[c];var k=$.isArray(d)?0<=$.inArray(g,d):g==d;g=$("<option />",{value:g,text:g,title:value_to_desc_map[g],selected:k});g.appendTo(e)}try{e.multiselect("option","noneSelectedText","Select ratio stat"),e.multiselect("refresh")}catch(q){}var l=
$("#fcst_stat_mode_"+a+"_"+b),p="",m="";if(0<d.length){m=d.split("_");for(c=0;c<m.length-1;c++)p+=m[c],c!==m.length-2&&(p+="_");m=m[m.length-1]}d=!1;l.empty();try{l.multiselect("destroy")}catch(q){}for(c=0;c<listStatMtd.length;c++)g=listStatMtd[c],(k=g===p)&&(d=!0),g=$("<option />",{value:g,text:g,title:value_to_desc_map[g],selected:k}),g.appendTo(l);l.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:225,height:300,noneSelectedText:"Select attribute stat",allUnselected:!d,click:function(a,
b){a=this.id.split("_");$("#fcst_stat_"+a[a.length-2]+"_"+a[a.length-1]+" option").removeAttr("selected");try{$("#fcst_stat_"+a[a.length-2]+"_"+a[a.length-1]).multiselect("refresh")}catch(u){}a=$("#fcst_stat_mode_config_"+a[a.length-2]+"_"+a[a.length-1]);a.css("display","block");a.find(".non-acov").removeAttr("disabled");-1<listStatModePair.indexOf(b.value)||-1<listStatMtd3dPair.indexOf(b.value)?a.find(".non-pair").attr("disabled",!0):a.find(".non-pair").removeAttr("disabled");$("input[name=statistics][value=calculations_statistics]").prop("checked",
!0);$("#calc_stat").val("none");try{$("#calc_stat").multiselect("refresh")}catch(u){}$("#aggregation_statistics ").hide();$("#calculations_statistics ").show();updateSeries()}});d&&(c=$("#fcst_stat_mode_config_"+a+"_"+b),c.css("display","block"),"ACOV"==p?c.find(".non-acov").attr("disabled",!0):c.find(".non-acov").removeAttr("disabled"),2==m.length&&(m="A"+m),"ACOV"==p?"A"==m[0]?(c.find('[name="mode_stat_fcst"]').prop("checked",!0),c.find('[name="mode_stat_obs"]').prop("checked",!0)):"F"==m[0]?(c.find('[name="mode_stat_fcst"]').prop("checked",
!0),c.find('[name="mode_stat_obs"]').prop("checked",!1)):"O"==m[0]&&(c.find('[name="mode_stat_fcst"]').prop("checked",!1),c.find('[name="mode_stat_obs"]').prop("checked",!0)):("D"==m[0]?c.find('[name="mode_stat_diff"]').prop("checked",!0):"A"==m[0]?(c.find('[name="mode_stat_diff"]').prop("checked",!1),c.find('[name="mode_stat_fcst"]').prop("checked",!0),c.find('[name="mode_stat_obs"]').prop("checked",!0)):"F"==m[0]?(c.find('[name="mode_stat_diff"]').prop("checked",!1),c.find('[name="mode_stat_fcst"]').prop("checked",
!0),c.find('[name="mode_stat_obs"]').prop("checked",!1)):"O"==m[0]&&(c.find('[name="mode_stat_diff"]').prop("checked",!1),c.find('[name="mode_stat_fcst"]').prop("checked",!1),c.find('[name="mode_stat_obs"]').prop("checked",!0)),"A"==m[1]?(c.find('[name="mode_stat_simple"]').prop("checked",!0),c.find('[name="mode_stat_cluster"]').prop("checked",!0)):"S"==m[1]?(c.find('[name="mode_stat_simple"]').prop("checked",!0),c.find('[name="mode_stat_cluster"]').prop("checked",!1)):"C"==m[1]&&(c.find('[name="mode_stat_simple"]').prop("checked",
!1),c.find('[name="mode_stat_cluster"]').prop("checked",!0)),"A"==m[2]?(c.find('[name="mode_stat_matched"]').prop("checked",!0),c.find('[name="mode_stat_unmatched"]').prop("checked",!0)):"M"==m[2]?(c.find('[name="mode_stat_matched"]').prop("checked",!0),c.find('[name="mode_stat_unmatched"]').prop("checked",!1)):"U"==m[2]&&(c.find('[name="mode_stat_matched"]').prop("checked",!1),c.find('[name="mode_stat_unmatched"]').prop("checked",!0))),-1<listStatMtd3dPair.indexOf(p)?c.find(".non-pair").attr("disabled",
!0):c.find(".non-pair").removeAttr("disabled"));if("N/A"===f){try{e.multiselect("disable")}catch(q){}try{l.multiselect("disable")}catch(q){}}else{try{e.multiselect("enable")}catch(q){}try{l.multiselect("enable")}catch(q){}}e=$("#series_var_"+a+"_"+b);e.empty();$.each(fix_var_value_to_title_mtd_map,function(a,b){e.append('<option value="'+a+'">'+b+"</option>")});try{e.multiselect("refresh")}catch(q){}}
function updateStatVal(){var a=getSelectedDatabases();if(a){var b=$("#fcst_var_y1_1").multiselect("getChecked").val();$("#fcst_stat_y1_1").empty();var d=$("#fcst_stat_y1_1");b&&(b=b.replace("&","&amp;").replace(">","&gt;").replace("<","&lt;"));d.empty();$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+a+"</db_con><list_stat><stat_fcst_var>"+b+"</stat_fcst_var></list_stat></request>",error:function(){},
success:function(a){var b=$(a).find("val");a=[];if(0<b.length){for(var e=0;e<b.length;e++){var g=$(b[e]);if(0==e||0!=e&&g.text()!==$(b[e-1]).text()){var k=g.text().formatAll();g=$("<option />",{value:k,text:k,title:value_to_desc_map[g.text()]});a.push(g)}else 0!=e&&g.text()===$(b[e-1]).text()&&a[a.length-1].text(a[a.length-1].text()+"*")}g=$("input[name='multiselect_database']:checked").length-1;for(e=0;e<a.length;e++)a[e].text()!==a[e][0].value&&(b=a[e].text().substring(a[e][0].value.length,a[e].text().length).length,
b===g?a[e].text(a[e][0].value+"*"):a[e].text(a[e][0].value)),a[e].appendTo(d)}else g=$("<option />",{value:"N/A",text:"N/A"}),g.appendTo(d);try{d.multiselect("refresh")}catch(l){console.log(l)}updateSeries()}})}}
function updateStats(a,b,d){var e=$("#fcst_stat_"+a+"_"+b),c=$("#fcst_stat_mode_"+a+"_"+b),f=$("#plot_data").multiselect("getChecked").val(),g=getSelectedDatabases();if(g){try{var k=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(p){k=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}if("stat"===f){e.empty();try{c.multiselect("destroy")}catch(p){}c.css("display","none");$("#fcst_stat_mode_config_"+a+"_"+b).css("display","none");try{e.multiselect("option","noneSelectedText","Select attribute stat")}catch(p){e.prop("disabled",
"disabled")}}else if(f){try{c.multiselect("enable")}catch(p){c.prop("disabled","")}try{e.multiselect("option","noneSelectedText","Select ratio stat")}catch(p){e.prop("disabled","disabled")}}else{e.empty();try{e.multiselect("option","noneSelectedText","Select value")}catch(p){e.prop("disabled","disabled")}}if("N/A"===k)try{e.multiselect("disable")}catch(p){e.prop("disabled","disabled")}else{try{e.multiselect("enable")}catch(p){e.prop("disabled","")}k&&(k=k.replace("&","&amp;").replace(">","&gt;").replace("<",
"&lt;"));$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+g+"</db_con><list_stat><stat_fcst_var>"+k+"</stat_fcst_var></list_stat></request>",error:function(){},success:function(a){var b=$(a).find("val");a=[];if(0<b.length){for(var c=0;c<b.length;c++){var g=$(b[c]);var f=0<=$.inArray(g.text(),d);if(0==c||0!=c&&g.text()!==$(b[c-1]).text()){var l=g.text().formatAll();f=$("<option />",{value:l,text:l,
title:value_to_desc_map[g.text()],selected:f});a.push(f)}else 0!=c&&g.text()===$(b[c-1]).text()&&a[a.length-1].text(a[a.length-1].text()+"*")}f=$("input[name='multiselect_database']:checked").length-1;for(c=0;c<a.length;c++)a[c].text()!==a[c][0].value&&(b=a[c].text().substring(a[c][0].value.length,a[c].text().length).length,b===f?a[c].text(a[c][0].value+"*"):a[c].text(a[c][0].value)),a[c].appendTo(e)}else f=$("<option />",{value:"N/A",text:"N/A"}),f.appendTo(e);try{e.multiselect("refresh")}catch(v){}d=
[]}})}var l=$("#series_var_"+a+"_"+b);l.empty();$.each(series_var_value_to_title_stat_map,function(a,b){l.append('<option value="'+a+'">'+b+"</option>")});try{l.multiselect("refresh")}catch(p){}}}
function updateSeriesVarValEns(a,b){$("#listdt").jqGrid("clearGridData");var d=$("#series_var_val_y1_"+a);d.empty();var e=getSelectedDatabases();if(e){try{var c=$("#series_var_y1_"+a).multiselect("getChecked").val()}catch(f){c=$("#series_var_y1_"+a+" option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",contentType:"application/xml",dataType:"xml",processData:!1,data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+e+"</db_con><list_val><ensss_field>"+c+'</ensss_field><stat><fcst_var name="TMP"></fcst_var></stat></list_val></request>',
error:function(){},success:function(c){seriesY1VarValResponse[a]=c;var e=$(c).find("val");c=[];if(0<e.length){for(var f=0;f<e.length;f++){var l=$(e[f]);var p=0<=$.inArray(l.text(),b);0==f||0!=f&&l.text()!==$(e[f-1]).text()?(l=l.text().formatAll(),p=$("<option />",{value:l,text:l,selected:p}),c.push(p)):0!=f&&l.text()===$(e[f-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}p=$("input[name='multiselect_database']:checked").length-1;for(f=0;f<c.length;f++)c[f].text()!==c[f][0].value&&(e=c[f].text().substring(c[f][0].value.length,
c[f].text().length).length,e===p?c[f].text(c[f][0].value+"*"):c[f].text(c[f][0].value)),c[f].appendTo(d);try{d.multiselect("refresh")}catch(m){}}else{p=$("<option />",{value:"N/A",text:"N/A"});p.appendTo(d);try{d.multiselect("refresh")}catch(m){}}b=[]}})}}
function updateSeriesVarVal(a,b,d){var e=$("#series_var_val_"+a+"_"+b);e.empty();var c=getSelectedDatabases();if(c){if("Perf"===currentTab){var f="perf";var g="<stat></stat>"}else f="Taylor"===currentTab?"taylor":$("#plot_data").multiselect("getChecked").val(),g=convertVarsAndStatsToXml();try{var k=$("#series_var_"+a+"_"+b).multiselect("getChecked").val()}catch(l){k=$("#series_var_"+a+"_"+b).find("option:first-child").val()}"undefined"!==typeof k&&$.ajax({async:!1,url:"servlet",type:"POST",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+
c+"</db_con><list_val><"+f+"_field>"+k+"</"+f+"_field>"+g+"</list_val></request>",dataType:"xml",processData:!1,contentType:"application/xml",error:function(){},success:function(c){"y1"===a?seriesY1VarValResponse[b]=c:seriesY2VarValResponse[b]=c;var g=$(c).find("val");c=[];if(0<g.length){for(var f=0;f<g.length;f++){var l=$(g[f]);var k="string"===$.type(d)?l.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;","&")===d:0<=$.inArray(l.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;",
"&"),d);0===f||0!==f&&l.text()!==$(g[f-1]).text()?(k=$("<option />",{value:l.text(),text:l.text(),selected:k}),c.push(k)):0!==f&&l.text()===$(g[f-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}k=$("input[name='multiselect_database']:checked").length-1;for(f=0;f<c.length;f++)c[f].text()!==c[f][0].value&&(g=c[f].text().substring(c[f][0].value.length,c[f].text().length).length,g===k?c[f].text(c[f][0].value+"*"):c[f].text(c[f][0].value)),c[f].appendTo(e);try{e.multiselect("refresh")}catch(u){}}else{k=
$("<option />",{value:"N/A",text:"N/A"});k.appendTo(e);try{e.multiselect("refresh")}catch(u){}}1===d.length&&-1!==d[0].indexOf(",")&&$("#group_series_var_"+a+"_"+b).prop("checked",!0);d=[]}})}}
function updateFixedVarValHist(a,b,d){d&&"false"===d&&$("#fix_var_event_equal_"+a).prop("checked",!1);var e=$("#fixed_var_val_"+a);e.empty();if(d=getSelectedDatabases()){try{var c=$("#fixed_var_"+a).multiselect("getChecked").val()}catch(g){c=$("#fixed_var_"+a+" option:first-child").val()}var f;"Hist"===currentTab?f=$("input:radio[name='hist_line_type']:checked").val():"Roc"===currentTab?f="roc":"Eclv"===currentTab?f="eclv":"Rely"===currentTab?f="rely":"Ens_ss"===currentTab?f="ensss":"Perf"===currentTab?
f="perf":"Taylor"===currentTab&&(f="taylor");$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+d+"</db_con><list_val><"+f+"_field>"+c+"</"+f+"_field></list_val></request>",error:function(){},success:function(c){fixVarValResponse[a]=c;var d=$(c).find("val");if(0<d.length){c=[];for(var f=0;f<d.length;f++){var g=$(d[f]);var m=0<=$.inArray(g.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;",
"&"),b);0===f||0!==f&&g.text()!==$(d[f-1]).text()?(g=g.text().formatAll(),m=$("<option />",{value:g,text:g,selected:m}),c.push(m)):0!=f&&g.text()===$(d[f-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}m=$("input[name='multiselect_database']:checked").length-1;for(f=0;f<c.length;f++)c[f].text()!==c[f][0].value&&(d=c[f].text().substring(c[f][0].value.length,c[f].text().length).length,d===m?c[f].text(c[f][0].value+"*"):c[f].text(c[f][0].value)),c[f].appendTo(e);try{e.multiselect("refresh")}catch(q){}}else{m=
$("<option />",{value:"N/A",text:"N/A"});m.appendTo(e);try{e.multiselect("refresh")}catch(q){}}b=[]}})}}
function updateYvalueCountour(a){var b=$("#series_var_val_y1_1");b.empty();var d=getSelectedDatabases();if(d){try{var e=$("#series_var_y1_1").multiselect("getChecked").val()}catch(f){e=$("#series_var_y1_1").find("option:first-child").val()}var c='<stat><fcst_var name="'+$("#fcst_var_y1_1").val()+'" ><val>'+$("#fcst_stat_y1_1").val()+"</val></fcst_var></stat>";$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+
d+"</db_con><list_val><stat_field>"+e+"</stat_field>"+c+"</list_val></request>",error:function(){try{b.multiselect("refresh")}catch(f){}},success:function(c){var d=$(c).find("val");c=[];if(0<d.length){for(var e=0;e<d.length;e++){var f=$(d[e]);var p=0<=$.inArray(f.text(),a);0==e||0!=e&&f.text()!==$(d[e-1]).text()?(f=f.text().formatAll(),p=$("<option />",{value:f,text:f,selected:p}),c.push(p)):0!=e&&f.text()===$(d[e-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}p=$("input[name='multiselect_database']:checked").length-
1;for(e=0;e<c.length;e++)c[e].text()!==c[e][0].value&&(d=c[e].text().substring(c[e][0].value.length,c[e].text().length).length,d===p?c[e].text(c[e][0].value+"*"):c[e].text(c[e][0].value)),c[e].appendTo(b);try{b.multiselect("refresh")}catch(m){}}else{p=$("<option />",{value:"N/A",text:"N/A"});p.appendTo(b);try{b.multiselect("refresh")}catch(m){}}a=[]}})}}
function updateDerivedVarVal(){var a=$("#derived_var_val_1");a.empty();var b=getSelectedDatabases();if(b){var d='<stat><fcst_var name="'+$("#fcst_var_y1_1").val()+'" ><val>'+$("#fcst_stat_y1_1").val()+"</val></fcst_var></stat>";try{var e=$("#derived_var_1").multiselect("getChecked").val()}catch(c){e=$("#derived_var_1 option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+
b+"</db_con><list_val><stat_field>"+e+"</stat_field>"+d+"</list_val></request>",error:function(){try{a.multiselect("refresh")}catch(c){}},success:function(b){var c=$(b).find("val");b=[];if(0<c.length){for(var e=0;e<c.length;e++){var d=$(c[e]);0==e||0!=e&&d.text()!==$(c[e-1]).text()?(d=d.text().formatAll(),d=$("<option />",{value:d,text:d}),b.push(d)):0!=e&&d.text()===$(c[e-1]).text()&&b[b.length-1].text(b[b.length-1].text()+"*")}d=$("input[name='multiselect_database']:checked").length-1;for(e=0;e<
b.length;e++)b[e].text()!==b[e][0].value&&(c=b[e].text().substring(b[e][0].value.length,b[e].text().length).length,c===d?b[e].text(b[e][0].value+"*"):b[e].text(b[e][0].value)),b[e].appendTo(a);try{a.multiselect("refresh")}catch(l){}}else{d=$("<option />",{value:"N/A",text:"N/A"});d.appendTo(a);try{a.multiselect("refresh")}catch(l){}}updateSeries()}})}}
function updateFixedVarVal(a,b,d){d&&"false"===d&&$("#fix_var_event_equal_"+a).prop("checked",!1);var e=$("#fixed_var_val_"+a);e.empty();if(d=getSelectedDatabases()){if("Perf"===currentTab){var c="stat";var f="<stat><fcst_var><val>FAR</val><val>NBR_FAR</val></fcst_var></stat>"}else"Eclv"===currentTab?(c="eclv",f="<stat><fcst_var><val>NA</val></fcst_var></stat>"):"Taylor"===currentTab?(c="taylor",f=convertVarsAndStatsToXml()):"Contour"===currentTab?(c="stat",f='<stat><fcst_var name="'+$("#fcst_var_y1_1").val()+
'" ><val>'+$("#fcst_stat_y1_1").val()+"</val></fcst_var></stat>"):(c=$("#plot_data").multiselect("getChecked").val(),f=convertVarsAndStatsToXml());try{var g=$("#fixed_var_"+a).multiselect("getChecked").val()}catch(k){g=$("#fixed_var_"+a+" option:first-child").val()}$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+d+"</db_con><list_val><"+c+"_field>"+g+"</"+c+"_field>"+f+"</list_val></request>",
error:function(){try{e.multiselect("refresh")}catch(k){}},success:function(c){fixVarValResponse[a]=c;var d=$(c).find("val");c=[];if(0<d.length){for(var f=0;f<d.length;f++){var g=$(d[f]);var q=0<=$.inArray(g.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;","&"),b);0===f||0!==f&&g.text()!==$(d[f-1]).text()?(g=g.text().formatAll(),q=$("<option />",{value:g,text:g,selected:q}),c.push(q)):0!==f&&g.text()===$(d[f-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}q=$("input[name='multiselect_database']:checked").length-
1;for(f=0;f<c.length;f++)c[f].text()!==c[f][0].value&&(d=c[f].text().substring(c[f][0].value.length,c[f].text().length).length,d===q?c[f].text(c[f][0].value+"*"):c[f].text(c[f][0].value)),c[f].appendTo(e);try{e.multiselect("refresh")}catch(t){}}else{q=$("<option />",{value:"N/A",text:"N/A"});q.appendTo(e);try{e.multiselect("refresh")}catch(t){}}b=[]}})}}
function populateIndyVarVal(a){var b=getSelectedDatabases();if(b){if("Perf"===currentTab){var d="stat";var e="<stat><fcst_var><val>FAR</val><val>NBR_FAR</val></fcst_var></stat>"}else"Contour"===currentTab?(d="stat",e='<stat><fcst_var name="'+$("#fcst_var_y1_1").val()+'" ><val>'+$("#fcst_stat_y1_1").val()+"</val></fcst_var></stat>"):(d=$("#plot_data").multiselect("getChecked").val(),e=convertVarsAndStatsToXml());try{var c=$("#indy_var").multiselect("getChecked").val()}catch(f){c=$("#indy_var option:first-child").val()}$.ajax({async:!1,
url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+b+"</db_con><list_val><"+d+"_field>"+c+"</"+d+"_field>"+e+"</list_val></request>",error:function(){},success:function(b){var c=$(b).find("val");if(b!==previousIndVarValResponse){previousIndVarValResponse=b;b=$("#indy_var_val");var e=$('[name="multiselect_indy_var_val"]');if(e&&0<e.length){indy_var_vals_to_attr={};for(var d=0;d<e.length;d++){var f={},
m=$(e[d]).attr("id");f.label=$("#"+m+"_label").val();f.plot_val=$("#"+m+"_plot_val").val();indy_var_vals_to_attr[e[d].value]=f}}$("#indy_var_val").multiselect("option","indy_var_vals_to_attr",indy_var_vals_to_attr);b.empty();f=[];if(0<c.length){for(d=0;d<c.length;d++){var q=$(c[d]);m=0<=$.inArray(q.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;","&"),a);0===d||0!==d&&q.text()!==$(c[d-1]).text()?(q=q.text().formatAll(),m=$("<option />",{value:q,text:q,selected:m,class:"indy-var-option"}),
f.push(m)):0!==d&&q.text()===$(c[d-1]).text()&&f[f.length-1].text(f[f.length-1].text()+"*")}m=$("input[name='multiselect_database']:checked").length-1;for(d=0;d<f.length;d++)f[d].text()!==f[d][0].value&&(c=f[d].text().substring(f[d][0].value.length,f[d].text().length).length,c===m?f[d].text(f[d][0].value+"*"):f[d].text(f[d][0].value)),f[d].appendTo(b);try{b.multiselect("refresh"),e&&0<e.length||$("#indy_var_val").multiselect("option","indy_var_vals_to_attr",null)}catch(t){}}else{m=$("<option />",
{value:"N/A",text:"N/A"});m.appendTo(b);try{b.multiselect("refresh")}catch(t){}}}}})}}function convertVarsAndStatsToXml(){var a="<stat>",b;for(b=0;b<fcst_var_y1_indexes.length;b++){var d=convertVarAndStatsForAxisToXml("y1",fcst_var_y1_indexes[b]);a+=d}for(b=0;b<fcst_var_y2_indexes.length;b++)d=convertVarAndStatsForAxisToXml("y2",fcst_var_y2_indexes[b]),a+=d;return a+"</stat>"}
function convertVarAndStatsForAxisToXml(a,b){try{var d=$("#fcst_var_"+a+"_"+b).multiselect("getChecked").val()}catch(e){d=$("#fcst_var_"+a+"_"+b+" option:first-child").val()}d&&(d=d.replace("&","&amp;").replace(">","&gt;").replace("<","&lt;"));d='<fcst_var name="'+d+'" >';if(a=$("#fcst_stat_"+a+"_"+b).val())for(b=0;b<a.length;b++)d=d+"<val>"+a[b]+"</val>";return d+"</fcst_var>"}
function createStatNameForModeArrt(a,b,d){d=$("#fcst_stat_mode_config_"+b+"_"+d);var e=d.find('[name="mode_stat_diff"]').is(":checked"),c=d.find('[name="mode_stat_fcst"]').is(":checked"),f=d.find('[name="mode_stat_obs"]').is(":checked");b="_";if(-1<listStatModeSingle.indexOf(a)||-1<listStatMtd3dSingle.indexOf(a)||-1<listStatMtd2d.indexOf(a))b=e?b+"D":c&&f?b+"A":c?b+"F":f?b+"O":b+"A";a.startsWith("ACOV")?b=a+b+"SA":(e=d.find('[name="mode_stat_simple"]').is(":checked"),c=d.find('[name="mode_stat_cluster"]').is(":checked"),
b=e&&c?b+"A":e?b+"S":c?b+"C":b+"A",e=d.find('[name="mode_stat_matched"]').is(":checked"),d=d.find('[name="mode_stat_unmatched"]').is(":checked"),b=a+(e&&d?b+"A":e?b+"M":d?b+"U":b+"A"));return b}
function createMapForForecastVar(a,b,d){for(var e={},c,f=0;f<b.length;f++){var g=$("#fcst_var_y"+a+"_"+b[f]).val();e.hasOwnProperty(g)||(e[g]=[]);var k=$("#fcst_stat_y"+a+"_"+b[f]).val();if(null!=k)if(Array.isArray(k))for(var l=0;l<k.length;l++)c="mode"===d&&-1===listStatModeRatio.indexOf(k[l])||"mtd"===d&&-1===listStatMtdRatio.indexOf(k[l])?createStatNameForModeArrt(k[l],"y"+a,b[f]):k[l],e[g].push(c);else e[g].push(k);else if("mode"===d||"mtd"===d)k=$("#fcst_stat_mode_y"+a+"_"+b[f]).val(),null!=
k&&(c=createStatNameForModeArrt(k,"y"+a,b[f]),e[g].push(c))}return e}
function createSeriesMapForPermutation(a,b){for(var d={},e,c,f,g=a.length-1;0<=g;g--){var k=[];c=$("#series_var_"+b+"_"+a[g]).multiselect("getChecked")[0].value;f=$("#group_series_var_"+b+"_"+a[g]).is(":checked");try{e=$("#series_var_val_"+b+"_"+a[g]).multiselect("getChecked")}catch(p){e=[]}for(var l=0;l<e.length;l++)k.push(e[l].value);f&&(f="Group_"+b+"_"+a[g],group_name_to_value_map[f]=k,k=[f]);f=d[c];void 0!==f&&(k=k.concat(f));d[c]=k}return d}
function createSeriesMapForPermutationEns(a,b){for(var d={},e,c,f=a.length-1;0<=f;f--){var g=[];try{c=$("#series_var_"+b+"_"+a[f]).multiselect("getChecked")[0].value}catch(l){c=$("#series_var_"+b+"_"+a[f]).val()}try{e=$("#series_var_val_"+b+"_"+a[f]).multiselect("getChecked")}catch(l){e=[]}for(var k=0;k<e.length;k++)g.push(e[k].value);k=d[c];void 0!=k&&(g=k.concat(g));d[c]=g}return d}
function updateSeriesHist(){var a=$("#listdt");a.saveCell(lastSelRow,lastSelCol);var b=a.jqGrid("getRowData");a.jqGrid("clearGridData");var d=0,e={},c=$("#seriesLock").is(":checked"),f=[],g=[],k=[],l=[],p=[],m=[],q=[],t=[],u=[],x=[],v=[],z=[],A;if("Hist"===currentTab){var n=$("input:radio[name='hist_line_type']:checked").val();"rhist"===n?A="Rank Histogram":"phist"===n?A="Probability Histogram":"relp"===n&&(A="Relative Histogram")}else"Roc"===currentTab?A="ROC Curve":"Rely"===currentTab?A="Reliability Curve":
"Taylor"===currentTab?A=$("#fcst_var_y1_1").val():"Eclv"===currentTab&&(A="Economic value");if(null!=initXML){g=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");k=initXML.find("plot").find("plot_disp").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");l=initXML.find("plot").find("show_signif").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(var h=0;h<k.length;h++)"TRUE"===k[h].trim()?k[h]="No":k[h]="Yes",
"TRUE"===l[h].trim()?l[h]="No":l[h]="Yes";p=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(h=0;h<p.length;h++)p[h]=p[h].replace(/FF$/,"");m=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");q=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");t=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");
u=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");z=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");v=initXML.find("plot").find("legend").text().replace("c(","").replace(/\)$/,"").replace(/"/g,"").split(",");if(v.length!=x.length)for(n=0;n<x.length;n++)v[n]=""}n=permuteSeries(createSeriesMapForPermutationEns(series_var_y1_indexes,
"y1"),0);0===n.length&&(n[0]="");if("Roc"===currentTab||"Rely"===currentTab||"Eclv"===currentTab){try{var r=$("#summary_curve").multiselect("getChecked")}catch(w){r=[]}for(h=0;h<r.length;h++)"none"!=r[h].value&&n.push(r[h].value)}for(var y=0;y<n.length;y++){r=n[y]+" "+A;var B=!1;for(h=0;h<b.length;h++)if(b[h].title==r){e={};e.title=r;e.y_axis="Y1";e.order=d+1;e.hide=b[h].hide;e.plot_ci=b[h].plot_ci;e.show_signif=b[h].show_signif;e.color=b[h].color;e.pch=b[h].pch;e.type=b[h].type;e.lty=b[h].lty;e.lwd=
b[h].lwd;e.con_series=b[h].con_series;e.legend=b[h].legend;e.id=d+1;B=!0;break}B||(c&&0<d&&null==initXML?(e=jQuery.extend(!0,{},f[f.length-1]),e.title=r,e.y_axis="Y1",e.id=d+1,e.order=d+1):null!=initXML?(e={},e.title=r,e.y_axis="Y1",e.order=x[d]&&""!=x[d]?parseInt(x[d]):parseInt(h+1),e.hide=k[d],e.plot_ci=g[d].trim(),e.show_signif=l[d],e.pch=m[d].trim(),e.type=z[d].trim(),e.lty=q[d].trim(),e.lwd=t[d].trim(),e.con_series=u[d].trim(),e.legend=v[d].trim(),e.color=p[d].trim(),e.id=d+1):(e=jQuery.extend(!0,
{},firstSeriesFormatting),e.title=r,e.y_axis="Y1",e.id=d+1,e.order=d+1));d++;f.push(e)}for(h=0;h<lines.length;h++)e=jQuery.extend(!0,{},firstSeriesFormatting),e.title=lines[h].type+"("+lines[h].line_pos+")",e.y_axis="Y1",e.order="",e.id=d+1,lines[h].hasOwnProperty("color")&&(e.color=lines[h].color),lines[h].hasOwnProperty("lty")&&(e.lty=lines[h].lty),lines[h].hasOwnProperty("lwd")&&(e.lwd=lines[h].lwd),d++,f.push(e);if(null==initXML)for(p=rainbow(f.length),h=0;h<f.length;h++)f[h].color=p[h];f.sort(SortByOrder);
for(h=0;h<f.length;h++)a.jqGrid("addRowData",h+1,f[h]);outerLayout.sizePane("south",$("#gbox_listdt").height())}
function updateSeriesVarValHist(a,b){$("#listdt").jqGrid("clearGridData");var d=$("#series_var_val_y1_"+a);d.empty();var e=getSelectedDatabases();if(e){try{var c=$("#series_var_y1_"+a).multiselect("getChecked").val()}catch(g){c=$("#series_var_y1_"+a+" option:first-child").val()}var f;"Roc"===currentTab?f="roc":"Rely"===currentTab?f="rely":"Ens_ss"===currentTab?f="ensss":"Perf"===currentTab?f="perf":"Taylor"===currentTab?f="taylor":"Hist"===currentTab?f=$("input:radio[name='hist_line_type']:checked").val():
"Eclv"===currentTab&&(f="eclv");$.ajax({async:!1,url:"servlet",type:"POST",processData:!1,contentType:"application/xml",dataType:"xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><db_con>'+e+"</db_con><list_val><"+f+"_field>"+c+"</"+f+'_field><stat><fcst_var name="NA"><val>NA</val></fcst_var></stat></list_val></request>',error:function(){},success:function(c){seriesY1VarValResponse[a]=c;var e=$(c).find("val");c=[];if(0<e.length){b&&0<b.length&&$("#series_var_table_y"+a).css("display","");
for(var f=0;f<e.length;f++){var g=$(e[f]);var m="string"===$.type(b)?g.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;","&")===b:0<=$.inArray(g.text().replace("&gt;",">").replace("&lt;","<").replace("&amp;","&"),b);0===f||0!==f&&g.text()!==$(e[f-1]).text()?(m=$("<option />",{value:g.text(),text:g.text(),selected:m}),c.push(m)):0!==f&&g.text()===$(e[f-1]).text()&&c[c.length-1].text(c[c.length-1].text()+"*")}m=$("input[name='multiselect_database']:checked").length-1;for(f=0;f<c.length;f++)c[f].text()!==
c[f][0].value&&(e=c[f].text().substring(c[f][0].value.length,c[f].text().length).length,e===m?c[f].text(c[f][0].value+"*"):c[f].text(c[f][0].value)),c[f].appendTo(d);try{d.multiselect("refresh")}catch(q){}}else{m=$("<option />",{value:"N/A",text:"N/A"});m.appendTo(d);try{d.multiselect("refresh")}catch(q){}}b=[]}})}}
function updateSeriesRely(){var a=$("#rely_event_hist").prop("checked"),b=$("#listdt");b.jqGrid("clearGridData");var d=jQuery.extend(!0,{},firstSeriesFormatting);d.title="Reliability Curve";d.y_axis="Y1";d.order=1;d.color="#333333";d.id=1;b.jqGrid("addRowData",1,d);"true"==a&&(d=jQuery.extend(!0,{},firstSeriesFormatting),d.title="Event Histogram",d.y_axis="Y1",d.order=2,d.color="#AAAAAA",d.id=2,d.type="h",d.lwd=50,b.jqGrid("addRowData",2,d))}
function updateSeriesEns(){var a=$("#listdt");a.saveCell(lastSelRow,lastSelCol);var b=a.jqGrid("getRowData");a.jqGrid("clearGridData");var d,e=0,c={},f=$("#seriesLock").is(":checked"),g=[],k=[],l=[],p=[],m=[],q=[],t=[],u=[],x=[],v=[],z=[],A=[];if(null!=initXML){k=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");l=initXML.find("plot").find("plot_disp").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");p=initXML.find("plot").find("show_signif").text().replace("c(",
"").replace(")","").replace(/"/g,"").split(",");for(var n=0;n<l.length;n++)"TRUE"==l[n].trim()?l[n]="No":l[n]="Yes","TRUE"==p[n].trim()?p[n]="No":p[n]="Yes";m=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(n=0;n<m.length;n++)m[n]=m[n].replace(/FF$/,"");q=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");t=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,
"").split(",");u=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");v=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");A=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");z=initXML.find("plot").find("legend").text().replace("c(",
"").replace(/\)$/,"").replace(/"/g,"").split(",");if(z.length!=v.length)for(d=0;d<v.length;d++)z[d]=""}d=permuteSeries(createSeriesMapForPermutationEns(series_var_y1_indexes,"y1"),0);if("true"===$("input:radio[name='ensss_pts_disp']:checked").val()){var h=[];var r=0;for(n=0;n<d.length;n++)h[r]=d[n]+" MSE",h[r+1]=d[n]+" #PTS",r+=2;d=h}else for(n=0;n<d.length;n++)d[n]+=" MSE";for(r=0;r<d.length;r++){var y=d[r],B=!1;h=0<y.indexOf("#PTS")?"Y2":"Y1";for(n=0;n<b.length;n++)if(b[n].title==y){c={};c.title=
y;c.y_axis=h;c.order=e+1;c.hide=b[n].hide;c.plot_ci=b[n].plot_ci;c.show_signif=b[n].show_signif;c.color=b[n].color;c.pch=b[n].pch;c.type=b[n].type;c.lty=b[n].lty;c.lwd=b[n].lwd;c.con_series=b[n].con_series;c.legend=b[n].legend;c.id=e+1;B=!0;break}B||(f&&0<e&&null==initXML?(c=jQuery.extend(!0,{},g[g.length-1]),c.title=y,c.y_axis=h,c.id=e+1,c.order=e+1):null!=initXML?(c={},c.title=y,c.y_axis=h,c.order=v[e]&&""!=v[e]?parseInt(v[e]):parseInt(n+1),c.hide=l[e],c.plot_ci=k[e].trim(),c.show_signif=p[e],c.pch=
q[e].trim(),c.type=A[e].trim(),c.lty=t[e].trim(),c.lwd=u[e].trim(),c.con_series=x[e].trim(),c.legend=z[e].trim(),c.color=m[e].trim(),c.id=e+1):(c=jQuery.extend(!0,{},firstSeriesFormatting),c.title=y,c.y_axis=h,c.id=e+1,c.order=e+1));e++;g.push(c)}for(n=0;n<lines.length;n++)c=jQuery.extend(!0,{},firstSeriesFormatting),c.title=lines[n].type+"("+lines[n].line_pos+")",c.y_axis="Y1",c.order="",c.id=e+1,lines[n].hasOwnProperty("color")&&(c.color=lines[n].color),lines[n].hasOwnProperty("lty")&&(c.lty=lines[n].lty),
lines[n].hasOwnProperty("lwd")&&(c.lwd=lines[n].lwd),e++,g.push(c);if(null==initXML)for(m=rainbow(g.length),n=0;n<g.length;n++)g[n].color=m[n];g.sort(SortByOrder);for(n=0;n<g.length;n++)a.jqGrid("addRowData",n+1,g[n]);outerLayout.sizePane("south",$("#gbox_listdt").height())}
function updateSeriesPerf(){var a=$("#listdt");a.saveCell(lastSelRow,lastSelCol);var b=a.jqGrid("getRowData");a.jqGrid("clearGridData");var d,e=0,c={},f=$("#seriesLock").is(":checked"),g=[],k=[],l=[],p=[],m=[],q=[],t=[],u=[],x=[],v=[],z=[],A=[];if(null!=initXML){k=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");l=initXML.find("plot").find("plot_disp").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");p=initXML.find("plot").find("show_signif").text().replace("c(",
"").replace(")","").replace(/"/g,"").split(",");for(var n=0;n<l.length;n++)"TRUE"==l[n].trim()?l[n]="No":l[n]="Yes","TRUE"==p[n].trim()?p[n]="No":p[n]="Yes";m=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(n=0;n<m.length;n++)m[n]=m[n].replace(/FF$/,"");q=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");t=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,
"").split(",");u=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");v=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");A=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");z=initXML.find("plot").find("legend").text().replace("c(",
"").replace(/\)$/,"").replace(/"/g,"").split(",");if(z.length!=v.length)for(d=0;d<v.length;d++)z[d]=""}d=permuteSeries(createSeriesMapForPermutationEns(series_var_y1_indexes,"y1"),0);for(var h=0;h<d.length;h++){var r=d[h],y=!1;for(n=0;n<b.length;n++)if(b[n].title==r){c={};c.title=r;c.y_axis="";c.order=e+1;c.hide=b[n].hide;c.plot_ci=b[n].plot_ci;c.show_signif=b[n].show_signif;c.color=b[n].color;c.pch=b[n].pch;c.type=b[n].type;c.lty=b[n].lty;c.lwd=b[n].lwd;c.con_series=b[n].con_series;c.legend=b[n].legend;
c.id=e+1;y=!0;break}y||(f&&0<e&&null==initXML?(c=jQuery.extend(!0,{},g[g.length-1]),c.title=r,c.y_axis=void 0,c.id=e+1,c.order=e+1):null!=initXML?(c={},c.title=r,c.y_axis=void 0,c.order=v[e]&&""!=v[e]?parseInt(v[e]):parseInt(n+1),c.hide=l[e],c.plot_ci=k[e].trim(),c.show_signif=p[e],c.pch=q[e].trim(),c.type=A[e].trim(),c.lty=t[e].trim(),c.lwd=u[e].trim(),c.con_series=x[e].trim(),c.legend=z[e].trim(),c.color=m[e].trim(),c.id=e+1):(c=jQuery.extend(!0,{},firstSeriesFormatting),c.title=r,c.y_axis=void 0,
c.id=e+1,c.order=e+1));e++;g.push(c)}if(null==initXML)for(m=rainbow(g.length),n=0;n<g.length;n++)g[n].color=m[n];g.sort(SortByOrder);for(n=0;n<g.length;n++)a.jqGrid("addRowData",n+1,g[n]);outerLayout.sizePane("south",$("#gbox_listdt").height())}
function updateSeries(a){var b=$("#listdt");b.saveCell(lastSelRow,lastSelCol);var d=b.jqGrid("getRowData");b.jqGrid("clearGridData");group_name_to_value_map={};var e=0,c={},f=$("#seriesLock").is(":checked"),g=[],k=$("#plot_data").multiselect("getChecked").val(),l=[],p=[],m=[],q=[],t=[],u=[],x=[],v=[],z=[],A=[],n=[];if(null!=initXML){l=initXML.find("plot").find("plot_ci").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");p=initXML.find("plot").find("plot_disp").text().replace("c(",
"").replace(")","").replace(/"/g,"").split(",");m=initXML.find("plot").find("show_signif").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(var h=0;h<p.length;h++)"TRUE"==p[h].trim()?p[h]="No":p[h]="Yes","TRUE"==m[h].trim()?m[h]="Yes":m[h]="No";q=initXML.find("plot").find("colors").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");for(h=0;h<q.length;h++)q[h]=q[h].replace(/FF$/,"");t=initXML.find("plot").find("pch").text().replace("c(","").replace(")","").replace(/"/g,
"").split(",");u=initXML.find("plot").find("lty").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");x=initXML.find("plot").find("lwd").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");v=initXML.find("plot").find("con_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");if((z=initXML.find("plot").find("order_series").text())&&0<z.length)z=initXML.find("plot").find("order_series").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");
else for(z=[],h=0;h<q.length;h++)z.push(h+1);n=initXML.find("plot").find("type").text().replace("c(","").replace(")","").replace(/"/g,"").split(",");A=initXML.find("plot").find("legend").text().replace("c(","").replace(/\)$/,"").replace(/"/g,"").split(",");if(A.length!=z.length)for(h=0;h<z.length;h++)A[h]=""}for(var r=1;2>=r;r++){var y="y"+r;if(1==r){var B=fcst_var_y1_indexes;var w=permuteSeries(createSeriesMapForPermutation(series_var_y1_indexes,y),0)}else B=fcst_var_y2_indexes,w=permuteSeries(createSeriesMapForPermutation(series_var_y2_indexes,
y),0);for(var G=0;G<B.length;G++){var L=$("#fcst_var_"+y+"_"+B[G]).val(),J=[];var D=$("#fcst_stat_"+y+"_"+B[G]).multiselect("getChecked");var E=[];if("Contour"==currentTab){for(h=0;h<fixed_var_indexes.length;h++){var F=$("#fixed_var_val_"+fixed_var_indexes[h]).val();if(F)for(w=0;w<F.length;w++)E.push({value:F[w]})}w=[""]}E&&0!=E.length||(E=[{value:""}]);0!=D.length||"mode"!=k&&"mtd"!=k||(D=$("#fcst_stat_mode_"+y+"_"+B[G]).multiselect("getChecked"));for(h=0;h<D.length;h++)J.push(D[h].value);for(D=
0;D<J.length;D++)for(F=0;F<w.length;F++){h=J[D];if("mode"==k&&-1==listStatModeRatio.indexOf(h)||"mtd"==k&&-1==listStatMtdRatio.indexOf(h))h=createStatNameForModeArrt(h,y,B[G]);for(var M=w[F]+" "+L+" "+h,I=0;I<E.length;I++){var C=M;-1<C.indexOf("<")&&(C=C.replace(/</g,"&lt;"));0<E[I].value.length&&(C=C+" "+E[I].value);var K=!1;for(h=0;h<d.length;h++)if(d[h].title==C&&d[h].y_axis.match(r+"$")==r){c={};c.title=C;c.y_axis="Y"+r;c.order=e+1;c.hide=d[h].hide;c.plot_ci=d[h].plot_ci;c.show_signif=d[h].show_signif;
c.color=d[h].color;c.pch=d[h].pch;c.type=d[h].type;c.lty=d[h].lty;c.lwd=d[h].lwd;c.con_series=d[h].con_series;c.legend=d[h].legend;c.id=e+1;K=!0;break}K||(f&&0<e&&null==initXML?(c=jQuery.extend(!0,{},g[g.length-1]),c.title=C,c.y_axis="Y"+r,c.id=e+1,c.order=e+1):null!=initXML?(c={},c.title=C,c.y_axis="Y"+r,c.order=parseInt(z[e]),c.hide=p[e],c.plot_ci=l[e].trim(),c.show_signif=m[e],c.pch=t[e].trim(),c.type=n[e].trim(),c.lty=u[e].trim(),c.lwd=x[e].trim(),c.con_series=v[e].trim(),c.legend=A[e].trim(),
c.color=q[e].trim(),c.id=e+1):(c=f&&0<d.length?jQuery.extend(!0,{},d[d.length-1]):jQuery.extend(!0,{},firstSeriesFormatting),c.title=C,c.y_axis="Y"+r,c.id=e+1,c.order=e+1));"Contour"!==currentTab&&e++;g.push(c)}}}}d=[];for(h=0;h<seriesDiffY1.length;h++){c=seriesDiffY1[h].split(",")[0];k=seriesDiffY1[h].split(",")[1];r=seriesDiffY1[h].split(",")[2];B=y=!1;var H='"and"';"DIFF"===r?H='"-"':"RATIO"===r&&(H='"/"');for(w=0;w<g.length;w++)c==g[w].title&&(y=!0),k==g[w].title&&(B=!0);y&&B&&(d.push(seriesDiffY1[h]),
k=r+' ("'+c+H+k+'")',f&&null==initXML?(c=jQuery.extend(!0,{},g[g.length-1]),c.title=k,c.y_axis="Y1",c.id=e+1,c.order=e+1):null!=initXML?(c={},c.title=k,c.y_axis="Y1",c.order=parseInt(z[e]),c.hide=p[e],c.plot_ci=l[e].trim(),c.show_signif=m[e].trim(),c.pch=t[e].trim(),c.type=n[e].trim(),c.lty=u[e].trim(),c.lwd=x[e].trim(),c.con_series=v[e].trim(),c.legend=A[e].trim(),c.color=q[e].trim(),c.id=e+1):(c=jQuery.extend(!0,{},firstSeriesFormatting),c.title=k,c.y_axis="Y1",c.id=e+1,c.order=e+1),e++,g.push(c))}seriesDiffY1=
d;d=[];for(h=0;h<seriesDiffY2.length;h++){c=seriesDiffY2[h].split(",")[0];k=seriesDiffY2[h].split(",")[1];r=seriesDiffY1[h].split(",")[2];B=y=!1;"DIFF"===r?H='"-"':"RATIO"===r&&(H='"/"');for(w=0;w<g.length;w++)c==g[w].title&&(y=!0),k==g[w].title&&(B=!0);y&&B&&(d.push(seriesDiffY2[h]),k=r+' ("'+c+H+k+'")',f&&null==initXML?(c=jQuery.extend(!0,{},g[g.length-1]),c.title=k,c.y_axis="Y2",c.id=e+1,c.order=e+1):null!=initXML?(c={},c.title=k,c.y_axis="Y2",c.order=parseInt(z[e]),c.hide=p[e],c.plot_ci=l[e].trim(),
c.show_signif=m[e],c.pch=t[e].trim(),c.type=n[e].trim(),c.lty=u[e].trim(),c.lwd=x[e].trim(),c.con_series=v[e].trim(),c.legend=A[e].trim(),c.color=q[e].trim(),c.id=e+1):(c=jQuery.extend(!0,{},firstSeriesFormatting),c.title=k,c.y_axis="Y2",c.id=e+1,c.order=e+1),e++,g.push(c))}seriesDiffY2=d;for(h=0;h<lines.length;h++)c=jQuery.extend(!0,{},firstSeriesFormatting),c.title=lines[h].type+"("+lines[h].line_pos+")",c.y_axis="Y1",c.order="",c.id=e+1,lines[h].hasOwnProperty("color")&&(c.color=lines[h].color),
lines[h].hasOwnProperty("lty")&&(c.lty=lines[h].lty),lines[h].hasOwnProperty("lwd")&&(c.lwd=lines[h].lwd),e++,g.push(c);if(null==initXML){if("Contour"===currentTab)for(h=0;h<g.length;h++)q.push("#000000");else q=rainbow(g.length);e=[];if(a)e=q;else{for(h=0;h<q.length;h++)for(w=0;w<g.length;w++)g[w].color&&0<g[w].color.length&&g[w].color.substr(g[w].color.length-6).toUpperCase()===q[h].substr(q[h].length-6).toUpperCase()&&h!=w&&(e[w]=q[h],e[h]=q[w]);for(h=0;h<q.length;h++)e[h]||(e[h]=q[h])}for(h=0;h<
g.length;h++)g[h].color&&0!=g[h].color.length||(g[h].color=e[h])}"Contour"===currentTab?g.reverse():g.sort(SortByOrder);for(h=0;h<g.length;h++)b.jqGrid("addRowData",h+1,g[h]),"Contour"===currentTab&&0!==h&&$("#"+(h+1),"#gbox_listdt").css({display:"none"});outerLayout.sizePane("south",$("#gbox_listdt").height())}function SortByOrder(a,b){return a.order-b.order}
function rainbow(a){if(1>a)return[];if(1==a)return["#FF0000"];for(var b=[],d=1/(a-1),e=0,c=0;c<a;c++,e+=d)b.push("#"+interpolateColor(e));return b}
function interpolateColor(a){if(0>a)return"FF0000";if(1<a)return"FF00FF";switch(Math.floor(a/.2)){case 0:return hex(1)+hex(a/.2)+hex(0);case 1:return hex(1-(a-.2)/.2)+hex(1)+hex(0);case 2:return a-=.4,hex(0)+hex(1)+hex(a/.2);case 3:return a-=.6,hex(0)+hex(1-a/.2)+hex(1);case 4:return hex((a-.8)/.2*.5)+hex(0)+hex(1);default:return hex(.5)+hex(0)+hex(1)}}function hex(a){for(a=Math.round(255*a).toString(16).toUpperCase();2>a.length;)a="0"+a;return a}
function permuteSeries(a,b){var d=Object.keys(a);if(1>d.length)return[];var e=a[d[b]];if(d.length==b+1)return e;a=permuteSeries(a,b+1);if(1>e.length)return a;b=[];for(d=0;d<a.length;d++)for(var c=0;c<e.length;c++)b.push(e[c]+" "+a[d]);return b}
function createNewDerivedSeriesName(a){var b=$("#series1Y"+a).val();a=$("#series2Y"+a).val();var d=jQuery("input[name=derive_oper]:checked").val(),e='"and"';"DIFF"===d?e='"-"':"RATIO"===d&&(e='"/"');b&&a?$("#newDiffSeriesName").text(d+' ( "'+b+e+a+'" )'):$("#newDiffSeriesName").text("N/A")}
function changeYAxis(a){2==a?($("#series1Y2").removeAttr("disabled"),$("#series2Y2").removeAttr("disabled"),$("#series1Y1").attr("disabled","disabled"),$("#series2Y1").attr("disabled","disabled"),createNewDerivedSeriesName(2)):($("#series1Y2").attr("disabled","disabled"),$("#series2Y2").attr("disabled","disabled"),$("#series1Y1").removeAttr("disabled"),$("#series2Y1").removeAttr("disabled"),createNewDerivedSeriesName(1))}
function sendXml(){var a=getSelectedDatabases();if(a){var b=$("<request />");b.append($("<db_con />").text(a));a=$("<plot />");if("Series"===currentTab||"Contour"===currentTab){if("Series"===currentTab){var d=$("input:radio[name ='statistics']:checked").val();d="revision_statistics"===d?$("<template>revision_series_plot.R_tmpl</template>"):$("<template>series_plot.R_tmpl</template>")}else d=$("<template>contour_plot.R_tmpl</template>");a.append(d);a=createXMLSeries(a);a=createXMLCommon(a);"Contour"===
currentTab&&(a.append($("<contour_intervals />").text($("#contour_intervals").val())),a.append($("<color_palette />").text($("#color_palette").val())),a.append($("<add_color_bar />").text($("#add_color_bar").is(":checked"))),a.append($("<reverse_y />").text($("#reverse_y").is(":checked"))),a.append($("<reverse_x />").text($("#reverse_x").is(":checked"))),a.append($("<add_contour_overlay />").text($("#add_contour_overlay").is(":checked"))))}else if("Box"===currentTab)d=$("input:radio[name ='statistics']:checked").val(),
d="revision_statistics"===d?$("<template>revision_box_plot.R_tmpl</template>"):$("<template>box_plot.R_tmpl</template>"),a.append(d),a=createXMLBox(a);else if("Bar"===currentTab)d=$("<template>bar_plot.R_tmpl</template>"),a.append(d),a=createXMLBox(a);else if("Hist"===currentTab){var e=$("input:radio[name='hist_line_type']:checked").val();"rhist"===e?d=$("<template>rhist.R_tmpl</template>"):"phist"===e?d=$("<template>phist.R_tmpl</template>"):"relp"===e&&(d=$("<template>relp.R_tmpl</template>"));
a.append(d);a=createXMLHist(a)}else"Roc"===currentTab?(d=$("<template>roc.R_tmpl</template>"),a.append(d),a=createXMLRoc(a)):"Rely"===currentTab?(d=$("<template>rely.R_tmpl</template>"),a.append(d),a=createXMLRely(a)):"Ens_ss"===currentTab?(d=$("<template>ens_ss.R_tmpl</template>"),a.append(d),a=createXMLEns(a)):"Perf"===currentTab?(d=$("<template>performance.R_tmpl</template>"),a.append(d),a=createXMLPerf(a),a=createXMLCommon(a)):"Taylor"===currentTab?(d=$("<template>taylor_plot.R_tmpl</template>"),
a.append(d),a=createXMLTaylor(a),a=createXMLCommon(a)):"Eclv"===currentTab&&(d=$("<template>eclv.R_tmpl</template>"),a.append(d),a=createXMLEclv(a));b.append(a);b=$("<root />").append(b).html().replace(/label="</g,'label="&lt;').replace(/label=">/g,'label="&gt;');$.ajax({url:"servlet",processData:!1,contentType:"application/xml",type:"POST",data:b,dataType:"xml",success:function(a){try{var b=$(a),c=b.find("plot");if(0===b.find("error").length){updateResult(c.text());var e=b.find("r_error");e&&0<e.length&&
(updateResult(c.text()),$("#r_error_message_text").empty().text(e.text()),$("#r_error_message").dialog("open"))}else updateResult(c.text()),$("#error_message_text").empty().text(b.find("error").text()),$("#error_message").dialog("open")}catch(l){$("#error_message_text").empty().text(a),$("#error_message").dialog("open")}},error:function(a){alert("error creating a plot or Proxy timeout: "+a)}})}}
function createXMLEns(a){a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<ensss_pts />").text($("#ensss_pts").val()));a.append($("<ensss_pts_disp />").text($("input:radio[name='ensss_pts_disp']:checked").val()));return a=createXMLCommon(a)}
function createXMLRoc(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(c){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);var b=$("<roc_calc />");"pct"==$("input:radio[name='roc_type']:checked").val()?(b.append($("<roc_pct />").text("true")),b.append($("<roc_ctc />").text("false"))):(b.append($("<roc_pct />").text("false")),b.append($("<roc_ctc />").text("true")));a.append(b);b=$("<summary_curve />");try{var d=
$("#summary_curve").multiselect("getChecked")}catch(c){d=[]}for(var e=0;e<d.length;e++)"none"!=d[e].value&&b.append($("<val />").text(d[e].value));d=$("<add_point_thresholds />");d.text($("#add_point_thresholds").prop("checked"));e=$("<reverse_connection_order />");e.text($("#reverse_connection_order").prop("checked"));a.append(b);a.append(d);a.append(e);return a=createXMLCommon(a)}
function createXMLEclv(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(c){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);var b=$("input:radio[name ='statistics']:checked").val(),d=$("#calc_stat").val(),e=$("#agg_stat").val();"aggregation_statistics"===b&&"none"!==e?(d=$("<agg_stat />"),d.append($("<agg_"+e+" />").text("true")),d.append($("<boot_repl />").text($("#boot_repl").val())),d.append($("<boot_random_seed />").text($("#boot_random_seed").val())),
d.append($("<boot_ci />").text($("#boot_ci").val())),d.append($("<eveq_dis />").text($("#eveq_dis").is(":checked"))),d.append($("<cl_step />").text($("#cl_step").val())),a.append(d)):"calculations_statistics"===b&&"none"!==d&&(e=$("<calc_stat />"),e.append($("<calc_"+d+" />").text("true")),a.append(e));a.append($("<plot_stat />").text($("#plot_stat").val()));return a=createXMLCommon(a)}
function createXMLHist(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(b){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<normalized_histogram />").text($("input:radio[name='normalized_histogram']:checked").val()));return a=createXMLCommon(a)}
function createXMLRely(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(c){console.log("Can't save row "+lastSelRow)}a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);var b=$("<rely_event_hist />");b.text($("#rely_event_hist").prop("checked"));a.append(b);b=$("<summary_curve />");try{var d=$("#summary_curve").multiselect("getChecked")}catch(c){d=[]}for(var e=0;e<d.length;e++)"none"!=d[e].value&&b.append($("<val />").text(d[e].value));a.append(b);d=$("<add_skill_line />");
d.text($("#add_skill_line").prop("checked"));a.append(d);d=$("<add_noskill_line />");d.text($("#add_noskill_line").prop("checked"));a.append(d);d=$("<add_reference_line />");d.text($("#add_reference_line").prop("checked"));a.append(d);d=$("<inset_hist />");d.text($("#inset_hist").prop("checked"));a.append(d);d=$("<agg_stat />");d.append($("<agg_pct />").text("true"));d.append($("<boot_repl />").text($("#boot_repl").val()));d.append($("<boot_random_seed />").text($("#boot_random_seed").val()));d.append($("<boot_ci />").text($("#boot_ci").val()));
d.append($("<eveq_dis />").text($("#eveq_dis").is(":checked")));d.append($("<cl_step />").text($("#cl_step").val()));a.append(d);return a=createXMLCommon(a)}
function createXMLBox(a){a=createXMLSeries(a);a=createXMLCommon(a);a.append($("<box_pts />").text($("#box_pts").is(":checked")));a.append($("<box_outline />").text($("#box_outline").is(":checked")));a.append($("<box_notch />").text($("#box_notch").is(":checked")));a.append($("<box_avg />").text($("#box_avg").is(":checked")));a.append($("<box_boxwex />").text($("#box_boxwex").val()));return a}
function createXMLPlotFix(a){var b=$("<plot_fix />");if("none"!==$("#fixed_var_table").css("display"))for(var d=0;d<fixed_var_indexes.length;d++){var e=$("<field />").attr("name",$("#fixed_var_"+fixed_var_indexes[d]).val()).attr("equalize",$("#fix_var_event_equal_"+fixed_var_indexes[d]).is(":checked")),c=$("<set />").attr("name",$("#fixed_var_"+fixed_var_indexes[d]).val()+"_"+d),f=$("#fixed_var_val_"+fixed_var_indexes[d]).val();if(f){for(var g=0;g<f.length;g++)c.append($("<val />").text(f[g]));e.append(c);
b.append(e)}}a.append(b);return a}
function createXMLPerf(a){a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<plot_cond />").text($("#txtPlotCond").val()));a.append($("<annotation_template />").text($("#annotation").val()));var b=$("<indep />").attr("name",$("#indy_var").val()),d=$('[name="multiselect_indy_var_val"]');if(0<$("#indy_var_val").multiselect("getChecked").length)for(var e=0;e<d.length;e++){var c=$(d[e]);if(c.prop("checked")){var f=c.attr("id");b.append($("<val />").attr("label",
$("#"+f+"_label").val()).attr("plot_val",$("#"+f+"_plot_val").val()).text(c.val()))}}else{var g=moment.tz($("#date_period_start").val(),"YYYY-MM-DD HH:mm:ss","UTC");d=moment.tz($("#date_period_end").val(),"YYYY-MM-DD HH:mm:ss","UTC");f=$("#date_period_by").val().trim();e=$("#date_period_by_unit").val();c=$(previousIndVarValResponse).find("val");if(0===f.length)for(e=0;e<c.length;e++)f=moment.tz($(c[e]).text(),"YYYY-MM-DD HH:mm:ss","UTC"),(f.isSame(g)||f.isSame(d)||f.isBetween(g,d))&&b.append($("<val />").attr("label",
$(c[e]).text()).attr("plot_val","").text($(c[e]).text()));else for(f=parseInt(f),"days"===e&&(f*=24),g=g.clone();g<=d;){var k=g.format("YYYY-MM-DD HH:mm:ss"),l=!1;for(e=0;e<c.length;e++)if($(c[e]).text()==k){l=!0;break}l&&b.append($("<val />").attr("label",k).attr("plot_val","").text(k));g.add(f,"hour")}}a.append(b);d=$("input:radio[name ='statistics']:checked").val();b=$("#calc_stat").val();e=$("#agg_stat").val();"aggregation_statistics"===d&&"none"!==e?(b=$("<agg_stat />"),b.append($("<agg_"+e+
" />").text("true")),b.append($("<boot_repl />").text($("#boot_repl").val())),b.append($("<boot_random_seed />").text($("#boot_random_seed").val())),b.append($("<boot_ci />").text($("#boot_ci").val())),b.append($("<eveq_dis />").text($("#eveq_dis").is(":checked"))),b.append($("<cache_agg_stat />").text($("#cacheAggStat").is(":checked"))),a.append(b)):"calculations_statistics"===d&&"none"!==b&&(e=$("<calc_stat />"),e.append($("<calc_"+b+" />").text("true")),a.append(e));a.append($("<plot_stat />").text($("#plot_stat").val()));
return a}
function createXMLTaylor(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(d){console.log("Can't save row "+lastSelRow)}var b=$("<dep />");b.append(createDepElementForAxis(1,fcst_var_y1_indexes,selected_mode));a.append(b);a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a=createXMLPlotFix(a);a.append($("<plot_cond />").text($("#txtPlotCond").val()));a.append($("<taylor_voc />").text($("input:radio[name='taylor_voc']:checked").val()));a.append($("<taylor_show_gamma />").text($("input:radio[name='show_gamma']:checked").val()));return a}
function createXMLSeries(a){try{$("#listdt").saveCell(lastSelRow,lastSelCol)}catch(p){console.log("Can't save row "+lastSelRow)}var b=$("#plot_data").multiselect("getChecked").val(),d=$("<dep />");d.append(createDepElementForAxis(1,fcst_var_y1_indexes,b));d.append(createDepElementForAxis(2,fcst_var_y2_indexes,b));a.append(d);a.append(createSeriesElementForAxis(1,series_var_y1_indexes));a.append(createSeriesElementForAxis(2,series_var_y2_indexes));a=createXMLPlotFix(a);a.append($("<plot_cond />").text($("#txtPlotCond").val()));
b=$("<indep />").attr("name",$("#indy_var").val()).attr("equalize",$("#indy_var_event_equal").is(":checked"));var e=$('[name="multiselect_indy_var_val"]');if(0<$("#indy_var_val").multiselect("getChecked").length)for(d=0;d<e.length;d++){var c=$(e[d]);if(c.prop("checked")){var f=c.attr("id");b.append($("<val />").attr("label",$("#"+f+"_label").val()).attr("plot_val",$("#"+f+"_plot_val").val()).text(c.val()))}}else{var g=moment.tz($("#date_period_start").val(),"YYYY-MM-DD HH:mm:ss","UTC");e=moment.tz($("#date_period_end").val(),
"YYYY-MM-DD HH:mm:ss","UTC");f=$("#date_period_by").val().trim();d=$("#date_period_by_unit").val();c=$(previousIndVarValResponse).find("val");if(0===f.length)for(d=0;d<c.length;d++)f=moment.tz($(c[d]).text(),"YYYY-MM-DD HH:mm:ss","UTC"),(f.isSame(g)||f.isSame(e)||f.isBetween(g,e))&&b.append($("<val />").attr("label",$(c[d]).text()).attr("plot_val","").text($(c[d]).text()));else for(f=parseInt(f),"days"===d&&(f*=24),g=g.clone();g<=e;){var k=g.format("YYYY-MM-DD HH:mm:ss"),l=!1;for(d=0;d<c.length;d++)if($(c[d]).text()===
k){l=!0;break}l&&b.append($("<val />").attr("label",k).attr("plot_val","").text(k));g.add(f,"hour")}}a.append(b);c=$("input:radio[name ='statistics']:checked").val();b=$("#calc_stat").val();d=$("#agg_stat").val();e=$("#revis_stat").val();"aggregation_statistics"===c&&"none"!==d?(b=$("<agg_stat />"),b.append($("<agg_"+d+" />").text("true")),b.append($("<boot_repl />").text($("#boot_repl").val())),b.append($("<boot_random_seed />").text($("#boot_random_seed").val())),b.append($("<boot_ci />").text($("#boot_ci").val())),
b.append($("<eveq_dis />").text($("#eveq_dis").is(":checked"))),b.append($("<cache_agg_stat />").text($("#cacheAggStat").is(":checked"))),b.append($("<circular_block_bootstrap />").text($("#is_cbb").is(":checked"))),a.append(b)):"Bar"!==currentTab&&"calculations_statistics"!==c||"none"===b?"revision_statistics"===c&&(b=$("<revis_stat />"),"none"!==e&&b.append($("<calc_"+e+" />").text("true")),b.append($("<revision_ac />").text($("#revision_ac").prop("checked"))),b.append($("<revision_run />").text($("#revision_run").prop("checked"))),
a.append(b)):(d=$("<calc_stat />"),d.append($("<calc_"+b+" />").text("true")),a.append(d));a.append($("<plot_stat />").text($("#plot_stat").val()));return a}
function createXMLCommon(a){var b=$("<tmpl />");b.append($("<title />").text($("#plot_title").val()));b.append($("<x_label />").text($("#x_label_title").val()));b.append($("<y1_label />").text($("#y1_label_title").val()));b.append($("<y2_label />").text($("#y2_label_title").val()));b.append($("<caption />").text($("#caption").val()));b.append($("<job_title />").text($("#job_title").val()));b.append($("<keep_revisions />").text($("#keep_revisions").is(":checked")));var d=[];if(0<seriesDiffY1.length)for(var e=
0;e<seriesDiffY1.length;e++){var c=seriesDiffY1[e].split(",");d.push('c("'+c[0]+'","'+c[1]+'","'+c[2]+'")')}var f=[];if(0<seriesDiffY2.length)for(e=0;e<seriesDiffY2.length;e++)c=seriesDiffY2[e].split(","),f.push('c("'+c[0]+'","'+c[1]+'","'+c[2]+'")');b.append($("<listDiffSeries1 />").text("list("+d.join()+")"));b.append($("<listDiffSeries2 />").text("list("+f.join()+")"));a.append(b);$("#is_python").is(":checked")?a.append($("<execution_type />").text("Python")):a.append($("<execution_type />").text("Rscript"));
a.append($("<event_equal />").text($("#event_equal").is(":checked")));a.append($("<vert_plot />").text($("#vert_plot").is(":checked")));a.append($("<x_reverse />").text($("#x_reverse").is(":checked")));a.append($("<num_stats />").text($("#num_stats").is(":checked")));a.append($("<indy1_stag />").text($("#indy1_stag").is(":checked")));a.append($("<indy2_stag />").text($("#indy2_stag").is(":checked")));a.append($("<grid_on />").text($("#grid_on").is(":checked")));a.append($("<sync_axes />").text($("#sync_axes").is(":checked")));
a.append($("<dump_points1 />").text($("#dump_points1").is(":checked")));a.append($("<dump_points2 />").text($("#dump_points2").is(":checked")));a.append($("<log_y1 />").text($("#log_y1").is(":checked")));a.append($("<log_y2 />").text($("#log_y2").is(":checked")));a.append($("<varianceInflationFactor />").text($("#varianceInflationFactor").is(":checked")));a.append($("<plot_type />").text($("#plot_type").val()));a.append($("<plot_height />").text($("#plot_height").val()));a.append($("<plot_width />").text($("#plot_width").val()));
a.append($("<plot_res />").text($("#plot_res").val()));a.append($("<plot_units />").text($("#plot_units").val()));e=$("#mar_bottom").val().trim();b=$("#mar_left").val().trim();d=$("#mar_top").val().trim();c=$("#mar_right").val().trim();0===e.length&&(e=0);0===b.length&&(b=0);0===d.length&&(d=0);0===c.length&&(c=0);a.append($("<mar />").text("c("+e+","+b+","+d+","+c+")"));e=$("#mgp_title").val().trim();b=$("#mgp_labels").val().trim();d=$("#mgp_line").val().trim();0===e.length&&(e=0);0===b.length&&
(b=0);0===d.length&&(d=0);a.append($("<mgp />").text("c("+e+","+b+","+d+")"));a.append($("<cex />").text($("#cex").val()));a.append($("<title_weight />").text($("#title_weight").val()));a.append($("<title_size />").text($("#title_size").val()));a.append($("<title_offset />").text($("#title_offset").val()));a.append($("<title_align />").text($("#title_align").val()));a.append($("<xtlab_orient />").text($("#xtlab_orient").val()));a.append($("<xtlab_perp />").text($("#xtlab_perp").val()));a.append($("<xtlab_horiz />").text($("#xtlab_horiz").val()));
a.append($("<xtlab_freq />").text($("#xtlab_freq").val()));a.append($("<xtlab_size />").text($("#xtlab_size").val()));a.append($("<xlab_weight />").text($("#xlab_weight").val()));a.append($("<xlab_size />").text($("#xlab_size").val()));a.append($("<xlab_offset />").text($("#xlab_offset").val()));a.append($("<xlab_align />").text($("#xlab_align").val()));a.append($("<ytlab_orient />").text($("#ytlab_orient").val()));a.append($("<ytlab_perp />").text($("#ytlab_perp").val()));a.append($("<ytlab_horiz />").text($("#ytlab_horiz").val()));
a.append($("<ytlab_size />").text($("#ytlab_size").val()));a.append($("<ylab_weight />").text($("#ylab_weight").val()));a.append($("<ylab_size />").text($("#ylab_size").val()));a.append($("<ylab_offset />").text($("#ylab_offset").val()));a.append($("<ylab_align />").text($("#ylab_align").val()));a.append($("<grid_lty />").text($("#grid_lty").val()));e=$("#grid_col").val();e.startsWith("#")?a.append($("<grid_col />").text(e)):a.append($("<grid_col />").text("#"+e));a.append($("<grid_lwd />").text($("#grid_lwd").val()));
a.append($("<grid_x />").text($("#grid_x").val()));a.append($("<x2tlab_orient />").text($("#x2tlab_orient").val()));a.append($("<x2tlab_perp />").text($("#x2tlab_perp").val()));a.append($("<x2tlab_horiz />").text($("#x2tlab_horiz").val()));a.append($("<x2tlab_size />").text($("#x2tlab_size").val()));a.append($("<x2lab_size />").text($("#x2lab_size").val()));a.append($("<x2lab_offset />").text($("#x2lab_offset").val()));a.append($("<x2lab_align />").text($("#x2lab_align").val()));a.append($("<y2tlab_orient />").text($("#y2tlab_orient").val()));
a.append($("<y2tlab_perp />").text($("#y2tlab_perp").val()));a.append($("<y2tlab_horiz />").text($("#y2tlab_horiz").val()));a.append($("<y2tlab_size />").text($("#y2tlab_size").val()));a.append($("<y2lab_size />").text($("#y2lab_size").val()));a.append($("<y2lab_offset />").text($("#y2lab_offset").val()));a.append($("<y2lab_align />").text($("#y2lab_align").val()));a.append($("<legend_box />").text($("#legend_box").val()));0==$("#legend_inset_min").val().trim().length||0==$("#legend_inset_max").val().trim().length?
a.append($("<legend_inset />").text("c()")):a.append($("<legend_inset />").text("c("+$("#legend_inset_min").val()+","+$("#legend_inset_max").val()+")"));a.append($("<legend_ncol />").text($("#legend_ncol").val()));a.append($("<legend_size />").text($("#legend_size").val()));a.append($("<caption_weight />").text($("#caption_weight").val()));e=$("#caption_col").val();e.startsWith("#")?a.append($("<caption_col />").text(e)):a.append($("<caption_col />").text("#"+e));a.append($("<caption_size />").text($("#caption_size").val()));
a.append($("<caption_offset />").text($("#caption_offset").val()));a.append($("<caption_align />").text($("#caption_align").val()));a.append($("<ci_alpha />").text($("#ci_alpha").val()));a.append($("<eqbound_low />").text($("#eqbound_low").val()));a.append($("<eqbound_high />").text($("#eqbound_high").val()));var g=sortSeries();b=[];d=[];c=[];f=[];var k=[],l=[],p=[],m=[],q=[],t=[],u=[],x=[];for(e=0;e<g.length;e++)if(""!==g[e].order)b.push('"'+g[e].plot_ci+'"'),"No"===g[e].hide?d.push("TRUE"):d.push("FALSE"),
"No"===g[e].show_signif?u.push("FALSE"):u.push("TRUE"),c.push('"'+g[e].color+'FF"'),f.push(g[e].pch),k.push('"'+g[e].type+'"'),l.push(g[e].lty),p.push(g[e].lwd),m.push(g[e].con_series),q.push(g[e].order),t.push('"'+g[e].legend+'"');else{var v=g[e].title,z=v.split("(")[0];v=v.split("(")[1].split(")")[0];x.push($("<line />").attr("type",z).attr("line_pos",v).attr("color",g[e].color).attr("lty",g[e].lty).attr("lwd",g[e].lwd))}if(0<x.length){e=$("<lines />");for(g=0;g<x.length;g++)e.append(x[g]);a.append(e)}a.append($("<plot_ci />").text("c("+
b.join()+")"));a.append($("<show_signif />").text("c("+u.join()+")"));a.append($("<plot_disp />").text("c("+d.join()+")"));a.append($("<colors />").text("c("+c.join()+")"));a.append($("<pch />").text("c("+f.join()+")"));a.append($("<type />").text("c("+k.join()+")"));a.append($("<lty />").text("c("+l.join()+")"));a.append($("<lwd />").text("c("+p.join()+")"));a.append($("<con_series />").text("c("+m.join()+")"));a.append($("<order_series />").text("c("+q.join()+")"));a.append($("<plot_cmd />").text($("#plot_cmd").val()));
a.append($("<legend />").text("c("+t.join()+")"));a.append($("<create_html />").text("TRUE"));0===$("#y1_lim_min").val().trim().length||0===$("#y1_lim_max").val().trim().length?a.append($("<y1_lim />").text("c()")):a.append($("<y1_lim />").text("c("+$("#y1_lim_min").val()+","+$("#y1_lim_max").val()+")"));0===$("#x1_lim_min").val().trim().length||0===$("#x1_lim_max").val().trim().length?a.append($("<x1_lim />").text("c()")):a.append($("<x1_lim />").text("c("+$("#x1_lim_min").val()+","+$("#x1_lim_max").val()+
")"));a.append($("<y1_bufr />").text($("#y1_bufr").val()));0===$("#y2_lim_min").val().trim().length||0===$("#y2_lim_max").val().trim().length?a.append($("<y2_lim />").text("c()")):a.append($("<y2_lim />").text("c("+$("#y2_lim_min").val()+","+$("#y2_lim_max").val()+")"));return a}
function sortSeries(){$("#listdt").saveCell(lastSelRow,lastSelCol);for(var a=$("#listdt").jqGrid("getRowData"),b=[],d=0;d<a.length;d++)"none"!==$("#"+(d+1),"#gbox_listdt").css("display")&&b.push(a[d]);1===b.length?b[0].order=1:b=b.sort(function(a,b){return parseInt(a.id)>parseInt(b.id)?1:parseInt(a.id)<parseInt(b.id)?-1:0});return b}
function createSeriesElementForAxis(a,b){for(var d=$("<series"+a+" />"),e=0;e<b.length;e++){var c=$("<field />").attr("name",$("#series_var_y"+a+"_"+b[e]).val()),f=$("#group_series_var_y"+a+"_"+b[e]).is(":checked");try{var g=$("#series_var_val_y"+a+"_"+b[e]).multiselect("getChecked")}catch(l){}g||(g=[]);if(Array.isArray(g)){if(0<g.length){if(f){var k="";for(f=0;f<g.length;f++)k+=text(g[f]),f!==g.length-1&&(k+=":");c.append($("<val />").text(k))}else for(f=0;f<g.length;f++)c.append($("<val />").text(g[f]));
d.append(c)}}else{if("object"===typeof g)if(f){k="";for(f=0;f<g.length;f++)k+=$(g[f]).val(),f!==g.length-1&&(k+=":");c.append($("<val />").text(k))}else for(f=0;f<g.length;f++)k=$(g[f]).val(),0<k.length&&c.append($("<val />").text(k));else c.append($("<val />").text(g));d.append(c)}}return d}
function createDepElementForAxis(a,b,d){var e=$("<dep"+a+" />");a=createMapForForecastVar(a,b,d);for(var c in a){b=$("<fcst_var />").attr("name",c.replace("&","&amp;").replace(">","&gt;").replace("<","&lt;"));for(d=0;d<a[c].length;d++)b.append($("<stat />").text(a[c][d]));e.append(b)}return e}
function refreshHistory(){$("#history_content").empty();var a=$("<request />"),b=$("<history />"),d=!1;"show_history_all"==$("input:radio[name='show_history_choice']:checked").val()&&(d=!0);b.append($("<show_all>"+d+"</show_all>"));a.append(b);$.ajax({url:"servlet",processData:!1,type:"POST",dataType:"xml",contentType:"application/xml",data:$("<root />").append(a).html(),success:function(a){a=$(a);a=$(a.find("results")[0]).find("file");for(var b=0;b<a.length;b++){var d=$(a[b]).attr("name");var e=
"true"===$(a[b]).attr("success")?"#000000":"#B39A9A";$("#history_content").append($("<tr/>").append($("<td/>").append($("<button />").attr("id",d).addClass("view-image").text("Image"))).append($("<td/>").append($("<button />").attr("id",d).addClass("load-image").text("XML"))).append($("<td/>").css("color",e).text(d)))}$(".view-image").button({icons:{primary:"ui-icon-image"},text:!1}).click(function(){viewImage($(this).attr("id"))});$(".load-image").button({icons:{primary:"ui-icon-document"},text:!1}).click(function(){$("#uploadLocalId").val($(this).prop("id"));
loadImage($(this).attr("id"))})},error:function(a){alert(a)}})}
function loadImage(a){boxID+=1;window_center+=20;window_top+=20;$("<div>").attr("id",boxID+"dialog").dialog({height:400,width:600,resizable:!0,closeOnEscape:!0,autoOpen:!1,focus:!0,dialogClass:"dialog-box-"+boxID,title:a,position:{my:"center+"+window_center+" top+"+window_top,at:"center top",of:window},close:function(a){$(this).empty();$(this).dialog("destroy");window_center-=20;window_top-=20},buttons:{"Load to Page":function(){$("#formUploadLocal").submit();$(this).dialog("close")},"Download to Disk":function(){$('<form action="download" method="get"><input type="hidden" name="plot" value="plot_'+
(a+'" /><input type="hidden" name="type" value="plot_xml_url" /></form>')).appendTo("body").submit().remove();$(this).dialog("close")}},create:function(b,d){$.ajax({async:!1,type:"GET",url:urlOutput+"xml/plot_"+a+".xml",dataType:"xml",success:function(a){a="msie"==jQuery.browser?a.xml:(new XMLSerializer).serializeToString(a);try{$("#"+boxID+"dialog").append(formatXml(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />"))}catch(c){console.log(c+
" can't append xml")}}})}}).dialog("open")}function formatXml(a){var b="";a=a.replace(/(>)(<)(\/*)/g,"$1\r\n$2$3");var d=0;jQuery.each(a.split("\r\n"),function(a,c){a=0;c.match(/.+<\/\w[^>]*>$/)?a=0:c.match(/^<\/\w/)?0!=d&&--d:a=c.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var e="",g=0;g<d;g++)e+=" ";b+=e+c+"\r\n";d+=a});return b}
function resetFormatting(){$("#plot_title").val("test title");$("#x_label_title").val("test x_label");$("#y1_label_title").val("test y_label");$("#y2_label_title").val("");$("#caption").val("");$("#job_title").val("");$("#keep_revisions").prop("checked",!1);$("#is_python").prop("checked",!1);$("#vert_plot").prop("checked",!1);$("#x_reverse").prop("checked",!1);$("#num_stats").prop("checked",!1);$("#grid_on").prop("checked",!0);$("#sync_axes").prop("checked",!1);$("#dump_points1").prop("checked",!1);
$("#dump_points2").prop("checked",!1);$("#indy1_stag").prop("checked",!1);$("#indy2_stag").prop("checked",!1);$("#varianceInflationFactor").prop("checked",!0);$("#ci_alpha").val("0.05");$("#eqbound_low").val("-0.001");$("#eqbound_high").val("0.001");$("#plot_type").val("png16m");$("#plot_height").val("8.5");$("#plot_width").val("11");$("#plot_units").val("in");$("#cex").val("1");$("#plot_res").val("72");$("#mar_bottom").val("8");$("#mar_left").val("4");$("#mar_top").val("5");$("#mar_right").val("4");
$("#mgp_title").val("1");$("#mgp_labels").val("1");$("#mgp_line").val("0");$("#title_align").val("0.5");$("#title_offset").val("-2");$("#title_size").val("1.4");$("#title_weight").val("2");$("#grid_lty").val("3");$("#grid_lwd").val("1");$("#grid_x").val("listX");$("#plot_cmd").val("");$("#xlab_align").val("0.5");$("#xlab_offset").val("2");$("#xlab_size").val("1");$("#xlab_weight").val("1");$("#xtlab_horiz").val("0.5");$("#xtlab_perp").val("-0.75");$("#xtlab_size").val("1");$("#xtlab_freq").val("0");
$("#xtlab_orient").val("1");$("#x2lab_align").val("0.5");$("#x2lab_offset").val("-0.5");$("#x2lab_size").val("0.8");$("#x2lab_weight").val("1");$("#x2tlab_horiz").val("0.5");$("#x2tlab_perp").val("1");$("#x2tlab_size").val("0.8");$("#x2tlab_orient").val("1");$("#ylab_align").val("0.5");$("#ylab_offset").val("-2");$("#ylab_size").val("1");$("#ylab_weight").val("1");$("#ytlab_horiz").val("0.5");$("#ytlab_perp").val("0.5");$("#ytlab_size").val("1");$("#ytlab_orient").val("1");$("#y1_lim_min").val("");
$("#y1_lim_max").val("");$("#y1_bufr").val("0.04");$("#y2lab_align").val("0.5");$("#y2lab_offset").val("1");$("#y2lab_size").val("1");$("#y2lab_weight").val("1");$("#y2tlab_horiz").val("0.5");$("#y2tlab_perp").val("0.5");$("#y2tlab_size").val("1");$("#y2tlab_orient").val("1");$("#y2_bufr").val("0");$("#legend_size").val("0.8");$("#legend_inset_min").val("0");$("#legend_inset_max").val(" -.25");$("#legend_box").val("o");$("#legend_ncol").val("3");$("#caption_align").val("0");$("#caption_offset").val("3");
$("#caption_size").val("0.8");$("#caption_weight").val("1");$("#x1_lim_min").val("");$("#x1_lim_max").val("")}
function removeFixedVarHist(a){a=a.split("_");a=a[a.length-1];var b=$("#fixed_var_"+a);b.multiselect("destroy");$("#fixed_var_val_"+a).multiselect("destroy");var d=jQuery.inArray(parseInt(a),fixed_var_indexes);-1<d&&(fixed_var_indexes.splice(d,1),fixVarValResponse[parseInt(a)]=null);1==fixed_var_indexes.length&&$("#remove_fixed_var_"+fixed_var_indexes[0]).button({disabled:!0});b.parent().parent().remove()}
function removeFixedVar(a){a=a.split("_");a=a[a.length-1];try{$("#fixed_var_"+a).multiselect("destroy"),$("#fixed_var_val_"+a).multiselect("destroy"),$("#fixed_var_val_date_period_"+a).dialog("destroy"),$("#fixed_var_val_date_period_"+a).remove(),$("#fixed_var_val_date_period_button_"+a).button("destroy"),$("#fixed_var_val_date_range_button_"+a).button("destroy")}catch(d){}var b=jQuery.inArray(parseInt(a),fixed_var_indexes);-1<b&&fixed_var_indexes.splice(b,1);0<fixed_var_indexes.length?$("#fixed_var_"+
a).parent().parent().remove():$("#fixed_var_table").css("display","none")}
function addFixedVarHist(){var a,b=a=0<fixed_var_indexes.length?parseInt(fixed_var_indexes[fixed_var_indexes.length-1]):1,d="none"===$("#fixed_var_table").css("display"),e=$("#event_equal").prop("checked"),c;if(d){0===fixed_var_indexes.length&&fixed_var_indexes.push(b);$("#fixed_var_table").css("display","");var f=$("#fixed_var_"+b);$("#remove_fixed_var_"+b).button({icons:{primary:"ui-icon-trash"},text:!1});var g=$("#fixed_var_val_"+b);var k=$("#fixed_var_val_date_period_button_"+b);var l=$("#fixed_var_val_date_range_button_"+
b);var p=$("#fixed_var_val_date_period_"+b);$("#fix_var_event_equal_"+b).prop("checked",e).prop("disabled",!e)}else b=parseInt(a)+1,fixed_var_indexes.push(b),f=$("#fixed_var_"+a).clone(!1),f.prop("id","fixed_var_"+b),f.css("display",""),f.val(f.find(" option:first").val());if(!d){d=$(' <button id="remove_fixed_var_"'+b+'" class="remove_fixed_var">Remove</button>').button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeFixedVarHist("remove_fixed_var_"+b)});g=$("#fixed_var_val_"+a).clone(!1);
g.prop("id","fixed_var_val_"+b);g.css("display","");f.val(f.find(" option:first").val());k=$("<button>",{text:"Select multiple options",id:"fixed_var_val_date_period_button_"+b}).css("display","none");var m=$("#fixed_var_val_date_range_"+a).clone(!1);m.prop("id","fixed_var_val_date_range_"+b);l=$("<button>",{text:"Select multiple options",id:"fixed_var_val_date_range_button_"+b}).css("display","none");p=$("#fixed_var_val_date_period_"+a).clone(!1).appendTo("body");p.prop("id","fixed_var_val_date_period_"+
b);p.find("#fixed_var_val_date_period_start_"+a).prop("id","fixed_var_val_date_period_start_"+b);p.find("#fixed_var_val_date_period_end_"+a).prop("id","fixed_var_val_date_period_end_"+b);p.find("#fixed_var_val_date_period_by_"+a).prop("id","fixed_var_val_date_period_by_"+b);p.find("#fixed_var_val_date_period_by_unit_"+a).prop("id","fixed_var_val_date_period_by_unit_"+b);e=$("#fix_var_event_equal_"+a).clone(!0).prop("id","fix_var_event_equal_"+b).prop("checked",e).prop("disabled",!e);0<$("#fix_var_event_equal_"+
a).find("label").size()&&(c=$('<label for="fix_var_event_equal_'+b+'">Equalize</label>'));$("body").append(p);$("#fixed_var_table").append($("<tr>").append($("<td>").append(d)).append($("<td>").append(f)).append($("<td>").append(g)).append($("<td>").append(k)).append($("<td>").append(m).append(l)).append($("<td>").append(e).append(c)))}createValDatePeriodDialog("fixed_var_val",b);g.multiselect({selectedList:100,noneSelectedText:"Select value",position:{my:"center center",at:"right center"}});f.multiselect({multiple:!1,
selectedList:1,header:!1,minWidth:"auto",height:300,click:function(a,c){$("#fixed_var_val_date_period_start_"+b).empty();$("#fixed_var_val_date_period_end_"+b).empty();"fcst_init_beg"===c.value||"fcst_valid_beg"===c.value||"fcst_valid"===c.value||"fcst_init"===c.value?($("#fixed_var_val_date_period_button_"+b).css("display","block"),$("#fixed_var_val_date_range_button_"+b).css("display","block")):($("#fixed_var_val_date_period_button_"+b).css("display","none"),$("#fixed_var_val_date_range_button_"+
b).css("display","none"));a=this.id.split("_");updateFixedVarValHist(a[a.length-1],[])}});k.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#fixed_var_val_date_period_"+b).dialog("open")});l.button({icons:{primary:"ui-icon-calendar"},text:!1}).click(function(a){a.stopPropagation();var c=$(fixVarValResponse[b]).find("val");a=$(c[0]).text();c=$(c[c.length-1]).text();try{$("#fixed_var_val_date_range_"+b).unbind("datepicker-apply"),$("#fixed_var_val_date_range_"+
b).data("dateRangePicker").destroy()}catch(u){console.log(u)}$("#fixed_var_val_date_range_"+b).dateRangePicker({startOfWeek:"sunday",separator:" - ",format:"YYYY-MM-DD HH:mm",autoClose:!1,time:{enabled:!0},startDate:moment.tz(a,"YYYY-MM-DD HH:mm:ss","UTC"),endDate:moment.tz(c,"YYYY-MM-DD HH:mm:ss","UTC"),showShortcuts:!0,shortcuts:{"prev-days":[3,7,30],prev:["week","month","year"],"next-days":null,next:null},monthSelect:!0,yearSelect:!0,container:document.getElementById("fixed_var_table").parentElement,
customTopBar:function(){return createCalendarTopBarNoFormat(b)}}).bind("datepicker-apply",function(a,c){onIndyCalendarClose(c,b)});$("#fixed_var_val_date_range_"+b).data("dateRangePicker").open()});updateFixedVarValHist(b,[])}
function addFixedVar(){var a=0<fixed_var_indexes.length?parseInt(fixed_var_indexes[fixed_var_indexes.length-1]):(a=$("#fixed_var_table select:first-child"))?parseInt(a.prop("id").split("fixed_var_")[1]):1;var b=a,d;var e="none"===$("#fixed_var_table").css("display");var c=$("#event_equal").prop("checked");if(e){0===fixed_var_indexes.length&&fixed_var_indexes.push(b);$("#fixed_var_table").css("display","");var f=$("#fixed_var_"+b);0===$("#fixed_var_"+b+" option").length&&("Perf"===currentTab?$.each(perf_fixed_var_map,
function(a,b){f.append('<option value="'+a+'">'+b+"</option>")}):"stat"===selected_mode?$.each(fix_var_value_to_title_stat_map,function(a,b){f.append('<option value="'+a+'">'+b+"</option>")}):"mode"===selected_mode?$.each(fix_var_value_to_title_mode_map,function(a,b){f.append('<option value="'+a+'">'+b+"</option>")}):$.each(fix_var_value_to_title_mtd_map,function(a,b){f.append('<option value="'+a+'">'+b+"</option>")}));$("#remove_fixed_var_"+b).button({icons:{primary:"ui-icon-trash"},text:!1});var g=
$("#fixed_var_val_"+b);var k=$("#fixed_var_val_date_period_button_"+b);var l=$("#fixed_var_val_date_range_button_"+b);var p=$("#fixed_var_val_date_range_"+b);var m=$("#fixed_var_val_date_period_"+b);$("#fix_var_event_equal_"+b).prop("checked",c).prop("disabled",!c)}else b=parseInt(a)+1,fixed_var_indexes.push(b),f=$("#fixed_var_"+a).clone(!1),f.prop("id","fixed_var_"+b),f.css("display",""),f.val(f.find(" option:first").val());e||(e=$('<button id="remove_fixed_var_'+b+'" class="remove_fixed_var">Remove</button>'),
g=$("#fixed_var_val_"+a).clone(!1),g.prop("id","fixed_var_val_"+b),g.css("display",""),f.val(f.find(" option:first").val()),k=$("<button>",{text:"Select multiple options",id:"fixed_var_val_date_period_button_"+b}).css("display","none"),p=$("#fixed_var_val_date_range_"+a).clone(!1),p.prop("id","fixed_var_val_date_range_"+b),l=$("<button>",{text:"Select multiple options",id:"fixed_var_val_date_range_button_"+b}).css("display","none"),m=$("#fixed_var_val_date_period_"+a).clone(!1).appendTo("body"),m.prop("id",
"fixed_var_val_date_period_"+b),m.find("#fixed_var_val_date_period_start_"+a).prop("id","fixed_var_val_date_period_start_"+b),m.find("#fixed_var_val_date_period_end_"+a).prop("id","fixed_var_val_date_period_end_"+b),m.find("#fixed_var_val_date_period_by_"+a).prop("id","fixed_var_val_date_period_by_"+b),m.find("#fixed_var_val_date_period_by_unit_"+a).prop("id","fixed_var_val_date_period_by_unit_"+b),c=$("#fix_var_event_equal_"+a).clone(!0).prop("id","fix_var_event_equal_"+b).prop("checked",c).prop("disabled",
!c),0<$("#fix_var_event_equal_"+a).find("label").size()&&(d=$('<label for="fix_var_event_equal_'+b+'">Equalize</label>')),$("body").append(m),$("#fixed_var_table").append($("<tr>").append($("<td>").append(e)).append($("<td>").append(f)).append($("<td>").append(g)).append($("<td>").append(k)).append($("<td>").append(p).append(l)).append($("<td>").append(c).append(d))),e.button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeFixedVar($(this).attr("id"))}));createValDatePeriodDialog("fixed_var_val",
b);"Contour"===currentTab?g.multiselect({selectedList:100,noneSelectedText:"Select value",position:{my:"center center",at:"right center"},close:function(){updateSeries()}}):g.multiselect({selectedList:100,noneSelectedText:"Select value",position:{my:"center center",at:"right center"}});f.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",height:300,click:function(a,c){$("#fixed_var_val_date_period_start_"+b).empty();$("#fixed_var_val_date_period_end_"+b).empty();"fcst_init_beg"===c.value||
"fcst_valid_beg"===c.value||"fcst_valid"===c.value||"fcst_init"===c.value?($("#fixed_var_val_date_period_button_"+b).css("display","block"),$("#fixed_var_val_date_range_button_"+b).css("display","block")):($("#fixed_var_val_date_period_button_"+b).css("display","none"),$("#fixed_var_val_date_range_button_"+b).css("display","none"));a=this.id.split("_");updateFixedVarVal(a[a.length-1],[])}});k.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#fixed_var_val_date_period_"+
b).dialog("open")});l.button({icons:{primary:"ui-icon-calendar"},text:!1}).click(function(a){a.stopPropagation();var c=$(fixVarValResponse[b]).find("val");a=$(c[0]).text();c=$(c[c.length-1]).text();try{$("#fixed_var_val_date_range_"+b).unbind("datepicker-apply"),$("#fixed_var_val_date_range_"+b).data("dateRangePicker").destroy()}catch(u){console.log(u)}$("#fixed_var_val_date_range_"+b).dateRangePicker({startOfWeek:"sunday",separator:" - ",format:"YYYY-MM-DD HH:mm",autoClose:!1,time:{enabled:!0},startDate:moment.tz(a,
"YYYY-MM-DD HH:mm:ss","UTC"),endDate:moment.tz(c,"YYYY-MM-DD HH:mm:ss","UTC"),showShortcuts:!0,shortcuts:{"prev-days":[3,7,30],prev:["week","month","year"],"next-days":null,next:null},monthSelect:!0,yearSelect:!0,container:document.getElementById("fixed_var_table").parentElement,customTopBar:function(){return createCalendarTopBarNoFormat(b)}}).bind("datepicker-apply",function(a,c){onIndyCalendarClose(c,b)});$("#fixed_var_val_date_range_"+b).data("dateRangePicker").open()});updateFixedVarVal(b,[])}
function removeSeriesVarCommon(a){var b=a.split("_");a=b[b.length-1];b=b[b.length-2];try{$("#series_var_"+b+"_"+a).multiselect("destroy")}catch(e){}try{$("#series_var_val_"+b+"_"+a).multiselect("destroy")}catch(e){}if("y1"===b){var d=jQuery.inArray(parseInt(a),series_var_y1_indexes);-1<d&&(series_var_y1_indexes.splice(d,1),seriesY1VarValResponse[parseInt(a)]=null);0<series_var_y1_indexes.length?$("#series_var_"+b+"_"+a).parent().parent().remove():$("#series_var_table_"+b).css("display","none")}else d=
jQuery.inArray(parseInt(a),series_var_y2_indexes),-1<d&&(series_var_y2_indexes.splice(d,1),seriesY1VarValResponse[parseInt(a)]=null),0<series_var_y2_indexes.length?$("#series_var_"+b+"_"+a).parent().parent().remove():$("#series_var_table_"+b).css("display","none")}function removeSeriesVar(a){removeSeriesVarCommon(a);1==series_var_y1_indexes.length&&$("#remove_series_var_y1_"+series_var_y1_indexes[0]).button("disable");updateSeries()}
function addSeriesVarEns(){var a=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(a+1);if(0==a){$("#series_var_table_y1").css("display","");var b=$("#series_var_y1_"+(a+1));$("#remove_series_var_y1_"+(a+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVar($(this).attr("id"))});var d=$("#series_var_val_y1_"+(a+1))}else b=$("#series_var_y1_"+a).clone(!1),b.attr("id","series_var_y1_"+(a+1)),b.css("display",
"");if(0<a){var e=$("#remove_series_var_y1_"+a).button("enable").clone(!0).attr("id","remove_series_var_y1_"+(a+1));d=$("#series_var_val_y1_"+a).clone(!1);d.attr("id","series_var_val_y1_"+(a+1));d.css("display","");$("#series_var_table_y1").append($("<tr>").append($("<td>").append(e)).append($("<td>").append(b)).append($("<td>").append(d)))}d.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeriesEns()},checkAll:function(){updateSeries(!0)},uncheckAll:function(){updateSeries()}});
try{d.multiselect("uncheckAll")}catch(c){}b.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(){var a=this.id.split("_");updateSeriesVarValEns(a[a.length-1],[])}})}
function addSeriesVarPerf(){var a=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(a+1);if(0==a){$("#series_var_table_y1").css("display","");var b=$("#series_var_y1_"+(a+1));$("#remove_series_var_y1_"+(a+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVar($(this).attr("id"))});var d=$("#series_var_val_y1_"+(a+1))}else b=$("#series_var_y1_"+a).clone(!1),b.attr("id","series_var_y1_"+(a+1)),b.css("display",
"");if(0<a){var e=$("#remove_series_var_y1_"+a).button("enable").clone(!0).attr("id","remove_series_var_y1_"+(a+1));d=$("#series_var_val_y1_"+a).clone(!1);d.attr("id","series_var_val_y1_"+(a+1));d.css("display","");$("#series_var_table_y1").append($("<tr>").append($("<td>").append(e)).append($("<td>").append(b)).append($("<td>").append(d)))}d.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeriesPerf()},checkAll:function(){updateSeriesPerf(!0)},uncheckAll:function(){updateSeriesPerf()}});
try{d.multiselect("uncheckAll")}catch(c){}b.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(){var a=this.id.split("_");updateSeriesVarValHist(a[a.length-1],[])}})}
function addSeriesVarHist(){var a=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(a+1);if(0===a){$("#series_var_table_y1").css("display","");var b=$("#series_var_y1_"+(a+1));$("#remove_series_var_y1_"+(a+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVarCommon($(this).attr("id"));updateSeriesHist()});var d=$("#series_var_val_y1_"+(a+1));var e=$("#series_var_val_y1_date_period_button_"+(a+1));var c=
$("#series_var_val_y1_date_period_"+(a+1))}else b=$("#series_var_y1_"+a).clone(!1),b.attr("id","series_var_y1_"+(a+1)),b.css("display","");if(0<a){var f=$("#remove_series_var_y1_"+a).button("enable").clone(!0).attr("id","remove_series_var_y1_"+(a+1));d=$("#series_var_val_y1_"+a).clone(!1);d.attr("id","series_var_val_y1_"+(a+1));d.css("display","");e=$("<button>",{text:"Select multiple options",id:"series_var_val_y1_date_period_button_"+(a+1)}).css("display","none");c=$("#series_var_val_y1_date_period_"+
a).clone(!1).appendTo("body");c.prop("id","series_var_val_y1_date_period_"+(a+1));c.find("#series_var_val_y1_date_period_start_"+a).prop("id","series_var_val_y1_date_period_start_"+(a+1));c.find("#series_var_val_y1_date_period_end_"+a).prop("id","series_var_val_y1_date_period_end_"+(a+1));c.find("#series_var_val_y1_date_period_by_"+a).prop("id","series_var_val_y1_date_period_by_"+(a+1));c.find("#series_var_val_y1_date_period_by_unit_"+a).prop("id","series_var_val_y1_date_period_by_unit_"+(a+1));$("body").append(c);
$("#series_var_table_y1").append($("<tr>").append($("<td>").append(f)).append($("<td>").append(b)).append($("<td>").append(d)).append($("<td>").append(e)))}createValDatePeriodDialog("series_var_val_y1",a+1);d.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeriesHist()},checkAll:function(){updateSeriesHist()},uncheckAll:function(){updateSeriesHist()}});try{d.multiselect("uncheckAll")}catch(g){}b.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",
click:function(b,c){$("#series_var_val_y1_date_period_start_"+(a+1)).empty();$("#series_var_val_y1_date_period_end_"+(a+1)).empty();"fcst_init_beg"==c.value||"fcst_valid_beg"==c.value||"fcst_valid"==c.value||"fcst_init"==c.value?$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","none");b=this.id.split("_");updateSeriesVarValHist(b[b.length-1],[])}});e.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},
text:!1}).click(function(){$("#series_var_val_y1_date_period_"+(a+1)).dialog("open")})}
function addSeriesVar(a){if("y1"==a){var b=0<series_var_y1_indexes.length?series_var_y1_indexes[series_var_y1_indexes.length-1]:0;series_var_y1_indexes.push(b+1)}else b=0<series_var_y2_indexes.length?series_var_y2_indexes[series_var_y2_indexes.length-1]:0,series_var_y2_indexes.push(b+1);if(0==b){$("#series_var_table_"+a).css("display","");var d=$("#series_var_"+a+"_"+(b+1));$("#remove_series_var_"+a+"_"+(b+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeSeriesVar($(this).attr("id"))});
var e=$("#series_var_val_"+a+"_"+(b+1));var c=$("#series_var_val_"+a+"_date_period_button_"+(b+1));var f=$("#series_var_val_"+a+"_date_period_"+(b+1))}else d=$("#series_var_"+a+"_"+b).clone(!1),d.attr("id","series_var_"+a+"_"+(b+1)),d.css("display","");if(0<b){var g=$("#remove_series_var_"+a+"_"+b).button("enable").clone(!0).attr("id","remove_series_var_"+a+"_"+(b+1));e=$("#series_var_val_"+a+"_"+b).clone(!1);e.attr("id","series_var_val_"+a+"_"+(b+1));e.css("display","");var k=$("#group_series_var_"+
a+"_"+b).clone(!1);k.attr("id","group_series_var_"+a+"_"+(b+1)).prop("checked",!1);k.click(function(){updateSeries()});var l=$('<label for="group_series_var_'+a+"_"+(b+1)+'">Group_'+a+"_"+(b+1)+"</label>");c=$("<button>",{text:"Select multiple options",id:"series_var_val_"+a+"_date_period_button_"+(b+1)}).css("display","none");f=$("#series_var_val_"+a+"_date_period_"+b).clone(!1).appendTo("body");f.prop("id","series_var_val_"+a+"_date_period_"+(b+1));f.find("#series_var_val_"+a+"_date_period_start_"+
b).prop("id","series_var_val_"+a+"_date_period_start_"+(b+1));f.find("#series_var_val_"+a+"_date_period_end_"+b).prop("id","series_var_val_"+a+"_date_period_end_"+(b+1));f.find("#series_var_val_"+a+"_date_period_by_"+b).prop("id","series_var_val_"+a+"_date_period_by_"+(b+1));f.find("#series_var_val_"+a+"_date_period_by_unit_"+b).prop("id","series_var_val_"+a+"_date_period_by_unit_"+(b+1));$("body").append(f);$("#series_var_table_"+a).append($("<tr>").append($("<td>").append(g)).append($("<td>").append(d)).append($("<td>").append(e)).append($("<td>").append(c)).append($("<td>").append(k).append(l)))}createValDatePeriodDialog("series_var_val_"+
a,b+1);e.multiselect({selectedList:100,noneSelectedText:"Select value",click:function(){updateSeries()},checkAll:function(){updateSeries(!0)},uncheckAll:function(){updateSeries()}});try{e.multiselect("uncheckAll")}catch(p){}d.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(c,d){$("#series_var_val_"+a+"_date_period_start_"+(b+1)).empty();$("#series_var_val_"+a+"_date_period_end_"+(b+1)).empty();"fcst_init_beg"==d.value||"fcst_valid_beg"==d.value||"fcst_valid"==d.value||
"fcst_init"==d.value?($("#series_var_val_"+a+"_date_period_button_"+(b+1)).css("display","block"),$("#series_var_val_"+a+"_date_range_button_"+(b+1)).css("display","block")):($("#series_var_val_"+a+"_date_period_button_"+(b+1)).css("display","none"),$("#series_var_val_"+a+"_date_range_button_"+(b+1)).css("display","none"));c=this.id.split("_");updateSeriesVarVal(c[c.length-2],c[c.length-1],[])}});c.button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#series_var_val_"+
a+"_date_period_"+(b+1)).dialog("open")})}
function removeFcstVar(a){var b=a.split("_");a=b[b.length-1];b=b[b.length-2];$("#fcst_var_"+b+"_"+a).multiselect("destroy");$("#fcst_stat_"+b+"_"+a).multiselect("destroy");if("y1"==b){var d=jQuery.inArray(parseInt(a),fcst_var_y1_indexes);-1<d&&fcst_var_y1_indexes.splice(d,1);1==fcst_var_y1_indexes.length&&$("#remove_fcst_var_"+b+"_"+fcst_var_y1_indexes[0]).button("disable");0<fcst_var_y1_indexes.length?$("#fcst_var_"+b+"_"+a).parent().parent().remove():$("#dependent_var_table_"+b).css("display","none")}else d=
jQuery.inArray(parseInt(a),fcst_var_y2_indexes),-1<d&&fcst_var_y2_indexes.splice(d,1),0<fcst_var_y2_indexes.length?$("#fcst_var_"+b+"_"+a).parent().parent().remove():$("#dependent_var_table_"+b).css("display","none");updateSeries()}
function addFcstVar(a){var b=$("#plot_data").multiselect("getChecked").val();if("y1"==a){var d=0<fcst_var_y1_indexes.length?fcst_var_y1_indexes[fcst_var_y1_indexes.length-1]:0;fcst_var_y1_indexes.push(d+1)}else d=0<fcst_var_y2_indexes.length?fcst_var_y2_indexes[fcst_var_y2_indexes.length-1]:0,fcst_var_y2_indexes.push(d+1);if(0==d){$("#dependent_var_table_"+a).css("display","");var e=$("#fcst_var_"+a+"_"+(d+1));$("#remove_fcst_var_"+a+"_"+(d+1)).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(){removeFcstVar($(this).attr("id"))});
var c=$("#fcst_stat_"+a+"_"+(d+1));var f=$("#fcst_stat_mode_"+a+"_"+d)}else e=$("#fcst_var_"+a+"_"+d).clone(!1),e.attr("id","fcst_var_"+a+"_"+(d+1)),e.css("display","");if(0<d){var g=$("#remove_fcst_var_"+a+"_"+d).button("enable").clone(!0).attr("id","remove_fcst_var_"+a+"_"+(d+1));c=$("#fcst_stat_"+a+"_"+d).clone(!1);c.attr("id","fcst_stat_"+a+"_"+(d+1));c.css("display","");f=$("#fcst_stat_mode_"+a+"_"+d).clone(!1);f.attr("id","fcst_stat_mode_"+a+"_"+(d+1));var k=$("#fcst_stat_mode_config_"+a+"_"+
d).clone(!0);k.attr("id","fcst_stat_mode_config_"+a+"_"+(d+1));k.css("display","none");$("#dependent_var_table_"+a).append($("<tr>").append($("<td>").append(g)).append($("<td>").append(e)).append($("<td>").append(c).append("<br/>").append(f)).append($("<td>").append(k)))}e.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",height:200,click:function(){var a=this.id.split("_");updateStats(a[a.length-2],a[a.length-1],[]);try{var b=$("#series_var_val_"+a[a.length-2]+"_"+a[a.length-1]).multiselect("getChecked").val()}catch(m){b=
$("#series_var_val_"+a[a.length-2]+"_"+a[a.length-1]+" option:first-child").val()}null==b&&(b=[]);updateSeriesVarVal(a[a.length-2],a[a.length-1],b)}});"stat"==b?c.multiselect({selectedList:100,noneSelectedText:"Select attribute stat",click:function(a,b){updateSeries()},position:{my:"right center",at:"right center"},checkAll:function(){updateSeries()},uncheckAll:function(){updateSeries()}}):(c.multiselect({selectedList:100,noneSelectedText:"Select ratio stat",position:{my:"right center",at:"right center"},
click:function(a,b){a=this.id.split("_");$("#fcst_stat_mode_config_"+a[a.length-2]+"_"+a[a.length-1]).css("display","none");try{$("#fcst_stat_mode_"+a[a.length-2]+"_"+a[a.length-1]).multiselect("uncheckAll")}catch(m){console.log("Error "+m)}$("input[name=statistics][value=aggregation_statistics]").prop("checked",!0);$("#agg_stat").val("mode");try{$("#agg_stat").multiselect("refresh")}catch(m){}$("#aggregation_statistics").show();$("#calculations_statistics").hide();$("#revision_statistics").hide();
updateSeries()},checkAll:function(){updateSeries()},uncheckAll:function(){updateSeries()}}),"N/A"==$("#fcst_var_"+a+"_"+(d+1)).multiselect("getChecked").val()?c.multiselect("disable"):c.multiselect("enable"),f.multiselect({multiple:!1,selectedList:1,header:!1,minWidth:225,height:300,noneSelectedText:"Select attribute stat",allUnselected:!0,position:{my:"right center",at:"right center"},click:function(a,b){a=this.id.split("_");try{$("#fcst_stat_"+a[a.length-2]+"_"+a[a.length-1]).multiselect("uncheckAll")}catch(m){}a=
$("#fcst_stat_mode_config_"+a[a.length-2]+"_"+a[a.length-1]);a.css("display","block");"ACOV"==b.value?a.find(".non-acov").attr("disabled",!0):a.find(".non-acov").removeAttr("disabled");-1<listStatModePair.indexOf(b.value)?a.find(".non-pair").attr("disabled",!0):a.find(".non-pair").removeAttr("disabled");$("input[name=statistics][value=calculations_statistics]").prop("checked",!0);$("#calc_stat").val("none");try{$("#calc_stat").multiselect("refresh")}catch(m){}$("#aggregation_statistics").hide();$("#calculations_statistics").show();
$("#revision_statistics").show();updateSeries()}}))}
function loadXMLStatistics(a){if(0<initXML.find("plot").find("agg_stat").length){$("input[name=statistics][value=aggregation_statistics]").prop("checked",!0);$("#calculations_statistics").hide();$("#revision_statistics").hide();$("#aggregation_statistics").show();"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_ctc")).text()?$("#agg_stat").val("ctc"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_sl1l2")).text()?$("#agg_stat").val("sl1l2"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_grad")).text()?
$("#agg_stat").val("grad"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_sal1l2")).text()?$("#agg_stat").val("sal1l2"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_pct")).text()?$("#agg_stat").val("pct"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_nbrcnt")).text()?$("#agg_stat").val("nbrcnt"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_ssvar")).text()?$("#agg_stat").val("ssvar"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_vl1l2")).text()?
$("#agg_stat").val("vl1l2"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_val1l2")).text()?$("#agg_stat").val("val1l2"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_ecnt")).text()?$("#agg_stat").val("ecnt"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_rps")).text()?$("#agg_stat").val("rps"):"TRUE"===$(initXML.find("plot").find("agg_stat").find("agg_mctc")).text()?$("#agg_stat").val("mctc"):"mode"===selected_mode&&-1!==listStatModeRatio.indexOf(a[0])&&$("#agg_stat").val("mode");
try{$("#agg_stat").multiselect("refresh")}catch(b){}$("#boot_repl").val($(initXML.find("plot").find("agg_stat").find("boot_repl")).text());a=$(initXML.find("plot").find("agg_stat").find("boot_random_seed")).text();Number.isInteger(parseInt(a))?$("#boot_random_seed").val(a):$("#boot_random_seed").val("");$("#boot_ci").val($(initXML.find("plot").find("agg_stat").find("boot_ci")).text());$("#cacheAggStat").prop("checked","TRUE"==$(initXML.find("plot").find("agg_stat").find("cache_agg_stat")).text());
$("#is_cbb").prop("checked","true"==$(initXML.find("plot").find("circular_block_bootstrap")).text())}else if(0<initXML.find("plot").find("calc_stat").length){$("input[name=statistics][value=calculations_statistics]").prop("checked",!0);$("#calculations_statistics").show();$("#aggregation_statistics").hide();$("#revision_statistics").hide();"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_ctc")).text()?$("#calc_stat").val("ctc"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_sl1l2")).text()?
$("#calc_stat").val("sl1l2"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_grad")).text()?$("#calc_stat").val("grad"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_sal1l2")).text()?$("#calc_stat").val("sal1l2"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_vl1l2")).text()&&$("#calc_stat").val("vl1l2");try{$("#calc_stat").multiselect("refresh")}catch(b){}}else if(0<initXML.find("plot").find("revis_stat").length){$("input[name=statistics][value=revision_statistics]").prop("checked",
!0);$("#calculations_statistics").hide();$("#aggregation_statistics").hide();$("#revision_statistics").show();"TRUE"==$(initXML.find("plot").find("revis_stat").find("calc_ctc")).text()?$("#revis_stat").val("ctc"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_sl1l2")).text()?$("#revis_stat").val("sl1l2"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_grad")).text()?$("#revis_stat").val("grad"):"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_sal1l2")).text()?$("#revis_stat").val("sal1l2"):
"TRUE"==$(initXML.find("plot").find("calc_stat").find("calc_vl1l2")).text()&&$("#revis_stat").val("vl1l2");try{$("#revis_stat").multiselect("refresh")}catch(b){}$("#revision_ac").prop("checked","TRUE"==$(initXML.find("plot").find("revis_stat").find("revision_ac")).text());$("#revision_run").prop("checked","TRUE"==$(initXML.find("plot").find("revis_stat").find("revision_run")).text())}else if("undefined"===typeof selected_mode||"stat"===selected_mode)$("input[name=statistics][value=calculations_statistics]").prop("checked",
!0),$("#aggregation_statistics ").hide(),$("#none").show();else if(-1!==listStatModeRatio.indexOf(a[0])){$("input[name=statistics][value=aggregation_statistics]").prop("checked",!0);$("#agg_stat").val("mode");try{$("#agg_stat").multiselect("refresh")}catch(b){}$("#aggregation_statistics").show();$("#calculations_statistics").hide();$("#revision_statistics").hide()}else $("input[name=statistics][value=calculations_statistics]").prop("checked",!0),$("#aggregation_statistics ").hide(),$("#none").show()}
function loadXMLEclv(){var a=$(initXML.find("plot").find("lines"));if(a){a=$(a.find("line"));for(var b=0;b<a.length;b++)lines.push({type:a[b].attributes.type.nodeValue,line_pos:a[b].attributes.line_pos.nodeValue,color:a[b].attributes.color.nodeValue,lty:a[b].attributes.lty.nodeValue,lwd:a[b].attributes.lwd.nodeValue})}if(0<initXML.find("plot").find("series1").children().length)for(a=initXML.find("plot").find("series1").children(),b=0;b<a.length;b++){var d=[];addSeriesVarHist();var e=$(a[b]).attr("name");
try{$("#series_var_y1_"+(b+1)).val(e).multiselect("refresh")}catch(c){}$(a[b]).find("val").each(function(){d.push($(this).text())});"fcst_init_beg"===e||"fcst_valid_beg"===e||"fcst_valid"===e||"fcst_init"===e?$("#series_var_val_y1_date_period_button_"+(b+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(b+1)).css("display","none");updateSeriesVarValHist(b+1,d)}else d=$("#series_var_y1_1").first().val(),updateSeriesVarValHist(1,d);try{$("#plot_stat").val(initXML.find("plot").find("plot_stat").text()).multiselect("refresh")}catch(c){}loadXMLStatistics();
updatePlotFix()}
function loadXMLRoc(){$("#event_equal").prop("checked","true"==$(initXML.find("plot").find("event_equal")).text()).trigger("change");var a=$(initXML.find("plot").find("lines"));if(a){a=$(a.find("line"));for(var b=0;b<a.length;b++)lines.push({type:a[b].attributes.type.nodeValue,line_pos:a[b].attributes.line_pos.nodeValue,color:a[b].attributes.color.nodeValue,lty:a[b].attributes.lty.nodeValue,lwd:a[b].attributes.lwd.nodeValue})}if(0<initXML.find("plot").find("series1").children().length)for(b=initXML.find("plot").find("series1").children(),
a=0;a<b.length;a++){var d=[];var e=$(b[a]).attr("name");try{$("#series_var_y1_"+(a+1)).val(e).multiselect("refresh")}catch(c){}$(b[a]).find("val").each(function(){d.push($(this).text())});"fcst_init_beg"===e||"fcst_valid_beg"===e||"fcst_valid"===e||"fcst_init"===e?$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","none");updateSeriesVarValHist(a+1,d);0===a&&($("#series_var_val_y1_1").multiselect({selectedList:100,
noneSelectedText:"Select value",click:function(){updateSeriesHist()},checkAll:function(){updateSeriesHist()},uncheckAll:function(){updateSeriesHist()}}),$("#series_var_y1_1").multiselect({multiple:!1,selectedList:1,header:!1,minWidth:"auto",click:function(a,b){$("#series_var_val_y1_date_period_start_"+(last_index+1)).empty();$("#series_var_val_y1_date_period_end_"+(last_index+1)).empty();"fcst_init_beg"==b.value||"fcst_valid_beg"==b.value||"fcst_valid"==b.value||"fcst_init"==b.value?$("#series_var_val_y1_date_period_button_1").css("display",
"block"):$("#series_var_val_y1_date_period_button_1").css("display","none");a=this.id.split("_");updateSeriesVarValHist(a[a.length-1],[])}}),$("#series_var_val_y1_date_period_button_1").button({icons:{primary:"ui-icon-check",secondary:"ui-icon-circlesmall-plus"},text:!1}).click(function(){$("#series_var_val_y1_date_period_1").dialog("open")}));a<b.length-1&&addSeriesVarHist()}else d=$("#series_var_y1_1").first().val(),updateSeriesVarValHist(1,[]);updatePlotFix();a=$(initXML.find("plot").find("roc_calc").find("roc_pct")).text();
b=$(initXML.find("plot").find("roc_calc").find("roc_ctc")).text();$("input[name=roc_type][value=pct]").prop("checked","TRUE"==a);$("input[name=roc_type][value=ctc]").prop("checked","TRUE"==b);$("#roc_type").buttonset("refresh");if(initXML.find("plot").find("summary_curve")&&0<initXML.find("plot").find("summary_curve").children().length){b=initXML.find("plot").find("summary_curve").children();for(a=0;a<b.length;a++)$("#summary_curve option[value='"+b[a]+"']").prop("selected",!0);try{$("#summary_curve").multiselect("refresh")}catch(c){}}a=
!0;initXML.find("plot").find("add_point_thresholds")&&(a=initXML.find("plot").find("add_point_thresholds").text());"true"===a?$("#add_point_thresholds").prop("checked",!0):$("#add_point_thresholds").prop("checked",!1)}
function loadXMLHist(){var a=$(initXML.find("plot").find("lines"));if(a){a=$(a.find("line"));for(var b=0;b<a.length;b++)lines.push({type:a[b].attributes.type.nodeValue,line_pos:a[b].attributes.line_pos.nodeValue,color:a[b].attributes.color.nodeValue,lty:a[b].attributes.lty.nodeValue,lwd:a[b].attributes.lwd.nodeValue})}a=$(initXML.find("plot").find("template")).text();"rhist.R_tmpl"===a?($("input[name=hist_line_type][value=rhist]").prop("checked",!0),changeFixedVarHist("rhist")):"phist.R_tmpl"===a?
($("input[name=hist_line_type][value=phist]").prop("checked",!0),changeFixedVarHist("phist")):"relp.R_tmpl"===a&&($("input[name=hist_line_type][value=relp]").prop("checked",!0),changeFixedVarHist("relp"));if(0<initXML.find("plot").find("series1").children().length)for(a=initXML.find("plot").find("series1").children(),b=0;b<a.length;b++){var d=[];addSeriesVarHist();var e=$(a[b]).attr("name");try{$("#series_var_y1_"+(b+1)).val(e).multiselect("refresh")}catch(c){}$(a[b]).find("val").each(function(){var a=
$(this).text().match(/\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/g);a&&0!==a.length||(a=$(this).text().split(":"));for(var b=0;b<a.length;b++)d.push(a[b])});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(b+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(b+1)).css("display","none");updateSeriesVarValHist(b+1,d)}else d=$("#series_var_1_1").first().val(),updateSeriesVarValHist(1,d);updatePlotFix();$("input[name=normalized_histogram][value="+
$(initXML.find("plot").find("normalized_histogram")).text()+"]").prop("checked",!0)}
function loadXMLRely(){var a=$(initXML.find("plot").find("lines"));if(a){a=$(a.find("line"));for(var b=0;b<a.length;b++)lines.push({type:a[b].attributes.type.nodeValue,line_pos:a[b].attributes.line_pos.nodeValue,color:a[b].attributes.color.nodeValue,lty:a[b].attributes.lty.nodeValue,lwd:a[b].attributes.lwd.nodeValue})}if(0<initXML.find("plot").find("series1").children().length)for(b=initXML.find("plot").find("series1").children(),a=0;a<b.length;a++){var d=[];addSeriesVarHist();var e=$(b[a]).attr("name");
try{$("#series_var_y1_"+(a+1)).val(e).multiselect("refresh")}catch(c){}$(b[a]).find("val").each(function(){d.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(a+1)).css("display","none");updateSeriesVarValHist(a+1,d)}else updateSeriesVarValHist(1,[]);updatePlotFix();if(initXML.find("plot").find("summary_curve")&&0<initXML.find("plot").find("summary_curve").children().length){b=
initXML.find("plot").find("summary_curve").children();for(a=0;a<b.length;a++)$("#summary_curve option[value='"+b[a]+"']").prop("selected",!0);try{$("#summary_curve").multiselect("refresh")}catch(c){}}a=!0;a=$(initXML.find("plot").find("rely_event_hist")).text();"TRUE"===a||"true"===a?$("#rely_event_hist").prop("checked",!0):$("#rely_event_hist").prop("checked",!1);initXML.find("plot").find("add_skill_line")&&(a=$(initXML.find("plot").find("add_skill_line")).text(),"true"===a?$("#add_skill_line").prop("checked",
!0):$("#add_skill_line").prop("checked",!1));initXML.find("plot").find("inset_hist")&&(a=$(initXML.find("plot").find("inset_hist")).text(),"true"===a?$("#inset_hist").prop("checked",!0):$("#inset_hist").prop("checked",!1));initXML.find("plot").find("add_noskill_line")&&(a=$(initXML.find("plot").find("add_noskill_line")).text(),"true"===a?$("#add_noskill_line").prop("checked",!0):$("#add_noskill_line").prop("checked",!1));initXML.find("plot").find("add_reference_line")&&(a=$(initXML.find("plot").find("add_reference_line")).text(),
"true"===a?$("#add_reference_line").prop("checked",!0):$("#add_reference_line").prop("checked",!1));loadXMLStatistics()}
function loadXMLEns(){var a=$(initXML.find("plot").find("lines"));if(a){a=$(a.find("line"));for(var b=0;b<a.length;b++)lines.push({type:a[b].attributes.type.nodeValue,line_pos:a[b].attributes.line_pos.nodeValue,color:a[b].attributes.color.nodeValue,lty:a[b].attributes.lty.nodeValue,lwd:a[b].attributes.lwd.nodeValue})}if(0<initXML.find("plot").find("series1").children().length)for(a=initXML.find("plot").find("series1").children(),b=0;b<a.length;b++){var d=[];0!=b&&addSeriesVarEns();var e=$(a[b]).attr("name");
try{$("#series_var_y1_"+(b+1)).val(e).multiselect("refresh")}catch(c){}$(a[b]).find("val").each(function(){d.push($(this).text())});"fcst_init_beg"==e||"fcst_valid_beg"==e||"fcst_valid"==e||"fcst_init"==e?$("#series_var_val_y1_date_period_button_"+(b+1)).css("display","block"):$("#series_var_val_y1_date_period_button_"+(b+1)).css("display","none");updateSeriesVarValEns(b+1,d)}else d=$("#series_var_y1_1").first().val(),updateSeriesVarValEns(1,d);updatePlotFix();a=$(initXML.find("plot").find("ensss_pts")).text();
$("#ensss_pts").val(a);a=$(initXML.find("plot").find("ensss_pts_disp")).text();$("input[name=ensss_pts_disp][value=true]").prop("checked","TRUE"==a||"true"==a);$("input[name=ensss_pts_disp][value=false]").prop("checked","FALSE"==a||"false"==a);updateSeriesEns()}
function updatePlotFix(){if(0<$(initXML.find("plot").find("plot_fix")).children().length)for(var a=$(initXML.find("plot").find("plot_fix")).children(),b=0;b<a.length;b++){var d=[],e=$(a[b]).attr("equalize");0<b&&addFixedVarHist();var c=$(a[b]).attr("name");try{$("#fixed_var_"+(b+1)).val(c).multiselect("refresh")}catch(f){}$(a[b]).find("set").find("val").each(function(){d.push($(this).text())});"fcst_init_beg"===c||"fcst_valid_beg"===c||"fcst_valid"===c||"fcst_init"===c?$("#fixed_var_val_date_period_button_"+
(b+1)).css("display","block"):$("#fixed_var_val_date_period_button_"+(b+1)).css("display","none");updateFixedVarValHist(b+1,d,e)}}
function updatePlotFixSeries(){if(0<$(initXML.find("plot").find("plot_fix")).children().length)for(var a=$(initXML.find("plot").find("plot_fix")).children(),b=0;b<a.length;b++){var d=[],e=$(a[b]).attr("equalize");addFixedVar();var c=$(a[b]).attr("name");try{$("#fixed_var_"+(b+1)).val(c).multiselect("refresh")}catch(f){}$(a[b]).find("set").find("val").each(function(){d.push($(this).text())});"fcst_init_beg"===c||"fcst_valid_beg"===c||"fcst_valid"===c||"fcst_init"===c?($("#fixed_var_val_date_period_button_"+
(b+1)).css("display","block"),$("#fixed_var_val_date_range_button_"+(b+1)).css("display","block")):($("#fixed_var_val_date_period_button_"+(b+1)).css("display","none"),$("#fixed_var_val_date_range_button_"+(b+1)).css("display","none"));updateFixedVarVal(b+1,d,e)}}
function loadXMLSeries(){$("#event_equal").prop("checked","true"==$(initXML.find("plot").find("event_equal")).text()).trigger("change");var a=$(initXML.find("plot").find("dep").find("dep1").find("stat")[0]).text();var b=isModeStat(a)?"mode":isMtdStat(a)?"mtd":"stat";updateIndyVar(b);try{$("#plot_data").val(b).multiselect("refresh")}catch(t){}updateForecastVariables();updateFixVar(b);try{$("#plot_stat").val(initXML.find("plot").find("plot_stat").text()).multiselect("refresh")}catch(t){}var d="Perf"===
currentTab||"Taylor"===currentTab||"Contour"===currentTab?1:2;for(var e,c=1;c<=d;c++){var f="y"+c,g=0;if(0<initXML.find("plot").find("dep").find("dep"+c).children().length){var k=initXML.find("plot").find("dep").find("dep"+c).children();for(a=0;a<k.length;a++){e=[];var l=$(k[a]).attr("name");if(0===g&&1===c)try{$("#fcst_var_"+f+"_"+(g+1)).val(l).multiselect("refresh")}catch(t){}else{addFcstVar(f);try{$("#fcst_var_"+f+"_"+(g+1)).val(l).multiselect("refresh")}catch(t){}}$(k[a]).find("stat").each(function(){e.push($(this).text())});
if("stat"===b)updateStats(f,g+1,e),g++;else if($.isArray(e))for(l=0;l<e.length;l++){if(0<l){addFcstVar(f);try{$("#fcst_var_"+f+"_"+(g+1)).val($(k[a]).attr("name")).multiselect("refresh")}catch(t){}}"mode"===b?updateMode(f,g+1,e[l]):updateMtd(f,g+1,e[l]);g++}else"mode"===b?updateMode(f,g+1,e):updateMtd(f,g+1,e),g++}}else"stat"===b?updateStats(f,1,""):"mode"===b?updateMode(f,1,""):updateMtd(f,1,"");if(0<initXML.find("plot").find("series"+c).children().length)for(g=initXML.find("plot").find("series"+
c).children(),a=0;a<g.length;a++){var p=[];var m=!1;l=$(g[a]).attr("name");if(0===a&&1===c)try{$("#series_var_"+f+"_"+(a+1)).val(l).multiselect("refresh")}catch(t){}else{"Taylor"===currentTab?addSeriesVarHist():"Perf"===currentTab?addSeriesVarPerf():addSeriesVar(f);try{$("#series_var_"+f+"_"+(a+1)).val(l).multiselect("refresh")}catch(t){}}$(g[a]).find("val").each(function(){var a=$(this).text().match(/\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/g);a&&0!==a.length||(a=$(this).text().split(":"));2<a.length&&
(m=!0);for(var b=0;b<a.length;b++)p.push(a[b])});"fcst_init_beg"==l||"fcst_valid_beg"==l||"fcst_valid"==l||"fcst_init"==l?($("#series_var_val_"+f+"_date_period_button_"+(a+1)).css("display","block"),$("#series_var_val_"+f+"_date_range_button_"+(a+1)).css("display","block")):($("#series_var_val_"+f+"_date_period_button_"+(a+1)).css("display","none"),$("#series_var_val_"+f+"_date_range_button_"+(a+1)).css("display","none"));updateSeriesVarVal(f,a+1,p);!0===m?$("#group_series_var_"+f+"_"+(a+1)).prop("checked",
!0):$("#group_series_var_"+f+"_"+(a+1)).prop("checked",!1)}else p=$("#series_var_"+f+"_1").first().val(),updateSeriesVarVal(f,1,p)}updatePlotFixSeries();$("#txtPlotCond").val(initXML.find("plot").find("plot_cond").text());try{$("#annotation").val(initXML.find("plot").find("annotation_template").text())}catch(t){}"mode"===b&&updateIndyVar(b);l=$(initXML.find("plot").find("indep")[0]).attr("name");try{$("#indy_var").val(l).multiselect("refresh")}catch(t){}"fcst_init_beg"===l||"fcst_valid_beg"===l||
"fcst_valid"===l||"fcst_init"===l?($("#date_period_button").css("display","block"),$("#date_range_button").css("display","block")):($("#date_period_button").css("display","none"),$("#date_range_button").css("display","none"));var q=[];indy_var_vals_to_attr={};$(initXML.find("plot").find("indep")[0]).find("val").each(function(){q.push($(this).text());var a={};a.label=$(this)[0].attributes.label.nodeValue;a.plot_val=$(this)[0].attributes.plot_val.nodeValue;indy_var_vals_to_attr[$(this).text()]=a});
0<q.length&&($("#indy_var_val").multiselect("option","indy_var_vals_to_attr",indy_var_vals_to_attr),populateIndyVarVal(q));loadXMLStatistics(e);a=$(initXML.find("plot").find("tmpl").find("listDiffSeries1")).text();0===a.length&&(a="list()");b=$(initXML.find("plot").find("tmpl").find("listDiffSeries2")).text();0===b.length&&(b="list()");if("list()"!==a)for(d=a.split("c("),a=1;a<d.length;a++)d[a]=d[a].replace(/\(/g,"").replace(/\)/g,"").replace(/"/g,""),seriesDiffY1.push(d[a]);if("list()"!==b)for(b=
b.split("c("),a=1;a<b.length;a++)b[a]=b[a].replace(")","").replace(")","").replace('"',""),seriesDiffY2.push(b[a]);if(a=$(initXML.find("plot").find("lines")))for(a=$(a.find("line")),b=0;b<a.length;b++)lines.push({type:a[b].attributes.type.nodeValue,line_pos:a[b].attributes.line_pos.nodeValue,color:a[b].attributes.color.nodeValue,lty:a[b].attributes.lty.nodeValue,lwd:a[b].attributes.lwd.nodeValue});"Perf"===currentTab?updateSeriesPerf():"Taylor"===currentTab?(updateSeriesHist(),a=$(initXML.find("plot").find("taylor_voc")).text().toLowerCase(),
$("input[name=taylor_voc][value="+a+"]").prop("checked",!0),b=$(initXML.find("plot").find("taylor_show_gamma")).text().toLowerCase(),$("input[name=taylor_show_gamma][value="+b+"]").prop("checked",!0),"true"===a?$("#is_show_gamma").buttonset("enable"):$("#is_show_gamma").buttonset("disable")):updateSeries()}
function loadXMLContour(){$("#event_equal").prop("checked","true"==$(initXML.find("plot").find("event_equal")).text()).trigger("change");$(initXML.find("plot").find("dep").find("dep1").find("stat")[0]).text();updateForecastVariables();try{$("#plot_stat").val(initXML.find("plot").find("plot_stat").text()).multiselect("refresh")}catch(f){}$.each(fix_var_value_to_title_stat_map,function(a,b){$("#fixed_var_1").append('<option value="'+a+'">'+b+"</option>")});var a=initXML.find("plot").find("dep").find("dep1").children(),
b=[];var d=$(a[0]).attr("name");try{$("#fcst_var_y1_1").val(d).multiselect("refresh")}catch(f){}$(a[0]).find("stat").each(function(){b.push($(this).text())});updateStats("y1",1,b);if(0<initXML.find("plot").find("series1").children().length){a=initXML.find("plot").find("series1").children();var e=[];d=$(a[0]).attr("name");try{$("#series_var_y1_1").val(d).multiselect("refresh")}catch(f){}$(a[0]).find("val").each(function(){var a=$(this).text().match(/\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/g);a&&0!==a.length||
(a=$(this).text().split(":"));for(var b=0;b<a.length;b++)e.push(a[b])});updateYvalueCountour(e)}updatePlotFixSeries();$("#txtPlotCond").val(initXML.find("plot").find("plot_cond").text());d=$(initXML.find("plot").find("indep")[0]).attr("name");try{$("#indy_var").val(d).multiselect("refresh")}catch(f){}"fcst_init_beg"===d||"fcst_valid_beg"===d||"fcst_valid"===d||"fcst_init"===d?$("#date_period_button").css("display","block"):$("#date_period_button").css("display","none");var c=[];indy_var_vals_to_attr=
{};$(initXML.find("plot").find("indep")[0]).find("val").each(function(){c.push($(this).text());var a={};a.label=$(this)[0].attributes.label.nodeValue;a.plot_val=$(this)[0].attributes.plot_val.nodeValue;indy_var_vals_to_attr[$(this).text()]=a});0<c.length&&($("#indy_var_val").multiselect("option","indy_var_vals_to_attr",indy_var_vals_to_attr),populateIndyVarVal(c));loadXMLStatistics(b);d=$(initXML.find("plot").find("tmpl").find("listDiffSeries1")).text();0===d.length&&(d="list()");if("list()"!==d)for(d=
d.split("c("),a=1;a<d.length;a++)d[a]=d[a].replace(/\(/g,"").replace(/\)/g,"").replace(/"/g,""),seriesDiffY1.push(d[a]);try{$("#contour_intervals").val(initXML.find("plot").find("contour_intervals").text())}catch(f){}try{$("#color_palette").val(initXML.find("plot").find("color_palette").text())}catch(f){}try{$("#add_color_bar").prop("checked","true"==$(initXML.find("plot").find("add_color_bar")).text())}catch(f){}try{$("#reverse_y").prop("checked","true"==$(initXML.find("plot").find("reverse_y")).text())}catch(f){}try{$("#reverse_x").prop("checked",
"true"==$(initXML.find("plot").find("reverse_x")).text())}catch(f){}try{$("#add_contour_overlay").prop("checked","true"==$(initXML.find("plot").find("add_contour_overlay")).text())}catch(f){}updateSeries()}
function requestDBUpdate(){$.ajax({async:!1,url:"servlet",type:"POST",dataType:"xml",processData:!1,contentType:"application/xml",data:'<?xml version="1.0" encoding="UTF-8"?><request><list_db_update></list_db_update></request>',error:function(a,b,d){},success:function(a){categories=$(a).find("groups").find("group");try{$("#listdt").jqGrid("GridUnload")}catch(b){}initPage()}})}
function updateFixVar(a){for(var b=fixed_var_indexes.slice(),d=0;d<b.length;d++)removeFixedVar("fixed_var_"+b[d]);var e=$(".remove_fixed_var").prop("id").split("remove_fixed_var_")[1];try{$("#fixed_var_val_"+e).multiselect("uncheckAll"),$("#fixed_var_val_"+e).multiselect("refresh")}catch(c){}fixed_var_indexes.push(parseInt(e));$("#fixed_var_"+e).empty();"Perf"===currentTab?$.each(perf_fixed_var_map,function(a,b){$("#fixed_var_"+e).append('<option value="'+a+'">'+b+"</option>")}):"stat"===a?$.each(fix_var_value_to_title_stat_map,
function(a,b){$("#fixed_var_"+e).append('<option value="'+a+'">'+b+"</option>")}):"mode"===a?$.each(fix_var_value_to_title_mode_map,function(a,b){$("#fixed_var_"+e).append('<option value="'+a+'">'+b+"</option>")}):$.each(fix_var_value_to_title_mtd_map,function(a,b){$("#fixed_var_"+e).append('<option value="'+a+'">'+b+"</option>")});try{$("#fixed_var_"+e).multiselect("uncheckAll"),$("#fixed_var_"+e).multiselect("refresh")}catch(c){}}
function updateIndyVar(a){$("#indy_var").empty();"stat"===a?$.each(indy_var_value_to_title_stat_map,function(a,d){$("#indy_var").append('<option value="'+a+'">'+d+"</option>")}):"mode"===a?$.each(indy_var_value_to_title_mode_map,function(a,d){$("#indy_var").append('<option value="'+a+'">'+d+"</option>")}):$.each(indy_var_value_to_title_mtd_map,function(a,d){$("#indy_var").append('<option value="'+a+'">'+d+"</option>")});try{$("#indy_var").multiselect("refresh")}catch(b){}$("#date_period").css("display",
"none")}String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)};
function createValDatePeriodDialog(a,b){var d=$("#"+a+"_date_period_start_"+b),e=$("#"+a+"_date_period_end_"+b);$("#"+a+"_date_period_"+b).dialog({width:295,autoOpen:!1,position:{my:"left bottom",at:"left top",of:"#"+a+"_date_period_button_"+b},resizable:!1,draggable:!1,buttons:{"Select values":function(){if(d.val()&&e.val()){var c=moment.tz(d.val(),"YYYY-MM-DD HH:mm:ss","UTC"),f=moment.tz(e.val(),"YYYY-MM-DD HH:mm:ss","UTC"),g=$("#"+a+"_date_period_by_"+b).val().trim(),k=$("#"+a+"_date_period_by_unit_"+
b).val();0===g.length&&(g=3600);g=parseFloat(g);"min"===k?g*=60:"hours"===k?g*=3600:"days"===k&&(g*=86400);var l;"fixed_var_val"===a?l=$(fixVarValResponse[b]).find("val"):"series_var_val_y1"===a?l=$(seriesY1VarValResponse[b]).find("val"):"series_var_val_y2"===a&&(l=$(seriesY2VarValResponse[b]).find("val"));for(c=c.clone();c<=f;){k=c.format("YYYY-MM-DD HH:mm:ss");for(var p=!1,m=0;m<l.length;m++)if($(l[m]).text()==k){p=!0;break}p&&$("#"+a+"_"+b).find('option[value="'+k+'"]').prop("selected",!0);c.add(g,
"seconds")}try{$("#"+a+"_"+b).multiselect("refresh")}catch(q){console.log(q)}"fixed_var_val"!==a&&("Series"===currentTab||"Box"===currentTab||"Bar"===currentTab?updateSeries():"Roc"===currentTab||"Rely"===currentTab||"Hist"===currentTab||"Eclv"===currentTab?updateSeriesHist():(currentTab="Ens_ss",updateSeriesEns()))}$(this).dialog("close")}},open:function(c,f){var g;"fixed_var_val"==a?g=$(fixVarValResponse[b]).find("val"):"series_var_val_y1"==a?g=$(seriesY1VarValResponse[b]).find("val"):"series_var_val_y2"==
a&&(g=$(seriesY2VarValResponse[b]).find("val"));d.empty();e.empty();for(c=0;c<g.length;c++){f=$(g[c]);var k=$("<option/>").attr("value",f.text()).text(f.text());f.text()==d.val()&&k.prop("selected",!0);d.append(k);f.text()==e.val()?k.prop("selected",!0):k.prop("selected",!1);e.append(k.clone())}e.find("option").last().prop("selected",!0);1<g.length&&(c=moment.tz($(g[0]).text(),"YYYY-MM-DD HH:mm:ss","UTC"),g=moment.tz($(g[1]).text(),"YYYY-MM-DD HH:mm:ss","UTC"),g=moment.duration({from:c,to:g}),$("#"+
a+"_date_period_by_"+b).val(g.as("hours")))}})}
function createDatePeriodDialog(){var a=$("#date_period_start"),b=$("#date_period_end"),d=$("#indy_var_val");$("#date_period_dialog").dialog({width:295,autoOpen:!1,position:{my:"left bottom",at:"left top",of:"#date_period_button"},resizable:!1,draggable:!1,buttons:{"Select values":function(){if(a.val()&&b.val()){var e=moment.tz(a.val(),"YYYY-MM-DD HH:mm:ss","UTC"),c=moment.tz(b.val(),"YYYY-MM-DD HH:mm:ss","UTC"),f=$("#date_period_by").val().trim(),g=$("#date_period_by_unit").val();0===f.length&&(f=
3600);f=parseInt(f);"min"===g?f*=60:"hours"===g?f*=3600:"days"===g&&(f*=86400);g=$(previousIndVarValResponse).find("val");for(e=e.clone();e<=c;){for(var k=e.format("YYYY-MM-DD HH:mm:ss"),l=!1,p=0;p<g.length;p++)if($(g[p]).text()===k){l=!0;break}l&&d.find('option[value="'+k+'"]').prop("selected",!0);e.add(f,"seconds")}try{d.multiselect("refresh")}catch(m){}}$(this).dialog("close")}},open:function(e,c){e=d.val();null==e&&(e=[]);populateIndyVarVal(e);e=$(previousIndVarValResponse).find("val");c=a.val();
var f=b.val();a.empty();b.empty();for(var g=0;g<e.length;g++){var k=$(e[g]),l=$("<option/>").attr("value",k.text()).text(k.text());k.text()==c&&l.prop("selected",!0);a.append(l);k.text()===f?l.prop("selected",!0):l.prop("selected",!1);b.append(l.clone())}b.find("option").last().prop("selected",!0);1<e.length&&(c=moment.tz($(e[0]).text(),"YYYY-MM-DD HH:mm:ss","UTC"),e=moment.tz($(e[1]).text(),"YYYY-MM-DD HH:mm:ss","UTC"),e=moment.duration({from:c,to:e}),$("#date_period_by").val(e.as("hours")))}})}
function myelem(a,b){b=document.createElement("input");b.type="text";b.value=a;b.className="cp-basic";b.style.width="60px";$(b).colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),showOn:"both",buttonColorize:!0,buttonImageOnly:!0});return b}function myvalue(a,b,d){if("get"===b)return $(a).val();"set"===b&&$("input",a).val(d)}"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0===this.indexOf(a)});
function colorDisplayFmatter(a,b,d){return'<input id="color_'+d.id+'" type="text" value="'+d.color+'" size="8" style="background-color:'+d.color+';">'}function colorDisplayUnmatter(a,b,d){a=jQuery("input",d).css("background-color").match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);a[0]="#";for(b=1;3>=b;++b)a[b]=parseInt(a[b]).toString(16),1===a[b].length&&(a[b]="0"+a[b]);return a.join("")}
function querySt(a){for(var b=window.location.href.split(/[\?&]+/),d=0;d<b.length;d++){var e=b[d].split("=");if(e[0]===a)return e[1]}}function downloadPlot(a){a='<input type="hidden" name="plot" value="'+resultName+'" />';a+='<input type="hidden" name="type" value="'+currentPlotTab+'" />';$('<form action="download" method="get">'+a+"</form>").appendTo("body").submit().remove()}
function viewImage(a){boxID+=1;window_center+=20;window_top+=20;$("<div>").dialog({height:"655",width:"815",autoOpen:!1,resizable:!0,closeOnEscape:!0,focus:!0,dialogClass:"dialog-box-"+boxID,title:a,position:{my:"center+"+window_center+" top+"+window_top,at:"center top",of:window},close:function(a){$(this).empty();$(this).dialog("destroy");window_center-=20;window_top-=20},open:function(b){$(this).html('<img src="'+urlOutput+"plots/plot_"+a+".png?"+(new Date).getTime()+'" onError="this.src=\'images/no_image.png\';"/>')}}).dialog("open")}
function updateResult(a){resultName=a;$("#plot_display_inner_header").text(resultName.replace("plot_",""));$("#plot_image").empty();$.get(urlOutput+"plots/"+resultName+".html",function(a){$("#plot_image").append(a)}).fail(function(){var a=$("<img>");a.attr("width","100%");a.attr("height","100%");a.appendTo("#plot_image");a.error(function(){$(this).attr("src","images/no_image.png")}).attr("src",urlOutput+"plots/"+resultName+".png?"+(new Date).getTime())});$.ajax({type:"GET",url:urlOutput+"xml/"+resultName+
".xml",dataType:"xml",success:function(a){a="msie"===jQuery.browser?a.xml:(new XMLSerializer).serializeToString(a);document.getElementById("plot_xml").innerHTML=formatXml(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />")},error:function(){document.getElementById("plot_xml").innerHTML=""}});$.ajax({type:"GET",url:urlOutput+"xml/"+resultName+".sql",dataType:"text",contentType:"text/plain",mimeType:"text",complete:function(a){document.getElementById("plot_sql").innerHTML=
a.responseText.replace(/\n/g,"<br />")},error:function(){document.getElementById("plot_sql").innerHTML=""}});$.ajax({type:"GET",url:urlOutput+"scripts/"+resultName+".R",dataType:"text",contentType:"text/plain",mimeType:"text",complete:function(a){document.getElementById("r_script").innerHTML=a.responseText.replace(/\n/g,"<br />")},error:function(){document.getElementById("r_script").innerHTML=""}});$.ajax({type:"GET",url:urlOutput+"xml/"+resultName+".log",dataType:"text",contentType:"text/plain",
mimeType:"text",complete:function(a){document.getElementById("plot_log").innerHTML=a.responseText.replace(/\n/g,"<br />")},error:function(){document.getElementById("plot_log").innerHTML=""}});$("#ui-tabs-1").empty();$("#r_data_url").prop("href",urlOutput+"data/"+resultName+".data");$("#y1_points_url").prop("href",urlOutput+"data/"+resultName+".points1");$("#y2_points_url").prop("href",urlOutput+"data/"+resultName+".points2")}
function initPage(){$("#uncheck_all").click(function(){$("input[name='multiselect_database']").each(function(){this.checked=!1});var a=document.createTextNode("Select database"),b=document.getElementById("categories1").childNodes[0];b.replaceChild(a,b.childNodes[0]);updatePages()});outerLayout=$("body").layout({name:"outer",north__paneSelector:"#header",south__paneSelector:"#series_formatting",north__closable:!1,north__resizable:!1,north__spacing_open:0,north__size:55,east__paneSelector:"#plot_display",
center__paneSelector:"#plot_config",south__minSize:112,east__size:"50%",east__minSize:100,east__maxSize:800,east__onresize:"innerLayout.resizeAll",resizeWhileDragging:!0,east__closable:!1,west__resizable:!0,west__spacing_closed:15,west__togglerLength_closed:20,west__togglerAlign_closed:"top",west__paneSelector:"#history",west__initClosed:!0,west__togglerLength_open:0,west__initClose:!0,west__togglerTip_open:"Close History",west__togglerTip_closed:"Open History",west__togglerClass:"history-toggler",
west__fxName:"slide",autoBindCustomButtons:!0,south__togglerLength_open:10,west__onopen_start:function(){refreshHistory()},useStateCookie:!1});$("#plot_display_inner").tabs({heightStyle:"content",beforeActivate:function(a,b){currentPlotTab=b.newPanel.attr("aria-labelledby")},load:function(a,b){a=$("<pre/>").text(b.panel.text());b.panel.empty();b.panel.append(a)},create:function(a,b){}});$("#tab-south").tabs({collapsible:!1});innerLayout=$("#plot_display").layout({name:"inner",closable:!1,center__paneSelector:"#plot_display_inner",
center__size:"70%",center__spacing_closed:20,center__togglerLength_closed:20,center__resizable:!0,center__closable:!1,center__togglerAlign_closed:"top",center__minSize:0,resizeWhileDragging:!0,south__togglerAlign_closed:"top",south__fxName:"slide",south__initClosed:!1,south__initClose:!0,south__togglerClass:"history-toggler",south__spacing_closed:20,south__togglerLength_closed:20,south__size:"30%",south__paneSelector:"#tab-south",south__resizable:!0,south__minSize:0,south__closable:!0,autoBindCustomButtons:!0});
$("body").on("resize",function(){$("#plot_display_inner").tabs("refresh")});$("<span></span>").attr("id","west-closer").prependTo("body > .ui-layout-west");outerLayout.addCloseBtn("#west-closer","west");$("#listdt").jqGrid({datatype:"local",autowidth:!0,shrinkToFit:!0,colNames:"ID;#;Y axis;Hide;Title;Conf Interval;Line Color;Point Symbol;Series Line Type;Line Type;Line Width;Show Significant;Connect Across NA;Legend Text".split(";"),colModel:[{name:"id",index:"id",hidden:!0},{name:"order",width:10,
index:"order",sortable:!1},{name:"y_axis",width:30,index:"y_axis",align:"center"},{name:"hide",index:"hide",width:30,align:"center",editable:!0,edittype:"checkbox",editoptions:{value:"Yes:No"}},{name:"title",index:"title",width:300},{name:"plot_ci",index:"plot_ci",width:70,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"none:none;boot:boot;std:std;met_prm:met_prm;met_boot:met_boot"},align:"center"},{name:"color",index:"color",width:40,editable:!0,edittype:"custom",editoptions:{custom_element:myelem,
custom_value:myvalue},formatter:colorDisplayFmatter,unformat:colorDisplayUnmatter,align:"center"},{name:"pch",index:"pch",editable:!0,width:70,align:"center",edittype:"select",formatter:"select",editoptions:{value:"20:Small circle;19:Circle;15:Square;17:Triangle;18:Rhombus;1:Ring"}},{name:"type",index:"type",sortable:!1,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"p:points;l:lines;o:overplotted;b:joined lines;s:stair steps;h:histogram-like;n:nothing"},width:50,align:"center"},
{name:"lty",index:"lty",sortable:!1,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"1:solid;2:dashed;3:dotted;4:dot-dash;5:long dash;6:long short"},width:70,align:"center"},{name:"lwd",index:"lwd",sortable:!1,editable:!0,sorttype:"int",width:40,align:"center"},{name:"show_signif",index:"hide",width:30,align:"center",editable:!0,edittype:"checkbox",editoptions:{value:"Yes:No"}},{name:"con_series",index:"con_series",sortable:!1,editable:!0,edittype:"select",formatter:"select",editoptions:{value:"0:No;1:Yes"},
width:30,align:"center"},{name:"legend",index:"legend",sortable:!1,width:150,align:"left",editable:!0}],rowNum:-1,height:"auto",pager:"#pagerdt",pginput:!1,pgtext:!1,pgbuttons:!1,viewrecords:!0,caption:"Series Formatting",cmTemplate:{title:!1},cellEdit:!0,hoverrows:!1,url:"clientArray",cellsubmit:"clientArray",afterInsertRow:function(a,b){$("#color_"+b.id).colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),altField:"#color_"+b.id})},beforeEditCell:function(a,b,c,
d,e){lastSelRow=d;lastSelCol=e}});$("#listdt").jqGrid("navGrid","#pagerdt",{edit:!1,add:!1,del:!1,search:!1,refresh:!1});var a=$("#addDiffCurveDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{"Create Derived Curve":function(){var b=!1,c=$("input:radio[name=yAxisDiff]:checked").val(),d=jQuery("input[name=derive_oper]:checked").val();-1!==c.indexOf("1")?$("#series1Y1").val()&&$("#series2Y1").val()&&(seriesDiffY1.push($("#series1Y1").val()+","+$("#series2Y1").val()+","+d),
b=!0):$("#series1Y2").val()&&$("#series2Y2").val()&&(seriesDiffY2.push($("#series1Y2").val()+","+$("#series2Y2").val()+","+d),b=!0);a.dialog("close");b&&(updateSeries(),$("#event_equal").prop("checked",!0).trigger("change"))},Cancel:function(){a.dialog("close")}},open:function(){$("input[name=derive_oper][value=DIFF]").prop("checked",!0);for(var a=$("#listdt").jqGrid("getRowData"),b=0;b<a.length;b++)$("#listdt").jqGrid("setCell",a[b].id,"order",b+1),$("#listdt").jqGrid("getLocalRow",a[b].id).order=
b+1;var c=$("#plot_data").multiselect("getChecked").val();$("#series1Y2").empty();$("#series1Y1").empty();$("#series2Y2").empty();$("#series2Y1").empty();$("#y1AxisDiff").prop("checked",!0);$("#y2AxisDiff").removeAttr("checked");$("#series1Y2").prop("disabled",!0);$("#series2Y2").prop("disabled",!0);$("#series1Y1").removeProp("disabled");$("#series2Y1").removeProp("disabled");$("#y2AxisDiff").removeProp("disabled");$("#y1AxisDiff").removeProp("disabled");series1Names=[];series2Names=[];for(b=0;b<
a.length;b++){var d=!1;if(0!=a[b].title.indexOf("DIFF")&&0!=a[b].title.indexOf("RATIO")&&0!=a[b].title.indexOf("SS")&&0!=a[b].title.indexOf("ETB"))if("mode"==c){var e=a[b].title.split(" ");-1<listStatModeRatio.indexOf(e[e.length-1])&&(d=!0)}else d=!0;d&&(-1!==a[b].y_axis.indexOf("2")?($("#series1Y2").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),$("#series2Y2").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),series2Names.push(a[b].title)):($("#series1Y1").append($("<option></option>").attr("value",
a[b].title).text(a[b].title)),$("#series2Y1").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),series1Names.push(a[b].title)))}0<$("#series1Y2 option").length&&0<$("#series1Y1 option").length?createNewDerivedSeriesName(1):(0==$("#series1Y2 option").length&&($("#y2AxisDiff").attr("disabled",!0),createNewDerivedSeriesName(1)),0==$("#series1Y1 option").length&&($("#y1AxisDiff").attr("disabled",!0),$("#y1AxisDiff").removeAttr("checked"),$("#y2AxisDiff").prop("checked",!0),$("#series1Y2").removeAttr("disabled"),
$("#series2Y2").removeAttr("disabled"),$("#series1Y1").attr("disabled",!0),$("#series2Y1").attr("disabled",!0),createNewDerivedSeriesName(2)))},close:function(){}}),b=$("#addLineDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{"Add line":function(){var a=$("input[name='line_type']:checked").val(),c=$("#line_pos").val();lines.push({type:a,line_pos:c});b.dialog("close");"Hist"===currentTab||"Roc"===currentTab||"Rely"===currentTab||"Eclv"===currentTab?updateSeriesHist():
"Ens_ss"===currentTab?updateSeriesEns():updateSeries()},Cancel:function(){b.dialog("close")}},open:function(){$("input[name=derive_oper][value=DIFF]").prop("checked",!0);for(var a=$("#listdt").jqGrid("getRowData"),b=0;b<a.length;b++)$("#listdt").jqGrid("setCell",a[b].id,"order",b+1),$("#listdt").jqGrid("getLocalRow",a[b].id).order=b+1;var c=$("#plot_data").multiselect("getChecked").val();$("#series1Y2").empty();$("#series1Y1").empty();$("#series2Y2").empty();$("#series2Y1").empty();$("#y1AxisDiff").prop("checked",
!0);$("#y2AxisDiff").removeAttr("checked");$("#series1Y2").prop("disabled",!0);$("#series2Y2").prop("disabled",!0);$("#series1Y1").removeProp("disabled");$("#series2Y1").removeProp("disabled");$("#y2AxisDiff").removeProp("disabled");$("#y1AxisDiff").removeProp("disabled");series1Names=[];series2Names=[];for(b=0;b<a.length;b++){var d=!1;if(0!=a[b].title.indexOf("DIFF")&&0!=a[b].title.indexOf("RATIO")&&0!=a[b].title.indexOf("SS")&&0!=a[b].title.indexOf("ETB"))if("mode"==c){var e=a[b].title.split(" ");
-1<listStatModeRatio.indexOf(e[e.length-1])&&(d=!0)}else d=!0;d&&(-1!==a[b].y_axis.indexOf("2")?($("#series1Y2").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),$("#series2Y2").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),series2Names.push(a[b].title)):($("#series1Y1").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),$("#series2Y1").append($("<option></option>").attr("value",a[b].title).text(a[b].title)),series1Names.push(a[b].title)))}0<
$("#series1Y2 option").length&&0<$("#series1Y1 option").length?createNewDerivedSeriesName(1):(0==$("#series1Y2 option").length&&($("#y2AxisDiff").attr("disabled",!0),createNewDerivedSeriesName(1)),0==$("#series1Y1 option").length&&($("#y1AxisDiff").attr("disabled",!0),$("#y1AxisDiff").removeAttr("checked"),$("#y2AxisDiff").prop("checked",!0),$("#series1Y2").removeAttr("disabled"),$("#series2Y2").removeAttr("disabled"),$("#series1Y1").attr("disabled",!0),$("#series2Y1").attr("disabled",!0),createNewDerivedSeriesName(2)))},
close:function(){}});$("#listdt").jqGrid("navButtonAdd","#pagerdt",{caption:"Add Derived Curve",title:"Add Derived Curve",buttonicon:"ui-icon-plus",onClickButton:function(){"Roc"===currentTab||"Rely"===currentTab||"Ens_ss"===currentTab||"Perf"===currentTab||"Hist"===currentTab||"Eclv"===currentTab||"Contour"===currentTab?$("#unavailableDiffCurveDialogForm").dialog("open"):1<$("#listdt").jqGrid("getRowData").length?a.dialog("open"):$("#incorrectDiffCurveDialogForm").dialog("open")}}).jqGrid("navButtonAdd",
"#pagerdt",{caption:"Remove Derived Curve",title:"Remove Derived Curve",buttonicon:"ui-icon-trash",onClickButton:function(){var a=$(this).jqGrid("getGridParam","selrow");if(a){var b=$(this).getRowData(a);if(b.title.startsWith("DIFF")||b.title.startsWith("RATIO")||b.title.startsWith("SS")||b.title.startsWith("ETB")){$(this).jqGrid("delRowData",a);$("#1","#gbox_listdt").css({display:""});a=b.title.slice(0,-1);if(b.title.startsWith("DIFF")){var c=a.replace("DIFF (","").split('"-"');for(a=0;a<c.length;a++)c[a]=
c[a].replace('"',"");a=c.join()+",DIFF"}else if(b.title.startsWith("RATIO")){c=a.replace("RATIO (","").split('"/"');for(a=0;a<c.length;a++)c[a]=c[a].replace('"',"");a=c.join()+",RATIO"}else if(b.title.startsWith("SS")){c=a.replace("SS (","").split('"and"');for(a=0;a<c.length;a++)c[a]=c[a].replace('"',"");a=c.join()+",SS"}else{c=a.replace("ETB (","").split('"and"');for(a=0;a<c.length;a++)c[a]=c[a].replace('"',"");a=c.join()+",ETB"}"Y1"==b.y_axis?(b=seriesDiffY1.indexOf(a),-1<b&&seriesDiffY1.splice(b,
1)):(b=seriesDiffY2.indexOf(a),-1<b&&seriesDiffY2.splice(b,1));b=$("#listdt").jqGrid("getRowData");for(a=0;a<b.length;a++)$("#listdt").jqGrid("setCell",b[a].id,"order",a+1),$("#listdt").jqGrid("getLocalRow",b[a].id).order=a+1}else b="#alertmod_"+this.p.id,$.jgrid.viewModal(b,{gbox:"#gbox_"+$.jgrid.jqID(this.p.id),jqm:!0}),$(b).find("#alertcnt_listdt").empty().append("<div>This is not a derived curve</div>"),$(b).find(".ui-jqdialog-titlebar-close").focus()}else b="#alertmod_"+this.p.id,$.jgrid.viewModal(b,
{gbox:"#gbox_"+$.jgrid.jqID(this.p.id),jqm:!0}),$(b).find(".ui-jqdialog-titlebar-close").focus()}}).jqGrid("navButtonAdd","#pagerdt",{caption:"Add Line",title:"Add Line",buttonicon:"ui-icon-plus",onClickButton:function(){"Perf"===currentTab||"Taylor"===currentTab||"Contour"===currentTab?$("#unavailableLineDialogForm").dialog("open"):b.dialog("open")}}).jqGrid("navButtonAdd","#pagerdt",{caption:"Remove Line",title:"Remove Line",buttonicon:"ui-icon-trash",onClickButton:function(){var a=$(this).jqGrid("getGridParam",
"selrow");if(a){var b=$(this).getRowData(a);if(b.title.startsWith("vert_line")||b.title.startsWith("horiz_line")){$(this).jqGrid("delRowData",a);a=null;for(var c=0;c<lines.length;c++){var d=b.title,e=d.split("(")[0];d=d.split("(")[1].split(")")[0];if(lines[c].type===e&&lines[c].line_pos===d){a=c;break}}null!==a&&lines.splice(a,1)}}else b="#alertmod_"+this.p.id,$.jgrid.viewModal(b,{gbox:"#gbox_"+$.jgrid.jqID(this.p.id),jqm:!0}),$(b).find(".ui-jqdialog-titlebar-close").focus()}}).jqGrid("navButtonAdd",
"#pagerdt",{caption:"Apply defaults",title:"Apply defaults",buttonicon:"ui-icon-transferthick-e-w",onClickButton:function(){alert("defaults..")}});$("#listdt").setGridWidth($(window).width()-20);$("#unavailableDiffCurveDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}});$("#incorrectDiffCurveDialogForm").dialog({autoOpen:!1,height:"auto",width:"auto",modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}});$(window).bind("resize",
function(){$("#listdt").setGridWidth($(window).width()-20)}).trigger("resize");$("#listdt").jqGrid("sortableRows",{update:function(a,b){a=$("#listdt").jqGrid("getRowData");for(b=0;b<a.length;b++)$("#listdt").jqGrid("setCell",a[b].id,"order",b+1),$("#listdt").jqGrid("getLocalRow",a[b].id).order=b+1}});$("#pagerdt_left table.navtable tbody tr").append('<td><div ><input type="checkbox"  style="margin:0 4px;" id="seriesLock"/><label for="seriesLock">Lock Formatting</label></div></td>');$("#seriesLock").change(function(){$(this).is(":checked")?
$(this).attr("checked","checked"):$(this).removeAttr("checked")});$("#generate_plot").button({}).click(function(){sendXml()});var d=$("#upload_file_dialog").dialog({modal:!0,autoOpen:!1,buttons:{OK:function(){$("#formUpload").submit()},Cancel:function(){d.dialog("close")}}});$("#load_xml").button({}).click(function(){d.dialog("open")});$("#reload_databases").button({}).click(function(){requestDBUpdate()});$("input[name=show_history_choice][value=show_history_success]").prop("checked",!0);$("#show_history_choice").buttonset();
$("#grid_col").colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),showOn:"focus alt click",altField:"#grid_col"});$("#grid_col").colorpicker("setColor","#CCCCCC");$("#caption_col").colorpicker({parts:"header map bar hex rgb alpha preview swatches footer".split(" "),showOn:"focus alt click",altField:"#caption_col"});$("#caption_col").colorpicker("setColor","#333333");$("#error_message").dialog({modal:!0,autoOpen:!1,buttons:{Ok:function(){$(this).dialog("close")}}});
$("#r_error_message").dialog({modal:!1,autoOpen:!1,height:360,buttons:{Ok:function(){$(this).dialog("close")}}});$("#refresh_history").button({icons:{primary:"ui-icon-refresh"},text:!1}).click(function(){refreshHistory()});$.ajaxSetup({beforeSend:function(){$("#modal").css("display","block");$("#fade").css("display","block")},complete:function(){$("#modal").css("display","none");$("#fade").css("display","none")}});$("#download_plot").button({icons:{primary:"ui-icon-disk"},text:!1}).click(function(){downloadPlot()});
$("#reset_formatting").button({icons:{primary:"ui-icon-arrowrefresh-1-w"},text:!1}).click(function(){resetFormatting()});$("#plot_image").click(function(){"IMG"===document.getElementById("plot_image").firstChild.tagName&&viewImage(resultName.replace("plot_",""))});var e=0;if(null!=initXML){var c=initXML.find("plot").find("template")[0].innerHTML;"series_plot.R_tmpl"===c||"revision_series_plot.R_tmpl"===c?currentTab="Series":"box_plot.R_tmpl"===c||"revision_box_plot.R_tmpl"===c?currentTab="Box":"bar_plot.R_tmpl"===
c?currentTab="Bar":"rhist.R_tmpl"===c||"phist.R_tmpl"===c||"relp.R_tmpl"===c?currentTab="Hist":"roc.R_tmpl"===c?currentTab="Roc":"eclv.R_tmpl"===c?currentTab="Eclv":"rely.R_tmpl"===c?currentTab="Rely":"ens_ss.R_tmpl"===c?currentTab="Ens_ss":"performance.R_tmpl"===c?currentTab="Perf":"taylor_plot.R_tmpl"===c?currentTab="Taylor":"contour_plot.R_tmpl"===c&&(currentTab="Contour");var f=$("#plot_config").find("a");for(c=0;c<f.length;c++)if(f[c].text===currentTab){e=c;break}}$("#plot_config").tabs({active:e,
beforeActivate:function(a,b){a=b.oldTab.attr("aria-controls");$("#"+a).empty();cleanUp();currentTab=b.newTab.text()},beforeLoad:function(a,b){$.ajaxSetup({cache:!0});b.jqXHR.error(function(){b.panel.html("Couldn't load this tab. We'll try to fix this as soon as possible. If this wouldn't be a demo.")})}});null!=initXML?($("#plot_title").val($(initXML.find("plot").find("tmpl").find("title")).text()),$("#x_label_title").val($(initXML.find("plot").find("tmpl").find("x_label")).text()),$("#y1_label_title").val($(initXML.find("plot").find("tmpl").find("y1_label")).text()),
$("#y2_label_title").val($(initXML.find("plot").find("tmpl").find("y2_label")).text()),$("#caption").val($(initXML.find("plot").find("tmpl").find("caption")).text()),$(initXML.find("plot").find("tmpl").find("job_title"))&&$("#job_title").val($(initXML.find("plot").find("tmpl").find("job_title")).text()),$(initXML.find("plot").find("tmpl").find("keep_revisions"))&&$("#keep_revisions").prop("checked","true"===$(initXML.find("plot").find("tmpl").find("keep_revisions")).text()),$("#is_python").prop("checked",
"Python"==$(initXML.find("plot").find("execution_type")).text()),$("#vert_plot").prop("checked","true"==$(initXML.find("plot").find("vert_plot")).text()),$("#x_reverse").prop("checked","true"==$(initXML.find("plot").find("x_reverse")).text()),$("#num_stats").prop("checked","true"==$(initXML.find("plot").find("num_stats")).text()),$("#grid_on").prop("checked","true"==$(initXML.find("plot").find("grid_on")).text()),$("#sync_axes").prop("checked","true"==$(initXML.find("plot").find("sync_axes")).text()),
$("#dump_points1").prop("checked","true"==$(initXML.find("plot").find("dump_points1")).text()),$("#dump_points2").prop("checked","true"==$(initXML.find("plot").find("dump_points2")).text()),$("#indy1_stag").prop("checked","true"==$(initXML.find("plot").find("indy1_stag")).text()),$("#indy2_stag").prop("checked","true"==$(initXML.find("plot").find("indy2_stag")).text()),$("#varianceInflationFactor").prop("checked","true"===$(initXML.find("plot").find("varianceinflationfactor")).text()),$("#ci_alpha").val($(initXML.find("plot").find("ci_alpha")).text()),
$("#eqbound_low").val($(initXML.find("plot").find("eqbound_low")).text()),$("#eqbound_high").val($(initXML.find("plot").find("eqbound_high")).text()),$("#plot_type").val($(initXML.find("plot").find("plot_type")).text()),$("#plot_height").val($(initXML.find("plot").find("plot_height")).text()),$("#plot_width").val($(initXML.find("plot").find("plot_width")).text()),$("#plot_units").val($(initXML.find("plot").find("plot_units")).text()),$("#cex").val($(initXML.find("plot").find("cex")).text()),$("#plot_res").val($(initXML.find("plot").find("plot_res")).text()),
c=$(initXML.find("plot").find("mar")).text().replace("c(","").replace(")","").split(","),$("#mar_bottom").val(c[0]),$("#mar_left").val(c[1]),$("#mar_top").val(c[2]),$("#mar_right").val(c[3]),c=$(initXML.find("plot").find("mgp")).text().replace("c(","").replace(")","").split(","),$("#mgp_title").val(c[0]),$("#mgp_labels").val(c[1]),$("#mgp_line").val(c[2]),$("#title_align").val($(initXML.find("plot").find("title_align")).text()),$("#title_offset").val($(initXML.find("plot").find("title_offset")).text()),
$("#title_size").val($(initXML.find("plot").find("title_size")).text()),$("#title_weight").val($(initXML.find("plot").find("title_weight")).text()),$("#grid_lty").val($(initXML.find("plot").find("grid_lty")).text()),$("#grid_lwd").val($(initXML.find("plot").find("grid_lwd")).text()),$("#grid_col").colorpicker("setColor",$(initXML.find("plot").find("grid_col")).text()),$("#grid_x").val($(initXML.find("plot").find("grid_x")).text()),$("#plot_cmd").val($(initXML.find("plot").find("plot_cmd")).text()),
$("#xlab_align").val($(initXML.find("plot").find("xlab_align")).text()),$("#xlab_offset").val($(initXML.find("plot").find("xlab_offset")).text()),$("#xlab_size").val($(initXML.find("plot").find("xlab_size")).text()),$("#xlab_weight").val($(initXML.find("plot").find("xlab_weight")).text()),$("#xtlab_horiz").val($(initXML.find("plot").find("xtlab_horiz")).text()),$("#xtlab_perp").val($(initXML.find("plot").find("xtlab_perp")).text()),$("#xtlab_size").val($(initXML.find("plot").find("xtlab_size")).text()),
$("#xtlab_freq").val($(initXML.find("plot").find("xtlab_freq")).text()),$("#xtlab_orient").val($(initXML.find("plot").find("xtlab_orient")).text()),$("#x2lab_align").val($(initXML.find("plot").find("x2lab_align")).text()),$("#x2lab_offset").val($(initXML.find("plot").find("x2lab_offset")).text()),$("#x2lab_size").val($(initXML.find("plot").find("x2lab_size")).text()),$("#x2lab_weight").val($(initXML.find("plot").find("x2lab_weight")).text()),$("#x2tlab_horiz").val($(initXML.find("plot").find("x2tlab_horiz")).text()),
$("#x2tlab_perp").val($(initXML.find("plot").find("x2tlab_perp")).text()),$("#x2tlab_size").val($(initXML.find("plot").find("x2tlab_size")).text()),$("#x2tlab_orient").val($(initXML.find("plot").find("x2tlab_orient")).text()),$("#ylab_align").val($(initXML.find("plot").find("ylab_align")).text()),$("#ylab_offset").val($(initXML.find("plot").find("ylab_offset")).text()),$("#ylab_size").val($(initXML.find("plot").find("ylab_size")).text()),$("#ylab_weight").val($(initXML.find("plot").find("ylab_weight")).text()),
$("#ytlab_horiz").val($(initXML.find("plot").find("ytlab_horiz")).text()),$("#ytlab_perp").val($(initXML.find("plot").find("ytlab_perp")).text()),$("#ytlab_size").val($(initXML.find("plot").find("ytlab_size")).text()),$("#ytlab_orient").val($(initXML.find("plot").find("ytlab_orient")).text()),c=$(initXML.find("plot").find("y1_lim")).text().replace("c(","").replace(")","").split(","),$("#y1_lim_min").val(c[0]),$("#y1_lim_max").val(c[1]),$("#y1_bufr").val($(initXML.find("plot").find("y1_bufr")).text()),
c=$(initXML.find("plot").find("x1_lim")).text().replace("c(","").replace(")","").split(","),$("#x1_lim_min").val(c[0]),$("#x1_lim_max").val(c[1]),$("#y2lab_align").val($(initXML.find("plot").find("y2lab_align")).text()),$("#y2lab_offset").val($(initXML.find("plot").find("y2lab_offset")).text()),$("#y2lab_size").val($(initXML.find("plot").find("y2lab_size")).text()),$("#y2lab_weight").val($(initXML.find("plot").find("y2lab_weight")).text()),$("#y2tlab_horiz").val($(initXML.find("plot").find("y2tlab_horiz")).text()),
$("#y2tlab_perp").val($(initXML.find("plot").find("y2tlab_perp")).text()),$("#y2tlab_size").val($(initXML.find("plot").find("y2tlab_size")).text()),$("#y2tlab_orient").val($(initXML.find("plot").find("y2tlab_orient")).text()),c=$(initXML.find("plot").find("y2_lim")).text().replace("c(","").replace(")","").split(","),$("#y2_lim_min").val(c[0]),$("#y2_lim_max").val(c[1]),$("#y2_bufr").val($(initXML.find("plot").find("y1_bufr")).text()),$("#legend_size").val($(initXML.find("plot").find("legend_size")).text()),
c=$(initXML.find("plot").find("legend_inset")).text().replace("c(","").replace(")","").split(","),$("#legend_inset_min").val(c[0]),$("#legend_inset_max").val(c[1]),$("#legend_box").val($(initXML.find("plot").find("legend_box")).text()),$("#legend_ncol").val($(initXML.find("plot").find("legend_ncol")).text()),$("#caption_align").val($(initXML.find("plot").find("caption_align")).text()),$("#caption_offset").val($(initXML.find("plot").find("caption_offset")).text()),$("#caption_size").val($(initXML.find("plot").find("caption_size")).text()),
$("#caption_weight").val($(initXML.find("plot").find("caption_weight")).text()),c=$(initXML.find("plot").find("caption_col")).text(),7<c.length&&(c=c.substring(0,7)),$("#caption_col").colorpicker("setColor",c)):resetFormatting();$("#release").on("click",function(){var a=window.open("https://metviewer.readthedocs.io/en/latest/");a?a.focus():alert("Please allow popups for this site")});e=$("#categories11");for(c=0;c<categories.length;c++){var g=$(categories[c]);f=$('<ul data-label="'+g.attr("name")+
'">');g=g.find("db");for(var k=0;k<g.length;k++){var l=$(g[k]),p=l.find("val"),m=l.find("desc");l=$('<li data-value="'+p.text()+'" title="'+m.text()+'">');p=$('<input name="multiselect_database" type="checkbox" disabled value="'+p.text()+'" title="'+m.text()+'" id="'+p.text()+'" /><label for="'+p.text()+'" >'+p.text()+"</label>lab");l.prepend(p);f.append(l)}e.append(f)}$(".multilevel-dropdown").multilevelDropdown();$("input[name='multiselect_database']").on("change",function(a){if(null!=$(this).val()){var b=
[];$("input[name='multiselect_database']:checked").each(function(){b.push($(this).val())});a=document.createTextNode(1===b.length?b[0]:0===b.length?"Select database":b.length+" selected");var c=document.getElementById("categories1").childNodes[0];c.replaceChild(a,c.childNodes[0]);updatePages()}});$("#header").css("position","static")}
function updatePages(){seriesDiffY1=[];seriesDiffY2=[];var a;if("Series"===currentTab||"Box"===currentTab||"Bar"===currentTab){$("#listdt").jqGrid("clearGridData");var b=$("#plot_data").multiselect("getChecked")[0].value;updateForecastVariables();$("#plot_data").multiselect("getChecked")[0].value!==b&&(b=$("#plot_data").multiselect("getChecked")[0].value,updateForecastVariables(),$("#plot_data").multiselect("getChecked")[0].value!==b&&updateForecastVariables());b=$("#plot_data").multiselect("getChecked")[0].value;
"stat"===b?(updateStats("y1",1,[]),updateStats("y2",1,[]),updateFixVar("stat"),updateIndyVar("stat"),$("#agg_none").prop("checked","checked")):"mode"===b?(updateMode("y1",1,[]),updateMode("y2",1,[]),updateFixVar("mode"),updateIndyVar("mode")):"mtd"===b&&(updateMtd("y1",1,[]),updateMtd("y2",1,[]),updateFixVar("mtd"),updateIndyVar("mtd"));updateSeriesVarVal("y1",1,[]);updateSeriesVarVal("y2",1,[])}else if("Roc"===currentTab||"Rely"===currentTab||"Hist"===currentTab||"Eclv"===currentTab){updateSeriesVarValHist(1,
[]);for(a=0;a<fixed_var_indexes.length;a++)b=$("#fixed_var_val_"+fixed_var_indexes[a]).val(),updateFixedVarValHist(fixed_var_indexes[a],b);"Rely"===currentTab?updateSeriesRely():updateSeriesHist()}else if("Ens_ss"===currentTab){for(a=0;a<series_var_y1_indexes.length;a++)b=$("#series_var_val_y1_"+series_var_y1_indexes[a]).val(),updateSeriesVarValEns(series_var_y1_indexes[a],b);for(a=0;a<fixed_var_indexes.length;a++)b=$("#fixed_var_val_"+fixed_var_indexes[a]).val(),updateFixedVarValHist(fixed_var_indexes[a],
b)}else if("Perf"===currentTab)for($("#listdt").jqGrid("clearGridData"),updateSeriesVarVal("y1",1,[]),a=$("#fixed_var_table").find("tr").length-1;0<=a;a--)removeFixedVar("fixed_var_"+(a+1));else"Taylor"===currentTab?($("#listdt").jqGrid("clearGridData"),updateForecastVariables(),updateSeriesVarVal("y1",1,[])):"Contour"===currentTab&&($("#listdt").jqGrid("clearGridData"),updateStatVariable(),updateYvalueCountour([]))}
function addThemeSwitcher(a,b){$('<div id="themeContainer" style="position: absolute; overflow-x: hidden;"></div>').css($.extend({top:"15px",zIndex:10},b)).appendTo(a||"body").themeswitcher()}
function changeFixedVarHist(a){var b={};"rhist"===a?b=rhist_fixed_var_map:"phist"===a?b=phist_fixed_var_map:"relp"===a&&(b=relp_fixed_var_map);for(var d=0;d<fixed_var_indexes.length;d++){var e=$("#fixed_var_"+fixed_var_indexes[d]).val();$("#fixed_var_"+fixed_var_indexes[d]).empty();$.each(b,function(a,b){a===e?$("#fixed_var_"+fixed_var_indexes[d]).append($('<option value="'+a+'" selected>'+b+"</option>")):$("#fixed_var_"+fixed_var_indexes[d]).append($('<option value="'+a+'">'+b+"</option>"))});$("#fixed_var_"+
fixed_var_indexes[d]).multiselect("refresh")}}
function onIndyCalendarClose(a,b){if(b){var d=$("#fixed_var_val_date_range_by_"+b).val().trim();var e=$("#fixed_var_val_date_range_by_unit_"+b).val();var c=$(fixVarValResponse[b]).find("val");var f="YYYY-MM-DD HH:mm:ss";var g=$("#fixed_var_val_"+b)}else d=$("#date_range_by").val().trim(),e=$("#date_range_by_unit").val(),c=$(previousIndVarValResponse).find("val"),f=$("#date_range_format").length?$("#date_range_format").val().trim():"YYYY-MM-DD HH:mm:ss",g=$("#indy_var_val");0===d.length&&(d=1,e="hours");
d=parseInt(d);"min"===e?d*=60:"hours"===e?d*=3600:"days"===e&&(d*=86400);e=moment.tz(a.date1,"UTC");var k=moment.tz(a.date2,"UTC");g.multiselect("uncheckAll");for(var l=$('[name="multiselect_indy_var_val"]');e<=k;){for(var p=e.format("YYYY-MM-DD HH:mm:ss"),m=!1,q=0;q<c.length;q++)if($(c[q]).text()===p){m=!0;break}if(m){try{var t=e.format(f)}catch(x){console.log("formatting error"),console.error(x),t=p}m=g.find('option[value="'+p+'"]');m.prop("selected",!0);if(!b)for(indy_var_vals_to_attr={},q=0;q<
l.length;q++){var u=$(l[q]);if(u.attr("value")===p){p=u.attr("id");$("#"+p+"_label").val(t);indy_var_vals_to_attr[l[q].value]=a;break}}m.text(t)}e.add(d,"seconds")}b&&g.multiselect("option","indy_var_vals_to_attr",indy_var_vals_to_attr);try{g.multiselect("refresh")}catch(x){console.log(x)}}
function createCalendarTopBarWithFormat(){return'<div class="normal-top"><span class="selection-top">Selected: </span> <b class="start-day">...</b> <span class="separator-day"> - </span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> Days)</i><br/><label for="date_range_by" style="color: #333;">By:</label><input style="width: 30px;line-height: 1;" id="date_range_by" type="text"><select id="date_range_by_unit" style="font-size: 10px;">            <option value="sec">sec</option>            <option value="min">min</option>            <option value="hours" selected="">hours</option>            <option value="days">days</option>          </select><label for="date_range_format" style="color: #333;">&nbsp;Format:</label><input style="width: 150px;line-height: 1;" id="date_range_format" type="text" value="YYYY-MM-DD HH:mm:ss"></div><div class="error-top">error</div><div class="default-top">default</div>'}
function createCalendarTopBarNoFormat(a){if(a){var b="fixed_var_val_date_range_by_"+a;a="fixed_var_val_date_range_by_unit_"+a}else b="date_range_by",a="date_range_by_unit";return b='<div class="normal-top"><span class="selection-top">Selected: </span> <b class="start-day">...</b> <span class="separator-day"> - </span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> Days)</i><br/><label for="date_range_by" style="color: #333;">By:</label><input style="width: 30px;line-height: 1;" id="'+
(b+'" type="text"><select id="'+a+'" style="font-size: 10px;">            <option value="sec">sec</option>            <option value="min">min</option>            <option value="hours" selected="">hours</option>            <option value="days">days</option>          </select></div><div class="error-top">error</div><div class="default-top">default</div>')}String.prototype.formatAll=function(a){a=this.split("&#38;").join("&");a=a.split("&gt;").join(">");return a=a.split("&lt;").join("<")};
